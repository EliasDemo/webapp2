import{a as N}from"./chunk-VU2HTVBD.js";import{B as q,a as Ee,b as F,c as f,d as R,e as L,j as B,k as W,n as U,q as $,r as Y,s as ee,t as te,u as we,v as ie,z as j}from"./chunk-J2XPQYKK.js";import{a as O}from"./chunk-QG2H74YZ.js";import"./chunk-LWNR2F3M.js";import{d as be,f as he,g as ye}from"./chunk-5VQTM22E.js";import{i as fe,j as xe,k as M,p as ve,u as D}from"./chunk-FE5WSVYG.js";import{$a as n,Fb as ae,Gb as le,Ka as T,Kb as ge,Lb as ue,Ob as A,Pa as p,Ra as V,T as y,Tb as w,Y as v,Z as b,_a as c,ab as i,bb as d,eb as P,fa as C,fb as I,gb as E,kb as _,mb as m,n as S,rb as k,sb as me,ua as Q,vb as a,wb as h,xb as x,ya as l,yb as pe,zb as _e}from"./chunk-63T4HJ2B.js";import{a as J,b as K}from"./chunk-IMPBB4AK.js";function Ve(r,t){if(r&1&&(n(0,"div",28),a(1),i()),r&2){let e=m();l(),h(e.serverError)}}function Ne(r,t){r&1&&d(0,"i",29)}var G=class G{constructor(){this.fb=y(j);this.api=y(O);this.saved=new V;this.closed=new V;this.busy=!1;this.serverError=null;this.form=this.fb.group({titulo:this.fb.nonNullable.control("",[f.required,f.maxLength(255)]),descripcion:this.fb.control(""),codigo:this.fb.control(""),tipo:this.fb.nonNullable.control("LIBRE",f.required),modalidad:this.fb.nonNullable.control("PRESENCIAL",f.required),nivel:this.fb.control(null),horas_planificadas:this.fb.nonNullable.control(0,[f.required,f.min(0)]),horas_minimas_participante:this.fb.control(null)})}ngOnInit(){let t=this.initial;this.form.patchValue({titulo:t.titulo,descripcion:t.descripcion??"",codigo:t.codigo??"",tipo:t.tipo,modalidad:t.modalidad,nivel:t.nivel,horas_planificadas:t.horas_planificadas,horas_minimas_participante:t.horas_minimas_participante})}closeByBackdrop(){this.busy||this.closed.emit()}async submit(){if(!(this.form.invalid||this.busy)){this.serverError=null,this.busy=!0;try{let t=this.form.getRawValue(),e={titulo:t.titulo,descripcion:t.descripcion??null,codigo:t.codigo??null,tipo:t.tipo,modalidad:t.modalidad,nivel:t.nivel??null,horas_planificadas:Number(t.horas_planificadas),horas_minimas_participante:t.horas_minimas_participante??null},o=await S(this.api.actualizarProyecto(this.proyectoId,e));o&&N(o)?this.saved.emit():this.serverError=o?.message||"No se pudo guardar."}catch(t){this.serverError=t?.error?.message||"Error del servidor."}finally{this.busy=!1}}}};G.\u0275fac=function(e){return new(e||G)},G.\u0275cmp=T({type:G,selectors:[["app-proyecto-edit-modal"]],inputs:{proyectoId:"proyectoId",initial:"initial"},outputs:{saved:"saved",closed:"closed"},decls:61,vars:4,consts:[[1,"fixed","inset-0","z-50","bg-black/40",3,"click"],[1,"fixed","inset-0","z-50","grid","place-items-center","pointer-events-none"],[1,"pointer-events-auto","w-full","max-w-2xl","rounded-2xl","bg-white","p-5","shadow-xl"],[1,"flex","items-start","justify-between","gap-4"],[1,"text-lg","font-semibold"],[1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"fa-solid","fa-xmark"],[1,"mt-4","space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","mb-1"],["type","text","formControlName","titulo",1,"w-full","rounded-lg","border","p-2"],[1,"grid","sm:grid-cols-2","gap-3"],["type","text","formControlName","codigo",1,"w-full","rounded-lg","border","p-2"],["type","number","formControlName","nivel",1,"w-full","rounded-lg","border","p-2"],["formControlName","tipo",1,"w-full","rounded-lg","border","p-2"],["value","LIBRE"],["value","VINCULADO"],["formControlName","modalidad",1,"w-full","rounded-lg","border","p-2"],["value","PRESENCIAL"],["value","VIRTUAL"],["value","MIXTA"],["type","number","formControlName","horas_planificadas","min","0",1,"w-full","rounded-lg","border","p-2"],["type","number","formControlName","horas_minimas_participante","min","0",1,"w-full","rounded-lg","border","p-2"],["rows","3","formControlName","descripcion",1,"w-full","rounded-lg","border","p-2"],["class","text-sm text-red-600",4,"ngIf"],[1,"flex","justify-end","gap-2","pt-2"],["type","button",1,"px-4","py-2","rounded-lg","border",3,"click"],["type","submit",1,"px-4","py-2","rounded-lg","bg-blue-600","text-white","hover:bg-blue-700","disabled:opacity-60",3,"disabled"],["class","fa-solid fa-spinner fa-spin mr-2",4,"ngIf"],[1,"text-sm","text-red-600"],[1,"fa-solid","fa-spinner","fa-spin","mr-2"]],template:function(e,o){e&1&&(n(0,"div",0),_("click",function(){return o.closeByBackdrop()}),i(),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),a(5,"Editar proyecto"),i(),n(6,"button",5),_("click",function(){return o.closed.emit()}),d(7,"i",6),i()(),n(8,"form",7),_("ngSubmit",function(){return o.submit()}),n(9,"div")(10,"label",8),a(11,"T\xEDtulo"),i(),d(12,"input",9),i(),n(13,"div",10)(14,"div")(15,"label",8),a(16,"C\xF3digo"),i(),d(17,"input",11),i(),n(18,"div")(19,"label",8),a(20,"Nivel"),i(),d(21,"input",12),i()(),n(22,"div",10)(23,"div")(24,"label",8),a(25,"Tipo"),i(),n(26,"select",13)(27,"option",14),a(28,"LIBRE"),i(),n(29,"option",15),a(30,"VINCULADO"),i()()(),n(31,"div")(32,"label",8),a(33,"Modalidad"),i(),n(34,"select",16)(35,"option",17),a(36,"PRESENCIAL"),i(),n(37,"option",18),a(38,"VIRTUAL"),i(),n(39,"option",19),a(40,"MIXTA"),i()()()(),n(41,"div",10)(42,"div")(43,"label",8),a(44,"Horas planificadas"),i(),d(45,"input",20),i(),n(46,"div")(47,"label",8),a(48,"Horas m\xEDn. participante"),i(),d(49,"input",21),i()(),n(50,"div")(51,"label",8),a(52,"Descripci\xF3n"),i(),d(53,"textarea",22),i(),p(54,Ve,2,1,"div",23),n(55,"div",24)(56,"button",25),_("click",function(){return o.closed.emit()}),a(57,"Cancelar"),i(),n(58,"button",26),p(59,Ne,1,0,"i",27),a(60," Guardar "),i()()()()()),e&2&&(l(8),c("formGroup",o.form),l(46),c("ngIf",o.serverError),l(4),c("disabled",o.form.invalid||o.busy),l(),c("ngIf",o.busy))},dependencies:[D,M,q,B,ee,te,F,W,Y,R,L,ie,U,$],encapsulation:2});var ne=G;function Te(r,t){if(r&1&&(n(0,"div",28),a(1),i()),r&2){let e=m();l(),h(e.serverError)}}function ke(r,t){r&1&&d(0,"i",29)}var z=class z{constructor(){this.fb=y(j);this.api=y(O);this.saved=new V;this.closed=new V;this.busy=!1;this.serverError=null;this.form=this.fb.group({nombre:this.fb.nonNullable.control("",[f.required,f.maxLength(255)]),descripcion:this.fb.control(""),tipo_registro:this.fb.nonNullable.control("HORAS",f.required),horas_asignadas:this.fb.control(null),nota_minima:this.fb.control(null),requiere_asistencia:this.fb.nonNullable.control(!1),orden:this.fb.control(1,[f.min(1)])})}ngOnInit(){let t=this.initial;this.form.patchValue({nombre:t.nombre,descripcion:t.descripcion??"",tipo_registro:t.tipo_registro,horas_asignadas:t.horas_asignadas,nota_minima:t.nota_minima,requiere_asistencia:t.requiere_asistencia,orden:t.orden}),this.form.get("tipo_registro").valueChanges.subscribe(e=>{let o=this.form.get("horas_asignadas"),s=this.form.get("nota_minima");o.clearValidators(),s.clearValidators(),(e==="HORAS"||e==="MIXTO")&&o.addValidators([f.required,f.min(0),f.max(32767)]),(e==="EVALUACION"||e==="MIXTO")&&s.addValidators([f.required,f.min(0),f.max(100)]),o.updateValueAndValidity({emitEvent:!1}),s.updateValueAndValidity({emitEvent:!1})})}closeByBackdrop(){this.busy||this.closed.emit()}async submit(){if(!(this.form.invalid||this.busy)){this.serverError=null,this.busy=!0;try{let t=this.form.getRawValue(),e={nombre:t.nombre,descripcion:t.descripcion??null,tipo_registro:t.tipo_registro,requiere_asistencia:t.requiere_asistencia,horas_asignadas:t.horas_asignadas!=null?Number(t.horas_asignadas):null,nota_minima:t.nota_minima!=null?Number(t.nota_minima):null,orden:t.orden!=null?Number(t.orden):null},o=await S(this.api.actualizarProcesoById(this.procesoId,e));o&&N(o)?this.saved.emit():this.serverError=o?.message||"No se pudo guardar."}catch(t){this.serverError=t?.error?.message||"Error del servidor."}finally{this.busy=!1}}}};z.\u0275fac=function(e){return new(e||z)},z.\u0275cmp=T({type:z,selectors:[["app-proceso-edit-modal"]],inputs:{procesoId:"procesoId",initial:"initial"},outputs:{saved:"saved",closed:"closed"},decls:54,vars:4,consts:[[1,"fixed","inset-0","z-50","bg-black/40",3,"click"],[1,"fixed","inset-0","z-50","grid","place-items-center","pointer-events-none"],[1,"pointer-events-auto","w-full","max-w-xl","rounded-2xl","bg-white","p-5","shadow-xl"],[1,"flex","items-start","justify-between","gap-4"],[1,"text-lg","font-semibold"],[1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"fa-solid","fa-xmark"],[1,"mt-4","space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","mb-1"],["type","text","formControlName","nombre",1,"w-full","rounded-lg","border","p-2"],[1,"grid","sm:grid-cols-2","gap-3"],["formControlName","tipo_registro",1,"w-full","rounded-lg","border","p-2"],["value","HORAS"],["value","ASISTENCIA"],["value","EVALUACION"],["value","MIXTO"],["type","number","formControlName","orden","min","1",1,"w-full","rounded-lg","border","p-2"],["type","number","formControlName","horas_asignadas","min","0",1,"w-full","rounded-lg","border","p-2"],["type","number","formControlName","nota_minima","min","0","max","100",1,"w-full","rounded-lg","border","p-2"],[1,"flex","items-center","gap-2"],["id","reqAsist","type","checkbox","formControlName","requiere_asistencia",1,"h-4","w-4","rounded","border-gray-300"],["for","reqAsist",1,"text-sm"],["rows","3","formControlName","descripcion",1,"w-full","rounded-lg","border","p-2"],["class","text-sm text-red-600",4,"ngIf"],[1,"flex","justify-end","gap-2","pt-2"],["type","button",1,"px-4","py-2","rounded-lg","border",3,"click"],["type","submit",1,"px-4","py-2","rounded-lg","bg-blue-600","text-white","hover:bg-blue-700","disabled:opacity-60",3,"disabled"],["class","fa-solid fa-spinner fa-spin mr-2",4,"ngIf"],[1,"text-sm","text-red-600"],[1,"fa-solid","fa-spinner","fa-spin","mr-2"]],template:function(e,o){e&1&&(n(0,"div",0),_("click",function(){return o.closeByBackdrop()}),i(),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),a(5,"Editar proceso"),i(),n(6,"button",5),_("click",function(){return o.closed.emit()}),d(7,"i",6),i()(),n(8,"form",7),_("ngSubmit",function(){return o.submit()}),n(9,"div")(10,"label",8),a(11,"Nombre"),i(),d(12,"input",9),i(),n(13,"div",10)(14,"div")(15,"label",8),a(16,"Tipo de registro"),i(),n(17,"select",11)(18,"option",12),a(19,"HORAS"),i(),n(20,"option",13),a(21,"ASISTENCIA"),i(),n(22,"option",14),a(23,"EVALUACION"),i(),n(24,"option",15),a(25,"MIXTO"),i()()(),n(26,"div")(27,"label",8),a(28,"Orden"),i(),d(29,"input",16),i()(),n(30,"div",10)(31,"div")(32,"label",8),a(33,"Horas asignadas"),i(),d(34,"input",17),i(),n(35,"div")(36,"label",8),a(37,"Nota m\xEDnima"),i(),d(38,"input",18),i()(),n(39,"div",19),d(40,"input",20),n(41,"label",21),a(42,"Requiere asistencia"),i()(),n(43,"div")(44,"label",8),a(45,"Descripci\xF3n"),i(),d(46,"textarea",22),i(),p(47,Te,2,1,"div",23),n(48,"div",24)(49,"button",25),_("click",function(){return o.closed.emit()}),a(50,"Cancelar"),i(),n(51,"button",26),p(52,ke,1,0,"i",27),a(53," Guardar "),i()()()()()),e&2&&(l(8),c("formGroup",o.form),l(39),c("ngIf",o.serverError),l(4),c("disabled",o.form.invalid||o.busy),l(),c("ngIf",o.busy))},dependencies:[D,M,q,B,ee,te,F,W,Ee,Y,R,L,ie,we,U,$],encapsulation:2});var oe=z;function Ae(r,t){if(r&1&&(n(0,"div",21),a(1),i()),r&2){let e=m();l(),h(e.serverError)}}function Me(r,t){r&1&&d(0,"i",22)}var H=class H{constructor(){this.fb=y(j);this.api=y(O);this.saved=new V;this.closed=new V;this.busy=!1;this.serverError=null;this.form=this.fb.group({fecha:this.fb.nonNullable.control("",[f.required]),hora_inicio:this.fb.nonNullable.control("",[f.required]),hora_fin:this.fb.nonNullable.control("",[f.required]),lugar:this.fb.control(null),enlace:this.fb.control(null),observacion:this.fb.control(null)})}ngOnInit(){let t=this.initial;this.form.patchValue({fecha:t.fecha,hora_inicio:t.hora_inicio,hora_fin:t.hora_fin})}closeByBackdrop(){this.busy||this.closed.emit()}async submit(){if(!(this.form.invalid||this.busy)){this.serverError=null,this.busy=!0;try{let t=this.form.getRawValue(),e=await S(this.api.actualizarSesionById(this.sesionId,{fecha:t.fecha,hora_inicio:t.hora_inicio,hora_fin:t.hora_fin,lugar:t.lugar??void 0,enlace:t.enlace??void 0,observacion:t.observacion??void 0}));e&&N(e)?this.saved.emit():this.serverError=e?.message||"No se pudo guardar."}catch(t){this.serverError=t?.error?.message||"Error del servidor."}finally{this.busy=!1}}}};H.\u0275fac=function(e){return new(e||H)},H.\u0275cmp=T({type:H,selectors:[["app-sesion-edit-modal"]],inputs:{sesionId:"sesionId",initial:"initial"},outputs:{saved:"saved",closed:"closed"},decls:41,vars:4,consts:[[1,"fixed","inset-0","z-50","bg-black/40",3,"click"],[1,"fixed","inset-0","z-50","grid","place-items-center","pointer-events-none"],[1,"pointer-events-auto","w-full","max-w-md","rounded-2xl","bg-white","p-5","shadow-xl"],[1,"flex","items-start","justify-between","gap-4"],[1,"text-lg","font-semibold"],[1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"fa-solid","fa-xmark"],[1,"mt-4","space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","mb-1"],["type","date","formControlName","fecha",1,"w-full","rounded-lg","border","p-2"],[1,"grid","grid-cols-2","gap-3"],["type","time","formControlName","hora_inicio",1,"w-full","rounded-lg","border","p-2"],["type","time","formControlName","hora_fin",1,"w-full","rounded-lg","border","p-2"],["type","text","formControlName","lugar",1,"w-full","rounded-lg","border","p-2"],["type","text","formControlName","enlace",1,"w-full","rounded-lg","border","p-2"],["rows","2","formControlName","observacion",1,"w-full","rounded-lg","border","p-2"],["class","text-sm text-red-600",4,"ngIf"],[1,"flex","justify-end","gap-2","pt-2"],["type","button",1,"px-4","py-2","rounded-lg","border",3,"click"],["type","submit",1,"px-4","py-2","rounded-lg","bg-blue-600","text-white","hover:bg-blue-700","disabled:opacity-60",3,"disabled"],["class","fa-solid fa-spinner fa-spin mr-2",4,"ngIf"],[1,"text-sm","text-red-600"],[1,"fa-solid","fa-spinner","fa-spin","mr-2"]],template:function(e,o){e&1&&(n(0,"div",0),_("click",function(){return o.closeByBackdrop()}),i(),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),a(5,"Editar sesi\xF3n"),i(),n(6,"button",5),_("click",function(){return o.closed.emit()}),d(7,"i",6),i()(),n(8,"form",7),_("ngSubmit",function(){return o.submit()}),n(9,"div")(10,"label",8),a(11,"Fecha"),i(),d(12,"input",9),i(),n(13,"div",10)(14,"div")(15,"label",8),a(16,"Hora inicio"),i(),d(17,"input",11),i(),n(18,"div")(19,"label",8),a(20,"Hora fin"),i(),d(21,"input",12),i()(),n(22,"div")(23,"label",8),a(24,"Lugar (opcional)"),i(),d(25,"input",13),i(),n(26,"div")(27,"label",8),a(28,"Enlace (opcional)"),i(),d(29,"input",14),i(),n(30,"div")(31,"label",8),a(32,"Observaci\xF3n (opcional)"),i(),d(33,"textarea",15),i(),p(34,Ae,2,1,"div",16),n(35,"div",17)(36,"button",18),_("click",function(){return o.closed.emit()}),a(37,"Cancelar"),i(),n(38,"button",19),p(39,Me,1,0,"i",20),a(40," Guardar "),i()()()()()),e&2&&(l(8),c("formGroup",o.form),l(26),c("ngIf",o.serverError),l(4),c("disabled",o.form.invalid||o.busy),l(),c("ngIf",o.busy))},dependencies:[D,M,q,B,F,R,L,U,$],encapsulation:2});var re=H;var Pe=()=>["/vm/proyectos"],De=r=>["/vm/proyectos",r,"registrantes"],Oe=r=>["/vm/sesiones",r,"asistencia"];function Fe(r,t){r&1&&(P(0),n(1,"div",14)(2,"div",15)(3,"div",16),d(4,"div",17)(5,"div",18),i(),n(6,"p",19),a(7,"Cargando proyecto\u2026"),i()()(),I())}function Re(r,t){if(r&1){let e=E();P(0),n(1,"div",20)(2,"div",21)(3,"div",22),d(4,"i",23),i(),n(5,"h3",24),a(6,"Error al cargar el proyecto"),i(),n(7,"p",25),a(8),i(),n(9,"div",26)(10,"a",27),d(11,"i",28),a(12," Volver "),i(),n(13,"button",29),_("click",function(){v(e);let s=m(2);return b(s.handleRefresh())}),d(14,"i",30),a(15," Reintentar "),i()()()(),I()}if(r&2){let e=m(2);l(8),h(e.error()),l(2),c("routerLink",ae(2,Pe))}}function Le(r,t){if(r&1&&(P(0),n(1,"span",43),a(2,"\u2022"),i(),n(3,"span",41),d(4,"i",70),a(5),i(),I()),r&2){let e=t.ngIf;l(5),x(" Niveles: ",e," ")}}function Be(r,t){if(r&1&&d(0,"img",71),r&2){let e=m(4);c("src",e.portadaUrl(),Q)}}function Ue(r,t){r&1&&(n(0,"div",72),d(1,"i",73),i())}function $e(r,t){if(r&1){let e=E();n(0,"button",74),_("click",function(){v(e);let s=m(4);return b(s.openProyectoEdit())}),d(1,"i",75),a(2," Editar "),i()}}function je(r,t){if(r&1){let e=E();n(0,"button",76),_("click",function(){v(e);let s=m(4);return b(s.handlePublish())}),d(1,"i",77),a(2," Publicar "),i()}}function qe(r,t){if(r&1){let e=E();n(0,"button",76),_("click",function(){v(e);let s=m(4);return b(s.openProyectoEdit())}),d(1,"i",78),a(2," A\xF1adir "),i()}}function Ge(r,t){if(r&1&&(n(0,"div",49)(1,"div",81),d(2,"img",82),n(3,"div",83),a(4),i()()()),r&2){let e=t.$implicit,o=t.index;l(2),c("src",e.url||"",Q)("alt","Imagen "+(o+1)),l(2),x("#",o+1)}}function ze(r,t){if(r&1&&(P(0),n(1,"div",79),p(2,Ge,5,3,"div",80),i(),I()),r&2){let e=m(4);l(2),c("ngForOf",e.galeria())("ngForTrackBy",e.trackByIndex)}}function He(r,t){r&1&&(n(0,"div",84)(1,"div",85),d(2,"i",86),i(),n(3,"p",87),a(4,"No hay im\xE1genes en la galer\xEDa"),i()())}function Xe(r,t){r&1&&(n(0,"span",43),a(1,"\u2022"),i())}function Ze(r,t){if(r&1&&(n(0,"span",41),d(1,"i",106),a(2),i()),r&2){let e=m().$implicit;l(2),x("",e.sesiones==null?null:e.sesiones.length," sesiones ")}}function Je(r,t){if(r&1){let e=E();n(0,"button",107),_("click",function(){v(e);let s=m().$implicit,g=m(5);return b(g.openProcesoEdit(s.id))}),d(1,"i",75),a(2," Editar "),i()}}function Ke(r,t){if(r&1&&(n(0,"span",130),a(1),i()),r&2){let e=t.$implicit;l(),x(" ",e," ")}}function Qe(r,t){if(r&1&&(P(0),n(1,"span",41),d(2,"i",70),n(3,"span",128),a(4,"Ciclos:"),i()(),p(5,Ke,2,1,"span",129),I()),r&2){let e=m().$implicit,o=m(7);l(5),c("ngForOf",o.sesionNiveles(e))("ngForTrackBy",o.trackByIndex)}}function We(r,t){if(r&1){let e=E();n(0,"button",131),_("click",function(){v(e);let s=m().$implicit,g=m(2).$implicit,u=m(5);return b(u.openSesionEdit(g.id,s.id))}),d(1,"i",75),i()}}function Ye(r,t){if(r&1&&(n(0,"div",41),d(1,"i",136),a(2),i()),r&2){let e=m(2).$implicit;l(2),x(" ",e.lugar," ")}}function et(r,t){if(r&1&&(n(0,"div",41),d(1,"i",137),n(2,"a",138),a(3,"Enlace"),i()()),r&2){let e=m(2).$implicit;l(2),c("href",e.enlace,Q)}}function tt(r,t){if(r&1&&(n(0,"div",41),d(1,"i",139),a(2),i()),r&2){let e=m(2).$implicit;l(2),x(" ",e.observacion," ")}}function it(r,t){if(r&1&&(n(0,"span",130),a(1),i()),r&2){let e=t.$implicit;l(),x(" ",e," ")}}function nt(r,t){if(r&1&&(P(0),p(1,it,2,1,"span",129),I()),r&2){let e=m(2).$implicit,o=m(7);l(),c("ngForOf",o.sesionNiveles(e))("ngForTrackBy",o.trackByIndex)}}function ot(r,t){r&1&&(n(0,"span",140),a(1,"\u2014"),i())}function rt(r,t){r&1&&(n(0,"span",141),d(1,"i",142),a(2," Cargando\u2026 "),i())}function at(r,t){if(r&1&&(n(0,"div",132),p(1,Ye,3,1,"div",99)(2,et,4,1,"div",99)(3,tt,3,1,"div",99),n(4,"div",133)(5,"span",41),d(6,"i",70),n(7,"span",134),a(8,"Ciclos:"),i()(),p(9,nt,2,2,"ng-container",9)(10,ot,2,0,"ng-template",null,6,A)(12,rt,3,0,"span",135),i()()),r&2){let e=k(11),o=m().$implicit,s=m(7);l(),c("ngIf",o.lugar),l(),c("ngIf",o.enlace),l(),c("ngIf",o.observacion),l(6),c("ngIf",s.sesionNiveles(o).length)("ngIfElse",e),l(3),c("ngIf",s.ciclosBusyId()===o.id)}}function lt(r,t){if(r&1){let e=E();n(0,"div",110),_("click",function(){let s=v(e).$implicit,g=m(7);return b(g.toggleSesion(s.id))}),n(1,"div",111)(2,"div",112)(3,"div",113),d(4,"span",114),n(5,"span",115),a(6),i(),n(7,"span",116),a(8),i(),n(9,"span",117),a(10),i()(),n(11,"div",118)(12,"span",119),a(13),i(),n(14,"span",120),a(15),ge(16,"uppercase"),i(),p(17,Qe,6,2,"ng-container",31),i()(),n(18,"div",121),_("click",function(s){return v(e),b(s.stopPropagation())}),n(19,"a",122),d(20,"i",123),i(),n(21,"button",124),_("click",function(){let s=v(e).$implicit,g=m(7);return b(g.exportarExcelSesion(s.id))}),d(22,"i",125),i(),p(23,We,2,0,"button",126),i()(),p(24,at,13,6,"div",127),i()}if(r&2){let e=t.$implicit,o=m(7);l(4),c("ngClass",o.dotClass(o.relativoSesion(e))),l(2),h(e.fecha),l(2),h(o.horaRange(e)),l(2),x("",o.sesionHoras(e),"h"),l(2),c("ngClass",o.estadoChipClass(e.estado)),l(),h(e.estado||"\u2014"),l(2),x(" ",ue(16,13,o.relativoSesion(e))," "),l(2),c("ngIf",o.sesionNiveles(e).length),l(2),c("routerLink",le(15,Oe,e.id)),l(2),c("disabled",o.excelBusyId()===e.id),l(),c("ngClass",o.excelBusyId()===e.id?"fa-spinner fa-spin":"fa-download"),l(),c("ngIf",o.canEditSesion(e)),l(),c("ngIf",o.isSesionExpanded(e.id))}}function st(r,t){if(r&1&&(P(0),n(1,"div",108),p(2,lt,25,17,"div",109),i(),I()),r&2){let e=m().$implicit,o=m(5);l(2),c("ngForOf",e.sesiones)("ngForTrackBy",o.trackBySesion)}}function dt(r,t){r&1&&(n(0,"div",143)(1,"p",144),a(2,"Sin sesiones programadas"),i()())}function ct(r,t){if(r&1&&(n(0,"div",90)(1,"div",91)(2,"div",92)(3,"div",93)(4,"h3",94),a(5),i(),n(6,"span",95),a(7),i()(),n(8,"div",96)(9,"span",41),d(10,"i",97),a(11),i(),n(12,"span",43),a(13,"\u2022"),i(),n(14,"span",41),d(15,"i",46),a(16),i(),p(17,Xe,2,0,"span",98)(18,Ze,3,1,"span",99),i(),n(19,"div",100)(20,"div",101),d(21,"div",102),i(),n(22,"div",103),a(23),i()()(),p(24,Je,3,0,"button",104),i(),n(25,"div",105),p(26,st,3,2,"ng-container",9)(27,dt,3,0,"ng-template",null,5,A),i()()),r&2){let e=t.$implicit,o=k(28),s=m(5);l(5),h(e.nombre),l(),c("ngClass",s.estadoChipClass(e.estado)),l(),x(" ",e.estado||"\u2014"," "),l(4),x("",e.tipo_registro," "),l(5),x("",e.horas_asignadas||0,"h asignadas "),l(),c("ngIf",e.sesiones==null?null:e.sesiones.length),l(),c("ngIf",e.sesiones==null?null:e.sesiones.length),l(3),me("width",s.processProgressPct(e),"%"),l(2),_e(" ",s.totalHorasSesionesByProceso(e),"h de ",e.horas_asignadas||0,"h planificadas (",s.processProgressPct(e),"%) "),l(),c("ngIf",s.canEditProceso(e)),l(2),c("ngIf",e.sesiones==null?null:e.sesiones.length)("ngIfElse",o)}}function mt(r,t){if(r&1&&(P(0),n(1,"div",88),p(2,ct,29,15,"div",89),i(),I()),r&2){let e=m(4);l(2),c("ngForOf",e.procesosSorted())("ngForTrackBy",e.trackByProceso)}}function pt(r,t){r&1&&(n(0,"div",84)(1,"p",87),a(2,"Sin procesos configurados"),i()())}function _t(r,t){if(r&1){let e=E();P(0),n(1,"section",32)(2,"div",33)(3,"div",34)(4,"div",35)(5,"div",36)(6,"h1",37),a(7),i(),n(8,"span",38),d(9,"i",39),a(10),i()(),n(11,"div",40)(12,"span",41),d(13,"i",42),a(14),i(),n(15,"span",43),a(16,"\u2022"),i(),n(17,"span",41),d(18,"i",44),a(19),i(),n(20,"span",43),a(21,"\u2022"),i(),n(22,"span",41),d(23,"i",45),a(24),i(),n(25,"span",43),a(26,"\u2022"),i(),n(27,"span",41),d(28,"i",46),a(29),i(),p(30,Le,6,1,"ng-container",31),i(),n(31,"p",47),a(32),i()(),n(33,"div",48)(34,"div",49)(35,"div",50),p(36,Be,1,1,"img",51)(37,Ue,2,0,"ng-template",null,2,A),i()()()(),n(39,"div",52)(40,"div",53)(41,"button",54),_("click",function(){v(e);let s=m(3);return b(s.handleRefresh())}),d(42,"i",30),a(43," Refrescar "),i(),n(44,"a",55),d(45,"i",56),a(46," Registrados "),i(),p(47,$e,3,0,"button",57)(48,je,3,0,"button",58),n(49,"a",59),d(50,"i",28),a(51," Volver "),i()()()()(),n(52,"section",60)(53,"div",61)(54,"div",62),a(55),i(),n(56,"div",63),a(57,"Procesos"),i()(),n(58,"div",61)(59,"div",62),a(60),i(),n(61,"div",63),a(62,"Sesiones"),i()(),n(63,"div",61)(64,"div",62),a(65),i(),n(66,"div",63),a(67,"Pr\xF3ximas"),i()(),n(68,"div",61)(69,"div",62),a(70),i(),n(71,"div",63),a(72,"En curso"),i()(),n(73,"div",61)(74,"div",62),a(75),i(),n(76,"div",63),a(77,"Pasadas"),i()()(),n(78,"section",64)(79,"div",65)(80,"div")(81,"h2",66),d(82,"i",67),a(83," Galer\xEDa "),i(),n(84,"p",68),a(85),i()(),p(86,qe,3,0,"button",58),i(),p(87,ze,3,2,"ng-container",9)(88,He,5,0,"ng-template",null,3,A),i(),n(90,"section",64)(91,"div",65)(92,"div")(93,"h2",66),d(94,"i",69),a(95," Procesos y sesiones "),i(),n(96,"p",68),a(97),i()()(),p(98,mt,3,2,"ng-container",9)(99,pt,3,0,"ng-template",null,4,A),i(),I()}if(r&2){let e=t.ngIf,o=k(38),s=k(89),g=k(100),u=m(3);l(7),x(" ",e.titulo," "),l(),c("ngClass",u.estadoPillClasses(e.estado)),l(2),x("",e.estado," "),l(4),x(" ",e.codigo||"Sin c\xF3digo"," "),l(5),x(" ",e.tipo," "),l(5),x(" ",e.modalidad," "),l(5),x(" ",e.horas_planificadas,"h "),l(),c("ngIf",u.nivelesTexto()),l(2),x(" ",e.descripcion||"Este proyecto a\xFAn no tiene una descripci\xF3n."," "),l(4),c("ngIf",u.portadaUrl())("ngIfElse",o),l(8),c("routerLink",le(28,De,e.id)),l(3),c("ngIf",u.canEditProyecto()),l(),c("ngIf",e.estado==="PLANIFICADO"),l(),c("routerLink",ae(30,Pe)),l(6),h(u.procesosSorted().length),l(5),h(u.totalSesiones()),l(5),h(u.totalProximas()),l(5),h(u.totalActuales()),l(5),h(u.totalPasadas()),l(10),x("",u.galeria().length," imagen(es)"),l(),c("ngIf",u.canEditProyecto()),l(),c("ngIf",u.galeria().length)("ngIfElse",s),l(10),pe("",u.procesosSorted().length," proceso(s) \u2022 ",u.totalSesiones()," sesiones"),l(),c("ngIf",u.procesosSorted().length>0)("ngIfElse",g)}}function gt(r,t){if(r&1&&p(0,_t,101,31,"ng-container",31),r&2){let e=m(2);c("ngIf",e.proyecto())}}function ut(r,t){if(r&1&&p(0,Re,16,3,"ng-container",9)(1,gt,1,1,"ng-template",null,1,A),r&2){let e=k(2),o=m();c("ngIf",o.error())("ngIfElse",e)}}function ft(r,t){if(r&1){let e=E();n(0,"div",145)(1,"div",146),d(2,"i",125),n(3,"div",147),a(4),i(),n(5,"button",148),_("click",function(){v(e);let s=m();return b(s.closeToast())}),d(6,"i",149),i()()()}if(r&2){let e=m();l(2),c("ngClass",e.toastIcon()),l(2),h(e.toastMsg())}}function xt(r,t){if(r&1){let e=E();n(0,"app-proyecto-edit-modal",150),_("saved",function(){v(e);let s=m();return b(s.onProyectoSaved())})("closed",function(){v(e);let s=m();return b(s.closeProyectoEdit())}),i()}if(r&2){let e=m();c("proyectoId",e.proyecto().id)("initial",e.proyecto())}}function vt(r,t){if(r&1){let e=E();n(0,"app-proceso-edit-modal",151),_("saved",function(){v(e);let s=m();return b(s.onProcesoSaved())})("closed",function(){v(e);let s=m();return b(s.closeProcesoEdit())}),i()}if(r&2){let e=m();c("procesoId",e.procesoEditing().id)("initial",e.procesoEditing())}}function bt(r,t){if(r&1){let e=E();n(0,"app-sesion-edit-modal",152),_("saved",function(){v(e);let s=m();return b(s.onSesionSaved())})("closed",function(){v(e);let s=m();return b(s.closeSesionEdit())}),i()}if(r&2){let e=m();c("sesionId",e.sesionEditing().id)("initial",e.sesionEditing())}}var X=class X{constructor(){this.api=y(O);this.route=y(be);this.router=y(he);this.loading=C(!0);this.error=C(null);this.data=C(null);this.proyecto=w(()=>this.data()?.proyecto||null);this.procesos=w(()=>this.data()?.procesos??[]);this.procesosSorted=w(()=>this.procesos().map(t=>K(J({},t),{sesiones:[...t.sesiones??[]].sort((e,o)=>{let s=this.parseLocalDateTime(e.fecha,e.hora_inicio)?.getTime()??0,g=this.parseLocalDateTime(o.fecha,o.hora_inicio)?.getTime()??0;return s-g})})));this.isPlanificado=w(()=>(this.proyecto()?.estado||"").toUpperCase()==="PLANIFICADO");this.portadaUrl=w(()=>{let t=this.proyecto();return t?.cover_url||t?.imagenes?.[0]?.url||null});this.galeria=w(()=>this.proyecto()?.imagenes??[]);this.nivelesTexto=w(()=>{let t=this.proyecto();if(!t||t.tipo!=="VINCULADO")return null;let e=t.niveles?.length?t.niveles:t.nivel!=null?[t.nivel]:[];return e.length?e.join(", "):null});this.nowTick=C(Date.now());this._timer=null;this.sesionesFlat=w(()=>this.procesosSorted().flatMap(t=>t.sesiones??[]));this.totalSesiones=w(()=>this.sesionesFlat().length);this.totalProximas=w(()=>this.sesionesFlat().filter(t=>this.relativoSesion(t)==="PROXIMA").length);this.totalActuales=w(()=>this.sesionesFlat().filter(t=>this.relativoSesion(t)==="ACTUAL").length);this.totalPasadas=w(()=>this.sesionesFlat().filter(t=>this.relativoSesion(t)==="PASADA").length);this.excelBusyId=C(null);this.ciclosBusyId=C(null);this.expanded=new Set;this.fetchedCiclos=new Set;this.toastMsg=C(null);this.toastIcon=C("fa-circle-check");this.proyectoEditOpen=C(!1);this.procesoEditing=C(null);this.sesionEditing=C(null);this.isSesionExpanded=t=>this.expanded.has(t);this.trackByIndex=t=>t;this.trackByProceso=(t,e)=>e.id;this.trackBySesion=(t,e)=>e.id;this.route.paramMap.subscribe(t=>{let e=t.get("proyectoId")??t.get("id"),o=Number(e);if(!Number.isFinite(o)||o<=0){this.error.set("ID inv\xE1lido"),this.loading.set(!1);return}this.fetchAll(o)}),this._timer=setInterval(()=>this.nowTick.set(Date.now()),3e4)}ngOnDestroy(){this._timer&&clearInterval(this._timer)}async fetchAll(t){this.loading.set(!0),this.error.set(null);try{let e=await S(this.api.obtenerProyectoArbol(t));e&&N(e)?this.data.set(e.data):this.error.set(e?.message||"Error")}catch(e){this.error.set(e?.error?.message||"No se pudo cargar el proyecto.")}finally{this.loading.set(!1)}}handleRefresh(){let t=this.proyecto()?.id;t&&this.fetchAll(t)}estadoPillClasses(t){switch((t||"").toUpperCase()){case"PLANIFICADO":return"border-amber-200 bg-amber-50 text-amber-700";case"EN_CURSO":return"border-emerald-200 bg-emerald-50 text-emerald-700";case"FINALIZADO":case"CERRADO":return"border-slate-200 bg-slate-50 text-slate-700";case"CANCELADO":return"border-rose-200 bg-rose-50 text-rose-700";default:return"border-slate-200 bg-slate-50 text-slate-700"}}estadoChipClass(t){let e=String(t||"").toUpperCase(),o="border px-3 py-1 rounded-full text-xs font-semibold shadow-sm";return e==="PLANIFICADO"||e==="PROGRAMADO"||e==="PROGRAMADA"?`${o} border-amber-200 bg-amber-50 text-amber-700`:e==="EN_CURSO"||e==="ACTIVO"||e==="ACTIVA"?`${o} border-emerald-200 bg-emerald-50 text-emerald-700`:e==="CERRADO"||e==="CERRADA"||e==="FINALIZADO"||e==="FINALIZADA"?`${o} border-slate-200 bg-slate-50 text-slate-700`:e==="CANCELADO"||e==="CANCELADA"||e==="ANULADO"||e==="ANULADA"?`${o} border-rose-200 bg-rose-50 text-rose-700`:`${o} border-slate-200 bg-slate-50 text-slate-700`}dotClass(t){return t==="PROXIMA"?"bg-amber-400":t==="ACTUAL"?"bg-emerald-500":"bg-slate-400"}horaRange(t){return!t?.hora_inicio||!t?.hora_fin?"\u2014":`${t.hora_inicio}\u2013${t.hora_fin}`}parseLocalDateTime(t,e){if(!t||!e)return null;let[o,s,g]=t.split("-").map(Number),[u,Z]=e.split(":").map(Number);return!o||!s||!g?null:new Date(o,s-1,g,u||0,Z||0,0,0)}sesionHoras(t){let[e,o]=(t?.hora_inicio??"00:00").split(":").map(Number),[s,g]=(t?.hora_fin??"00:00").split(":").map(Number),u=e*60+(o||0),Z=s*60+(g||0);Z<u&&(Z+=1440);let Ie=Math.max(0,Z-u);return Math.round(Ie/60*10)/10}totalHorasSesionesByProceso(t){let o=(t?.sesiones??[]).reduce((s,g)=>s+this.sesionHoras(g),0);return Math.round(o*10)/10}processProgressPct(t){let e=t.horas_asignadas??0;if(e<=0)return 0;let o=this.totalHorasSesionesByProceso(t);return Math.min(100,Math.round(o/e*100))}relativoSesion(t){let e=this.parseLocalDateTime(t?.fecha,t?.hora_inicio),o=this.parseLocalDateTime(t?.fecha,t?.hora_fin);if(!e||!o)return"PROXIMA";o.getTime()<=e.getTime()&&(o=new Date(o.getTime()+1440*60*1e3));let s=new Date(this.nowTick());return s<e?"PROXIMA":s>=o?"PASADA":"ACTUAL"}async toggleSesion(t){if(this.expanded.has(t)?this.expanded.delete(t):this.expanded.add(t),this.expanded.has(t)&&!this.fetchedCiclos.has(t)){let e=this.procesos().find(s=>s.sesiones?.some(g=>g.id===t)),o=e?.sesiones?.find(s=>s.id===t);if(o&&!o.ciclos)try{this.ciclosBusyId.set(t);let s=await S(this.api.obtenerSesionParaEdicion(t));if(s&&N(s)){o.ciclos=s.data?.ciclos??[];let g=this.data();g&&e&&this.data.set(K(J({},g),{procesos:g.procesos.map(u=>u.id===e.id?K(J({},u),{sesiones:[...u.sesiones??[]]}):u)}))}}catch{}finally{this.ciclosBusyId.set(null),this.fetchedCiclos.add(t)}}}canEditProyecto(){return String(this.proyecto()?.estado||"").toUpperCase()==="PLANIFICADO"}canEditProceso(t){let e=String(t?.estado||"").toUpperCase();return e!=="EN_CURSO"&&e!=="CERRADO"}canEditSesion(t){let e=String(t?.estado||"").toUpperCase();return e!=="EN_CURSO"&&e!=="CERRADO"}async handleDelete(){let t=this.data();if(t){if(String(t.proyecto.estado).toUpperCase()!=="PLANIFICADO"){alert("Solo se puede eliminar en estado PLANIFICADO");return}if(confirm(`\xBFEliminar "${t.proyecto.titulo}"?`))try{await S(this.api.eliminarProyecto(t.proyecto.id)),this.toastIcon.set("fa-circle-check"),this.showToast("Proyecto eliminado"),this.router.navigateByUrl("/vm/proyectos")}catch{this.toastIcon.set("fa-triangle-exclamation"),this.showToast("No se pudo eliminar el proyecto")}}}async handlePublish(){let t=this.data();if(t)try{let e=await S(this.api.publicarProyecto(t.proyecto.id));if(e?.ok===!1)throw new Error(e?.message||"Error");this.fetchAll(t.proyecto.id),this.toastIcon.set("fa-bullhorn"),this.showToast("Proyecto publicado")}catch(e){this.toastIcon.set("fa-triangle-exclamation"),this.showToast(e?.message||"No se pudo publicar el proyecto")}}openProyectoEdit(){this.canEditProyecto()&&this.proyectoEditOpen.set(!0)}closeProyectoEdit(){this.proyectoEditOpen.set(!1)}onProyectoSaved(){let t=this.proyecto()?.id;this.proyectoEditOpen.set(!1),t&&this.fetchAll(t),this.toastIcon.set("fa-circle-check"),this.showToast("Proyecto actualizado")}openProcesoEdit(t){let e=this.procesos().find(s=>s.id===t);if(!e||!this.canEditProceso(e))return;let o={id:e.id,proyecto_id:e.proyecto_id,nombre:e.nombre,descripcion:e.descripcion??null,tipo_registro:e.tipo_registro,horas_asignadas:e.horas_asignadas??null,nota_minima:e.nota_minima??null,requiere_asistencia:!!e.requiere_asistencia,orden:e.orden??null,estado:e.estado,created_at:e.created_at??null};this.procesoEditing.set(o)}closeProcesoEdit(){this.procesoEditing.set(null)}onProcesoSaved(){this.procesoEditing.set(null);let t=this.proyecto()?.id;t&&this.fetchAll(t),this.toastIcon.set("fa-circle-check"),this.showToast("Proceso actualizado")}openSesionEdit(t,e){let s=this.procesos().find(g=>g.id===t)?.sesiones?.find(g=>g.id===e)||null;s&&this.canEditSesion(s)&&this.sesionEditing.set(s)}closeSesionEdit(){this.sesionEditing.set(null)}onSesionSaved(){this.sesionEditing.set(null);let t=this.proyecto()?.id;t&&this.fetchAll(t),this.toastIcon.set("fa-circle-check"),this.showToast("Sesi\xF3n actualizada")}async exportarExcelSesion(t){if(!this.excelBusyId()){this.excelBusyId.set(t),this.showToast("Generando reporte\u2026");try{let e=await S(this.api.descargarReporteAsistenciasCSV(t)),o=URL.createObjectURL(e),s=document.createElement("a");s.href=o,s.download=`reporte-asistencias-sesion-${t}.csv`,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(o),this.toastIcon.set("fa-download"),this.showToast("Reporte CSV descargado")}catch{this.toastIcon.set("fa-triangle-exclamation"),this.showToast("No se pudo descargar el reporte")}finally{this.excelBusyId.set(null)}}}sesionNiveles(t){return Array.isArray(t.niveles)&&t.niveles.length?[...t.niveles].sort((e,o)=>e-o):Array.isArray(t.ciclos)&&t.ciclos.length?t.ciclos.map(e=>Number(e?.nivel)).filter(e=>Number.isFinite(e)).sort((e,o)=>e-o):[]}showToast(t){this.toastMsg.set(t),setTimeout(()=>this.toastMsg.set(null),2500)}closeToast(){this.toastMsg.set(null)}};X.\u0275fac=function(e){return new(e||X)},X.\u0275cmp=T({type:X,selectors:[["app-proyecto-view-page"]],decls:9,vars:6,consts:[["contentTpl",""],["proyectoContentTpl",""],["noCover",""],["noImgs",""],["noProc",""],["noSes",""],["noCiclosTpl",""],[1,"min-h-screen","bg-gradient-to-br","from-slate-50","via-blue-50/20","to-indigo-50/10","py-6"],[1,"mx-auto","max-w-7xl","space-y-4","px-4"],[4,"ngIf","ngIfElse"],["class","fixed bottom-4 right-4 z-50","aria-live","polite","role","status",4,"ngIf"],[3,"proyectoId","initial","saved","closed",4,"ngIf"],[3,"procesoId","initial","saved","closed",4,"ngIf"],[3,"sesionId","initial","saved","closed",4,"ngIf"],["role","status","aria-live","polite",1,"flex","items-center","justify-center","py-20"],[1,"text-center"],[1,"relative","mx-auto","mb-3","h-12","w-12"],[1,"h-12","w-12","rounded-full","border-3","border-slate-200"],[1,"absolute","inset-0","h-12","w-12","animate-spin","rounded-full","border-3","border-indigo-500","border-t-transparent"],[1,"text-base","font-semibold","text-slate-700"],["role","alert","aria-live","assertive",1,"relative","mx-auto","max-w-2xl","overflow-hidden","rounded-xl","border","border-rose-200","bg-white","p-8","text-center","shadow-sm"],[1,"relative"],[1,"mx-auto","mb-4","grid","h-12","w-12","place-items-center","rounded-xl","bg-rose-100","text-rose-600"],[1,"fa-solid","fa-triangle-exclamation","text-xl"],[1,"mb-2","text-lg","font-bold","text-slate-900"],[1,"mb-5","text-sm","font-semibold","text-rose-700"],[1,"flex","justify-center","gap-2"],[1,"inline-flex","items-center","gap-2","rounded-xl","bg-gradient-to-r","from-blue-600","to-indigo-600","px-4","py-2","text-sm","font-semibold","text-white","shadow-sm","transition-colors","hover:from-blue-700","hover:to-indigo-700",3,"routerLink"],[1,"fa-solid","fa-arrow-left"],[1,"inline-flex","items-center","gap-2","rounded-xl","border","border-slate-300","bg-white","px-4","py-2","text-sm","font-semibold","text-slate-700","shadow-sm","transition-colors","hover:bg-slate-50",3,"click"],[1,"fa-solid","fa-rotate"],[4,"ngIf"],[1,"relative","overflow-hidden","rounded-xl","border","border-slate-200","bg-white","shadow-sm"],[1,"p-5"],[1,"flex","flex-col","gap-4","lg:flex-row","lg:items-start","lg:justify-between"],[1,"min-w-0","flex-1"],[1,"mb-3","flex","flex-wrap","items-center","gap-2"],[1,"truncate","text-2xl","font-bold","text-slate-900"],[1,"inline-flex","items-center","gap-1","rounded-xl","border","px-2.5","py-1","text-xs","font-semibold","shadow-sm",3,"ngClass"],[1,"fa-solid","fa-circle","text-[6px]","opacity-80"],[1,"mb-3","flex","flex-wrap","items-center","gap-3","text-sm","text-slate-600"],[1,"inline-flex","items-center","gap-1"],[1,"fa-solid","fa-hashtag","text-blue-600"],[1,"text-slate-400"],[1,"fa-solid","fa-shapes","text-purple-600"],[1,"fa-solid","fa-layer-group","text-emerald-600"],[1,"fa-solid","fa-clock","text-amber-600"],[1,"text-sm","text-slate-700","line-clamp-2"],[1,"w-full","max-w-xs","flex-shrink-0"],[1,"group","relative"],[1,"relative","overflow-hidden","rounded-xl","border","border-slate-200","shadow-sm"],["alt","Portada del proyecto","class","h-40 w-full object-cover transition-transform duration-500",3,"src",4,"ngIf","ngIfElse"],[1,"mt-4","border-t","border-slate-200","pt-4"],[1,"flex","flex-wrap","gap-2"],[1,"inline-flex","items-center","gap-1","rounded-xl","border","border-indigo-200","bg-white","px-3","py-1.5","text-xs","font-semibold","text-indigo-700","shadow-sm","hover:border-indigo-300","hover:bg-indigo-50",3,"click"],[1,"inline-flex","items-center","gap-1","rounded-xl","bg-gradient-to-r","from-indigo-600","to-sky-600","px-3","py-1.5","text-xs","font-semibold","text-white","shadow-sm","hover:from-indigo-700","hover:to-sky-700",3,"routerLink"],[1,"fa-solid","fa-users"],["class","inline-flex items-center gap-1 rounded-xl border border-slate-300 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 shadow-sm hover:bg-slate-50",3,"click",4,"ngIf"],["class","inline-flex items-center gap-1 rounded-xl bg-gradient-to-r from-emerald-600 to-teal-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:from-emerald-700 hover:to-teal-700",3,"click",4,"ngIf"],[1,"inline-flex","items-center","gap-1","rounded-xl","border","border-slate-300","bg-white","px-3","py-1.5","text-xs","font-semibold","text-slate-700","shadow-sm","hover:bg-slate-50",3,"routerLink"],[1,"grid","grid-cols-5","gap-3"],[1,"relative","overflow-hidden","rounded-xl","border","border-slate-200","bg-white","p-4","text-center","shadow-sm"],[1,"text-xl","font-bold","text-slate-900"],[1,"text-xs","font-semibold","uppercase","tracking-wider","text-slate-500"],[1,"relative","overflow-hidden","rounded-xl","border","border-slate-200","bg-white","p-5","shadow-sm"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex","items-center","gap-2","text-lg","font-bold","text-slate-900"],[1,"fa-solid","fa-images","text-indigo-600"],[1,"mt-1","text-xs","text-slate-600"],[1,"fa-solid","fa-diagram-project","text-emerald-600"],[1,"fa-solid","fa-stairs","text-pink-600"],["alt","Portada del proyecto",1,"h-40","w-full","object-cover","transition-transform","duration-500",3,"src"],[1,"grid","h-40","w-full","place-items-center","rounded-xl","bg-gradient-to-br","from-slate-50","to-slate-100","text-slate-400"],[1,"fa-solid","fa-image","text-2xl"],[1,"inline-flex","items-center","gap-1","rounded-xl","border","border-slate-300","bg-white","px-3","py-1.5","text-xs","font-semibold","text-slate-700","shadow-sm","hover:bg-slate-50",3,"click"],[1,"fa-solid","fa-pen"],[1,"inline-flex","items-center","gap-1","rounded-xl","bg-gradient-to-r","from-emerald-600","to-teal-600","px-3","py-1.5","text-xs","font-semibold","text-white","shadow-sm","hover:from-emerald-700","hover:to-teal-700",3,"click"],[1,"fa-solid","fa-bullhorn"],[1,"fa-solid","fa-plus"],[1,"grid","grid-cols-3","gap-3","sm:grid-cols-4","md:grid-cols-5","lg:grid-cols-6"],["class","group relative",4,"ngFor","ngForOf","ngForTrackBy"],[1,"relative","overflow-hidden","rounded-lg","border","border-slate-200"],[1,"h-24","w-full","object-cover","transition-transform","duration-300","group-hover:scale-105",3,"src","alt"],[1,"absolute","left-1","top-1","rounded","border","border-white/30","bg-black/60","px-1.5","py-0.5","text-[10px]","font-semibold","text-white"],[1,"grid","place-items-center","rounded-xl","border-2","border-dashed","border-slate-300","bg-slate-50","py-8","text-center"],[1,"mb-2","grid","h-10","w-10","place-items-center","rounded-lg","bg-slate-100","text-slate-400"],[1,"fa-solid","fa-images"],[1,"text-sm","text-slate-500"],[1,"space-y-4"],["class","relative overflow-hidden rounded-xl border border-slate-200 bg-white p-4 shadow-sm",4,"ngFor","ngForOf","ngForTrackBy"],[1,"relative","overflow-hidden","rounded-xl","border","border-slate-200","bg-white","p-4","shadow-sm"],[1,"mb-3","flex","items-start","justify-between"],[1,"flex-1"],[1,"mb-2","flex","flex-wrap","items-center","gap-2"],[1,"text-base","font-bold","text-slate-900"],[1,"px-2","py-1","rounded-full","text-xs","font-semibold","border",3,"ngClass"],[1,"flex","flex-wrap","items-center","gap-2","text-xs","text-slate-600"],[1,"fa-solid","fa-tag","text-purple-600"],["class","text-slate-400",4,"ngIf"],["class","inline-flex items-center gap-1",4,"ngIf"],[1,"mt-2"],[1,"h-1.5","w-full","rounded","bg-slate-200"],[1,"h-1.5","rounded","bg-emerald-500"],[1,"mt-1","text-[11px]","text-slate-500"],["class","ml-2 inline-flex items-center gap-1 rounded-xl bg-gradient-to-r from-indigo-600 to-sky-600 px-2.5 py-1.5 text-xs font-semibold text-white shadow-sm hover:from-indigo-700 hover:to-sky-700",3,"click",4,"ngIf"],[1,"mt-3"],[1,"fa-solid","fa-calendar","text-emerald-600"],[1,"ml-2","inline-flex","items-center","gap-1","rounded-xl","bg-gradient-to-r","from-indigo-600","to-sky-600","px-2.5","py-1.5","text-xs","font-semibold","text-white","shadow-sm","hover:from-indigo-700","hover:to-sky-700",3,"click"],[1,"space-y-2"],["class","group/sesion cursor-pointer rounded-lg border border-slate-200 bg-slate-50/50 px-3 py-2 transition-colors hover:border-indigo-200",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group/sesion","cursor-pointer","rounded-lg","border","border-slate-200","bg-slate-50/50","px-3","py-2","transition-colors","hover:border-indigo-200",3,"click"],[1,"flex","items-center","justify-between","gap-2"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","gap-2","mb-1"],[1,"relative","inline-flex","h-2","w-2","rounded-full",3,"ngClass"],[1,"text-sm","font-semibold","text-slate-900","truncate"],[1,"text-xs","text-slate-600"],[1,"text-xs","text-amber-700"],[1,"flex","flex-wrap","items-center","gap-2","text-xs"],[1,"px-2","py-0.5","rounded-full","font-semibold","border",3,"ngClass"],[1,"rounded-full","bg-gradient-to-r","from-indigo-600","to-cyan-600","px-2","py-0.5","text-[10px]","font-bold","text-white"],[1,"flex","items-center","gap-1","ml-2",3,"click"],["title","Asistencias",1,"inline-flex","items-center","gap-1","rounded-lg","border","border-emerald-200","bg-white","px-2","py-1","text-xs","font-semibold","text-emerald-700","hover:border-emerald-300","hover:bg-emerald-50",3,"routerLink"],[1,"fa-solid","fa-clipboard-check"],["type","button","title","Descargar CSV",1,"inline-flex","items-center","gap-1","rounded-lg","border","border-indigo-200","bg-white","px-2","py-1","text-xs","font-semibold","text-indigo-700","hover:border-indigo-300","hover:bg-indigo-50","disabled:opacity-50",3,"click","disabled"],[1,"fa-solid",3,"ngClass"],["class","inline-flex items-center gap-1 rounded-lg border border-slate-300 bg-white px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50","title","Editar sesi\xF3n",3,"click",4,"ngIf"],["class","mt-2 grid grid-cols-1 gap-2 text-xs text-slate-600",4,"ngIf"],[1,"text-slate-500"],["class","rounded-full border border-pink-200 bg-pink-50 px-2 py-0.5 text-[10px] font-semibold text-pink-700",4,"ngFor","ngForOf","ngForTrackBy"],[1,"rounded-full","border","border-pink-200","bg-pink-50","px-2","py-0.5","text-[10px]","font-semibold","text-pink-700"],["title","Editar sesi\xF3n",1,"inline-flex","items-center","gap-1","rounded-lg","border","border-slate-300","bg-white","px-2","py-1","text-xs","font-semibold","text-slate-700","hover:bg-slate-50",3,"click"],[1,"mt-2","grid","grid-cols-1","gap-2","text-xs","text-slate-600"],[1,"inline-flex","flex-wrap","items-center","gap-2"],[1,"font-semibold","text-slate-700"],["class","inline-flex items-center gap-1 text-[10px] text-slate-500",4,"ngIf"],[1,"fa-solid","fa-location-dot","text-slate-500"],[1,"fa-solid","fa-link","text-slate-500"],["target","_blank","rel","noopener",1,"underline",3,"href"],[1,"fa-solid","fa-note-sticky","text-slate-500"],[1,"text-[10px]","text-slate-400"],[1,"inline-flex","items-center","gap-1","text-[10px]","text-slate-500"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"grid","place-items-center","rounded-lg","border","border-dashed","border-slate-300","bg-slate-50","py-4","text-center"],[1,"text-xs","text-slate-500"],["aria-live","polite","role","status",1,"fixed","bottom-4","right-4","z-50"],[1,"flex","items-center","gap-2","rounded-xl","border","border-slate-700","bg-slate-900","px-3","py-2","text-white","shadow-lg","text-sm"],[1,"font-semibold"],["aria-label","Cerrar aviso",1,"rounded-full","p-1","hover:bg-white/10",3,"click"],[1,"fa-solid","fa-xmark","text-xs"],[3,"saved","closed","proyectoId","initial"],[3,"saved","closed","procesoId","initial"],[3,"saved","closed","sesionId","initial"]],template:function(e,o){if(e&1&&(n(0,"div",7)(1,"div",8),p(2,Fe,8,0,"ng-container",9)(3,ut,3,2,"ng-template",null,0,A)(5,ft,7,2,"div",10)(6,xt,1,2,"app-proyecto-edit-modal",11)(7,vt,1,2,"app-proceso-edit-modal",12)(8,bt,1,2,"app-sesion-edit-modal",13),i()()),e&2){let s=k(4);l(2),c("ngIf",o.loading())("ngIfElse",s),l(3),c("ngIf",o.toastMsg()),l(),c("ngIf",o.proyectoEditOpen()&&o.proyecto()),l(),c("ngIf",o.procesoEditing()),l(),c("ngIf",o.sesionEditing())}},dependencies:[D,fe,xe,M,ye,ne,oe,re,ve],encapsulation:2});var Ce=X;export{Ce as ProyectoViewPage};
