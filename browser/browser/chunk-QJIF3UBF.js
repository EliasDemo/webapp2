import{a as se}from"./chunk-JGZAIOON.js";import{a as Y}from"./chunk-OKPZKVFZ.js";import{a as N}from"./chunk-3JNG56IY.js";import{A as oe,B as le,b as W,c as g,d as J,e as K,i as Q,j as X,k as Z,n as $,q as ee,r as te,s as ne,t as ie,y as re,z as ae}from"./chunk-J2XPQYKK.js";import"./chunk-LWNR2F3M.js";import{d as U,f as H}from"./chunk-5VQTM22E.js";import{k as B,p as q,u as z}from"./chunk-FE5WSVYG.js";import{$ as T,$a as t,Ab as O,Bb as F,Cb as L,Fb as V,Ka as D,Kb as G,Lb as j,Ob as C,Pa as p,T as E,Y as _,Z as S,_ as P,_a as m,ab as e,bb as d,ca as k,eb as x,fb as b,gb as I,kb as f,mb as c,n as w,rb as y,tb as R,vb as n,wb as v,xb as h,ya as l,yb as A}from"./chunk-63T4HJ2B.js";import"./chunk-IMPBB4AK.js";var me=()=>({standalone:!0});function ce(o,r){if(o&1&&(t(0,"div",31),P(),t(1,"svg",32),d(2,"path",33),e(),T(),t(3,"span"),n(4),e()()),o&2){let i=c();l(4),v(i.errorMsg)}}function ue(o,r){if(o&1&&(t(0,"div",34),P(),t(1,"svg",32),d(2,"path",35),e(),T(),t(3,"span"),n(4),e()()),o&2){let i=c();l(4),v(i.successMsg)}}function pe(o,r){if(o&1){let i=I();t(0,"button",25),f("click",function(){_(i);let s=c();return S(s.changeTab("delegate"))}),d(1,"span",36),n(2," Delegar encargado interino "),e()}if(o&2){let i=c();R("bg-white",i.selectedTab==="delegate")("text-emerald-700",i.selectedTab==="delegate")("border-emerald-500",i.selectedTab==="delegate")}}function ge(o,r){o&1&&(x(0),n(1," Buscar "),b())}function fe(o,r){o&1&&(t(0,"span",57),d(1,"span",58),n(2," Buscando... "),e())}function xe(o,r){if(o&1&&(t(0,"div",65),n(1," Roles: "),t(2,"span",66),n(3),e()()),o&2){let i=c(2).ngIf;l(3),h(" ",i.user.roles.join(", ")," ")}}function be(o,r){if(o&1&&(t(0,"div",67)(1,"div",68),n(2," Expediente en esta EP-Sede "),e(),t(3,"div"),n(4,"Rol: "),t(5,"span",62),n(6),e()(),t(7,"div"),n(8,"Estado: "),t(9,"span",62),n(10),e()(),t(11,"div"),n(12," Correo institucional: "),t(13,"span",66),n(14),e()(),t(15,"div"),n(16," Vigente desde: "),t(17,"span",62),n(18),e()()()),o&2){let i=c(2).ngIf;l(6),v(i.expediente.rol),l(4),v(i.expediente.estado),l(4),v(i.expediente.correo_institucional||"\u2014"),l(4),v(i.expediente.vigente_desde||"\u2014")}}function he(o,r){if(o&1&&(x(0),t(1,"div",59)(2,"div",60),n(3),e(),t(4,"div",52),n(5," Usuario: "),t(6,"span",61),n(7),e()(),t(8,"div",52),n(9," Correo: "),t(10,"span"),n(11),e()(),t(12,"div",52),n(13," Estado: "),t(14,"span",62),n(15),e()(),p(16,xe,4,1,"div",63),e(),p(17,be,19,4,"div",64),b()),o&2){let i=c().ngIf;l(3),A(" ",i.user.last_name," ",i.user.first_name," "),l(4),h(" ",i.user.username," "),l(4),v(i.user.email||i.email),l(4),v(i.user.status),l(),m("ngIf",i.user.roles==null?null:i.user.roles.length),l(),m("ngIf",i.expediente)}}function _e(o,r){o&1&&(t(0,"div",69),n(1," No se encontr\xF3 ning\xFAn usuario ni expediente con ese correo. Puedes crear un nuevo perfil acad\xE9mico en la pesta\xF1a "),t(2,"span",70),n(3,'"Crear nuevo perfil"'),e(),n(4,". "),e())}function Se(o,r){if(o&1&&(x(0),p(1,he,18,7,"ng-container",46)(2,_e,5,0,"ng-template",null,3,C),b()),o&2){let i=r.ngIf,a=y(3);l(),m("ngIf",i.user)("ngIfElse",a)}}function ve(o,r){o&1&&(t(0,"div",71),n(1," Ingresa un correo y haz clic en "),t(2,"span",62),n(3,"\u201CBuscar\u201D"),e(),n(4," para verificar si el perfil ya existe. "),e())}function Ee(o,r){if(o&1&&(x(0),n(1),b()),o&2){let i=c(2);l(),h(" Asignar como ",i.roleLabel," ")}}function ye(o,r){o&1&&(t(0,"span",57),d(1,"span",58),n(2," Guardando... "),e())}function Ce(o,r){if(o&1){let i=I();x(0),t(1,"div",37)(2,"div",38)(3,"div")(4,"h2",39),n(5," Buscar por correo y asignar "),e(),t(6,"p",40),n(7),e()(),t(8,"form",41),f("ngSubmit",function(){_(i);let s=c();return S(s.onBuscarPorCorreo())}),t(9,"div",42)(10,"div",43),d(11,"input",44),e(),t(12,"button",45),p(13,ge,2,0,"ng-container",46)(14,fe,3,0,"ng-template",null,0,C),e()(),t(16,"p",19),n(17," Este paso ayuda a evitar duplicados de usuario en el sistema. "),e()(),t(18,"div",47),p(19,Se,4,2,"ng-container",46)(20,ve,5,0,"ng-template",null,1,C),e()(),t(22,"div",48)(23,"h3",39),n(24," Confirmar asignaci\xF3n "),e(),t(25,"p",49),n(26," Completa los datos de vigencia y motivo antes de guardar. La asignaci\xF3n reemplazar\xE1 al titular actual de este rol en la EP-Sede. "),e(),t(27,"form",50),f("ngSubmit",function(){_(i);let s=c();return S(s.onAsignarDesdeLookup())}),t(28,"div",51)(29,"label",52),n(30,"Vigente desde"),e(),d(31,"input",53),e(),t(32,"div",51)(33,"label",52),n(34,"Motivo (opcional)"),e(),d(35,"textarea",54),e(),t(36,"div",55)(37,"button",56),p(38,Ee,2,1,"ng-container",46)(39,ye,3,0,"ng-template",null,2,C),e()()()()(),b()}if(o&2){let i=y(15),a=y(21),s=y(40),u=c();l(7),h(" Ingresa el correo institucional o personal del docente/encargado para localizar un perfil existente y asignarlo a esta EP-Sede como ",u.roleLabel.toLowerCase(),". "),l(),m("formGroup",u.searchForm),l(4),m("disabled",u.loadingLookup||u.searchForm.invalid||!u.epSedeId),l(),m("ngIf",!u.loadingLookup)("ngIfElse",i),l(6),m("ngIf",u.lookup)("ngIfElse",a),l(8),m("formGroup",u.assignForm),l(10),m("disabled",u.loadingAssign||!u.tieneUsuarioEncontrado),l(),m("ngIf",!u.loadingAssign)("ngIfElse",s)}}function we(o,r){if(o&1&&(x(0),n(1),b()),o&2){let i=c(2);l(),h(" Crear y asignar ",i.roleLabel," ")}}function Me(o,r){o&1&&(t(0,"span",57),d(1,"span",58),n(2," Guardando... "),e())}function Ie(o,r){if(o&1){let i=I();x(0),t(1,"div",72)(2,"div",73)(3,"div")(4,"h2",39),n(5," Crear nuevo perfil acad\xE9mico y asignar "),e(),t(6,"p",74),n(7),e()(),t(8,"div",75)(9,"div",76),n(10," Rol Spatie "),e(),t(11,"input",77),L("ngModelChange",function(s){_(i);let u=c();return F(u.spatieRole,s)||(u.spatieRole=s),S(s)}),e(),t(12,"div",78),n(13," Ej: COORDINADOR, ENCARGADO, ENCARGADO_PROYECTOS... "),e()()(),t(14,"form",79),f("ngSubmit",function(){_(i);let s=c();return S(s.onCrearYAsignar())}),t(15,"div",51)(16,"label",52),n(17,"Username *"),e(),d(18,"input",80),e(),t(19,"div",51)(20,"label",52),n(21,"Correo *"),e(),d(22,"input",81),e(),t(23,"div",51)(24,"label",52),n(25,"Nombres *"),e(),d(26,"input",82),e(),t(27,"div",51)(28,"label",52),n(29,"Apellidos *"),e(),d(30,"input",83),e(),t(31,"div",51)(32,"label",52),n(33,"Tipo de documento"),e(),t(34,"select",84)(35,"option",85),n(36,"\u2014"),e(),t(37,"option",86),n(38,"DNI"),e(),t(39,"option",87),n(40,"CE"),e(),t(41,"option",88),n(42,"PASAPORTE"),e(),t(43,"option",89),n(44,"OTRO"),e()()(),t(45,"div",51)(46,"label",52),n(47,"N\xB0 documento"),e(),d(48,"input",90),e(),t(49,"div",51)(50,"label",52),n(51,"Celular"),e(),d(52,"input",91),e(),t(53,"div",51)(54,"label",52),n(55,"Pa\xEDs (ISO-2)"),e(),d(56,"input",92),e(),t(57,"div",51)(58,"label",52),n(59,"Vigente desde"),e(),d(60,"input",93),e(),t(61,"div",51)(62,"label",52),n(63,"Correo institucional (opcional)"),e(),d(64,"input",94),e(),t(65,"div",95)(66,"label",52),n(67,"Motivo"),e(),d(68,"textarea",96),e(),t(69,"div",97)(70,"button",98),f("click",function(){_(i);let s=c();return S(s.onResetCreateForm())}),n(71," Limpiar "),e(),t(72,"button",99),p(73,we,2,1,"ng-container",46)(74,Me,3,0,"ng-template",null,4,C),e()()()(),b()}if(o&2){let i=y(75),a=c();l(7),h(" \xDAsalo solo si est\xE1s seguro de que el usuario no existe a\xFAn en el sistema. Se crear\xE1 un usuario activo y su expediente acad\xE9mico como ",a.roleLabel.toLowerCase()," de esta EP-Sede. "),l(4),O("ngModel",a.spatieRole),m("ngModelOptions",V(7,me)),l(3),m("formGroup",a.createForm),l(58),m("disabled",a.loadingCreate||!a.epSedeId),l(),m("ngIf",!a.loadingCreate)("ngIfElse",i)}}function Pe(o,r){o&1&&(x(0),n(1," Registrar delegaci\xF3n "),b())}function Te(o,r){o&1&&(t(0,"span",57),d(1,"span",58),n(2," Guardando... "),e())}function Re(o,r){if(o&1){let i=I();x(0),t(1,"div",72)(2,"div",100)(3,"div")(4,"h2",39),n(5," Delegar encargado interino "),e(),t(6,"p",74),n(7," Registra un encargado interino para esta EP-Sede, con una fecha de t\xE9rmino definida. El sistema actualiza el expediente acad\xE9mico del nuevo encargado y registra el movimiento en el historial. "),e()(),t(8,"div",101)(9,"strong",70),n(10,"Nota:"),e(),n(11," la delegaci\xF3n aplica solo al rol de ENCARGADO. El COORDINADOR titular no se ve afectado. "),e()(),t(12,"form",79),f("ngSubmit",function(){_(i);let s=c();return S(s.onDelegarEncargado())}),t(13,"div",102)(14,"label",52),n(15,"ID de usuario a delegar *"),e(),d(16,"input",103),t(17,"p",19),n(18,' Puedes localizar el ID del usuario desde la pesta\xF1a "Asignar usuario existente" usando el correo. '),e()(),t(19,"div",51)(20,"label",52),n(21,"Desde *"),e(),d(22,"input",104),e(),t(23,"div",51)(24,"label",52),n(25,"Hasta *"),e(),d(26,"input",105),e(),t(27,"div",95)(28,"label",52),n(29,"Motivo (opcional)"),e(),d(30,"textarea",106),e(),t(31,"div",97)(32,"button",98),f("click",function(){_(i);let s=c();return S(s.changeTab("existing"))}),n(33," Cancelar "),e(),t(34,"button",107),p(35,Pe,2,0,"ng-container",46)(36,Te,3,0,"ng-template",null,5,C),e()()()(),b()}if(o&2){let i=y(37),a=c();l(12),m("formGroup",a.delegateForm),l(22),m("disabled",a.loadingDelegate||!a.epSedeId),l(),m("ngIf",!a.loadingDelegate)("ngIfElse",i)}}var M=class M{constructor(){this.api=E(se);this.route=E(U);this.router=E(H);this.fb=E(ae);this.loader=E(Y);this.destroyRef=E(k);this.epSedeId=null;this.role="COORDINADOR";this.spatieRole="COORDINADOR";this.context=null;this.contextLoading=!1;this.routeReady=!1;this.loadingLookup=!1;this.loadingAssign=!1;this.loadingCreate=!1;this.loadingDelegate=!1;this.errorMsg=null;this.successMsg=null;this.lookup=null;this.selectedTab="existing";let r=new Date().toISOString().slice(0,10);this.searchForm=this.fb.group({email:["",[g.required,g.email]]}),this.assignForm=this.fb.group({vigente_desde:[r],motivo:[""]}),this.createForm=this.fb.group({username:["",g.required],first_name:["",g.required],last_name:["",g.required],email:["",[g.required,g.email]],doc_tipo:[""],doc_numero:["",g.required],celular:[""],pais:[""],vigente_desde:[r],motivo:[""],correo_institucional:[""]}),this.delegateForm=this.fb.group({user_id:["",g.required],desde:[r,g.required],hasta:["",g.required],motivo:[""]})}get roleLabel(){return this.role==="COORDINADOR"?"Coordinador":"Encargado"}get isEncargado(){return this.role==="ENCARGADO"}get canManageCoordinador(){return!!this.context?.can_manage_coordinador}get canManageEncargado(){return!!this.context?.can_manage_encargado}ngOnInit(){this.route.paramMap.pipe(N(this.destroyRef)).subscribe(r=>{let i=r.get("epSedeId"),a=(r.get("role")||"").toUpperCase(),s=i?Number(i):NaN;this.epSedeId=Number.isFinite(s)&&s>0?s:null,this.role=a==="ENCARGADO"?"ENCARGADO":"COORDINADOR",this.spatieRole=this.role,this.errorMsg=null,this.successMsg=null,this.lookup=null,this.routeReady=!0,this.context&&this.validatePermissions()}),this.route.queryParamMap.pipe(N(this.destroyRef)).subscribe(r=>{(r.get("mode")||"").toLowerCase()==="delegate"&&this.isEncargado?this.selectedTab="delegate":this.selectedTab="existing"}),this.loadContext()}async loadContext(){this.contextLoading=!0,this.loader.show("Cargando contexto de staff...");try{let r=await w(this.api.obtenerContextoPanel());r.ok?this.context=r.data:(this.context=null,this.errorMsg=r.message||"No se pudo obtener el contexto de staff.")}catch(r){console.error(r),this.context=null,this.errorMsg=r?.message||"No se pudo obtener el contexto de staff."}finally{this.contextLoading=!1,this.loader.hide(),this.routeReady&&this.validatePermissions()}}validatePermissions(){if(this.context){if(this.role==="COORDINADOR"&&!this.canManageCoordinador){this.errorMsg="No est\xE1s autorizado para gestionar coordinadores.",this.volverALaEpSede();return}if(this.role==="ENCARGADO"&&!this.canManageEncargado){this.errorMsg="No est\xE1s autorizado para gestionar encargados.",this.volverALaEpSede();return}}}volverALaEpSede(){this.epSedeId?this.router.navigate(["/staff/ep-sede",this.epSedeId]):this.router.navigate(["/staff/ep-sede"])}changeTab(r){r==="delegate"&&!this.isEncargado||(this.selectedTab=r,this.errorMsg=null,this.successMsg=null)}async onBuscarPorCorreo(){if(!this.epSedeId){this.errorMsg="EP-Sede inv\xE1lida en la URL.";return}if(this.searchForm.invalid){this.searchForm.markAllAsTouched();return}let r=(this.searchForm.value.email||"").trim();if(r){this.errorMsg=null,this.successMsg=null,this.lookup=null,this.loadingLookup=!0,this.loader.show("Buscando perfil por correo...");try{let i=await w(this.api.buscarPerfilPorCorreo(this.epSedeId,r));i.ok?(this.lookup=i.data,!this.lookup.user&&!this.lookup.expediente&&(this.successMsg="No se encontr\xF3 ning\xFAn usuario ni expediente con ese correo.")):this.errorMsg=i.message||"No se pudo buscar el perfil por correo."}catch(i){console.error(i),this.errorMsg=i?.message||"Error al buscar el perfil."}finally{this.loadingLookup=!1,this.loader.hide()}}}get tieneUsuarioEncontrado(){return!!this.lookup&&!!this.lookup.user}async onAsignarDesdeLookup(){if(!this.epSedeId){this.errorMsg="EP-Sede inv\xE1lida.";return}if(!this.lookup||!this.lookup.user){this.errorMsg="Primero busca y selecciona un perfil v\xE1lido.";return}let{vigente_desde:r,motivo:i}=this.assignForm.value,a={role:this.role,user_id:this.lookup.user.id,vigente_desde:r||void 0,exclusive:!0,motivo:i||void 0};this.errorMsg=null,this.successMsg=null,this.loadingAssign=!0,this.loader.show("Asignando staff...");try{let s=await w(this.api.asignarStaff(this.epSedeId,a));s.ok?(this.successMsg="Asignaci\xF3n realizada correctamente.",await this.router.navigate(["/staff/ep-sede",this.epSedeId])):this.errorMsg=s.message||"No se pudo asignar el staff."}catch(s){console.error(s),this.errorMsg=s?.message||"Error al asignar el staff."}finally{this.loadingAssign=!1,this.loader.hide()}}async onCrearYAsignar(){if(!this.epSedeId){this.errorMsg="EP-Sede inv\xE1lida.";return}if(this.createForm.invalid){this.createForm.markAllAsTouched(),this.errorMsg="Completa los campos obligatorios del formulario.";return}let r=this.createForm.value,a={role:(this.spatieRole||"").trim().toUpperCase()||(this.role==="COORDINADOR"?"COORDINADOR":"ENCARGADO"),username:r.username,first_name:r.first_name,last_name:r.last_name,email:r.email,doc_tipo:r.doc_tipo||void 0,doc_numero:r.doc_numero||void 0,celular:r.celular||void 0,pais:r.pais||void 0,vigente_desde:r.vigente_desde||void 0,motivo:r.motivo||void 0,correo_institucional:r.correo_institucional||void 0};this.errorMsg=null,this.successMsg=null,this.loadingCreate=!0,this.loader.show("Creando usuario y asignando...");try{let s=await w(this.api.crearYAsignarStaff(this.epSedeId,a));s.ok?(this.successMsg="Usuario creado y asignado correctamente.",await this.router.navigate(["/staff/ep-sede",this.epSedeId])):this.errorMsg=s.message||"No se pudo crear y asignar el staff."}catch(s){console.error(s),this.errorMsg=s?.message||"Error al crear y asignar el staff."}finally{this.loadingCreate=!1,this.loader.hide()}}async onDelegarEncargado(){if(!this.epSedeId){this.errorMsg="EP-Sede inv\xE1lida.";return}if(!this.isEncargado){this.errorMsg="Solo se puede delegar el rol de Encargado.";return}if(this.delegateForm.invalid){this.delegateForm.markAllAsTouched(),this.errorMsg="Completa los campos obligatorios.";return}let r=this.delegateForm.value,i=Number(r.user_id);if(!Number.isFinite(i)||i<=0){this.errorMsg="ID de usuario inv\xE1lido.";return}let a={role:"ENCARGADO",user_id:i,desde:r.desde,hasta:r.hasta,motivo:r.motivo||void 0};this.errorMsg=null,this.successMsg=null,this.loadingDelegate=!0,this.loader.show("Registrando delegaci\xF3n...");try{let s=await w(this.api.delegarEncargadoInterino(this.epSedeId,a));s.ok?(this.successMsg="Delegaci\xF3n registrada correctamente.",await this.router.navigate(["/staff/ep-sede",this.epSedeId])):this.errorMsg=s.message||"No se pudo registrar la delegaci\xF3n."}catch(s){console.error(s),this.errorMsg=s?.message||"Error al delegar el encargado."}finally{this.loadingDelegate=!1,this.loader.hide()}}onResetCreateForm(){let r=new Date().toISOString().slice(0,10);this.createForm.reset({username:"",first_name:"",last_name:"",email:"",doc_tipo:"",doc_numero:"",celular:"",pais:"",vigente_desde:r,motivo:"",correo_institucional:""}),this.spatieRole=this.role,this.errorMsg=null,this.successMsg=null}};M.\u0275fac=function(i){return new(i||M)},M.\u0275cmp=D({type:M,selectors:[["app-ep-sede-staff-manage-page"]],decls:39,vars:25,consts:[["buscandoTpl",""],["sinBusquedaTpl",""],["asignandoTpl",""],["noUsuarioTpl",""],["creandoTpl",""],["delegandoTpl",""],[1,"min-h-screen","bg-gradient-to-br","from-slate-50","via-emerald-50/20","to-slate-50"],[1,"mx-auto","max-w-6xl","px-4","py-8"],[1,"mb-6","flex","flex-col","gap-4","sm:flex-row","sm:items-center","sm:justify-between"],[1,"flex","items-start","gap-3"],["type","button",1,"mt-1","inline-flex","h-9","w-9","items-center","justify-center","rounded-full","border","border-slate-200","bg-white/80","text-slate-700","shadow-sm","hover:bg-white","hover:shadow","transition",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-[11px]","font-semibold","uppercase","tracking-wide","text-emerald-700"],[1,"mt-1","text-2xl","sm:text-3xl","font-bold","tracking-tight","text-slate-900"],[1,"mt-1","text-xs","text-slate-600","max-w-xl"],[1,"rounded-2xl","border","border-white/70","bg-white/90","px-4","py-3","shadow-sm","backdrop-blur-sm","text-right","space-y-1"],[1,"text-[11px]","uppercase","tracking-wide","text-slate-500"],[1,"inline-flex","items-center","rounded-full","bg-emerald-100","px-3","py-1","text-[11px]","font-semibold","text-emerald-800"],[1,"text-[11px]","text-slate-400"],[1,"font-mono","font-medium","text-slate-800"],["class","mb-4 flex gap-2 rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",4,"ngIf"],["class","mb-4 flex gap-2 rounded-xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",4,"ngIf"],[1,"mb-5","border-b","border-slate-100"],[1,"-mb-px","flex","flex-wrap","gap-2","text-xs","font-medium"],["type","button",1,"inline-flex","items-center","gap-1","rounded-t-lg","border","border-transparent","px-3","py-1.5","text-slate-600","hover:bg-white","hover:text-emerald-700",3,"click"],[1,"h-1.5","w-1.5","rounded-full","bg-emerald-500/70"],[1,"h-1.5","w-1.5","rounded-full","bg-sky-500/70"],["type","button","class","inline-flex items-center gap-1 rounded-t-lg border border-transparent px-3 py-1.5 text-slate-600 hover:bg-white hover:text-emerald-700",3,"bg-white","text-emerald-700","border-emerald-500","click",4,"ngIf"],[1,"rounded-2xl","border","border-white/70","bg-white/90","p-5","shadow-sm","backdrop-blur-sm"],[4,"ngIf"],[1,"mb-4","flex","gap-2","rounded-xl","border","border-red-200","bg-red-50","px-3","py-2","text-sm","text-red-700"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mb-4","flex","gap-2","rounded-xl","border","border-emerald-200","bg-emerald-50","px-3","py-2","text-sm","text-emerald-800"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"h-1.5","w-1.5","rounded-full","bg-amber-500/70"],[1,"grid","gap-5","lg:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)]"],[1,"space-y-4"],[1,"text-sm","font-semibold","text-slate-900"],[1,"mt-1","text-xs","text-slate-500"],[1,"space-y-2",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2","sm:flex-row"],[1,"flex-1"],["type","email","formControlName","email","placeholder","ej. docente@instituto.edu.pe",1,"w-full","rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","submit",1,"inline-flex","items-center","justify-center","gap-2","rounded-lg","bg-gradient-to-r","from-emerald-600","to-teal-600","px-4","py-2","text-xs","font-medium","text-white","shadow-sm","transition","hover:from-emerald-700","hover:to-teal-700","hover:shadow-md","disabled:cursor-not-allowed","disabled:opacity-60",3,"disabled"],[4,"ngIf","ngIfElse"],[1,"mt-3","min-h-[140px]","rounded-xl","border","border-slate-100","bg-slate-50/80","px-3","py-3"],[1,"space-y-3","border-t","border-slate-100","pt-4","lg:border-l","lg:border-t-0","lg:pl-5","lg:pt-0"],[1,"text-xs","text-slate-500"],[1,"space-y-3","text-sm",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-1"],[1,"text-xs","text-slate-600"],["type","date","formControlName","vigente_desde",1,"rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["formControlName","motivo","rows","3","placeholder","Ej. Encargo oficial del departamento, reemplazo temporal, etc.",1,"resize-none","rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],[1,"flex","justify-end"],["type","submit",1,"inline-flex","items-center","gap-2","rounded-lg","bg-slate-900","px-4","py-2","text-xs","font-medium","text-white","shadow-sm","transition","hover:bg-black","hover:shadow-md","disabled:cursor-not-allowed","disabled:opacity-60",3,"disabled"],[1,"inline-flex","items-center","gap-1"],[1,"h-4","w-4","animate-spin","rounded-full","border-2","border-white","border-t-transparent"],[1,"rounded-xl","border","border-emerald-100","bg-emerald-50/80","p-3","text-sm","space-y-1"],[1,"font-semibold","text-slate-900"],[1,"font-mono","text-[11px]","font-medium"],[1,"font-medium"],["class","text-[11px] text-slate-500",4,"ngIf"],["class","mt-2 space-y-1 rounded-xl border border-slate-100 bg-white p-3 text-[11px] text-slate-600",4,"ngIf"],[1,"text-[11px]","text-slate-500"],[1,"font-mono"],[1,"mt-2","space-y-1","rounded-xl","border","border-slate-100","bg-white","p-3","text-[11px]","text-slate-600"],[1,"font-semibold","text-slate-800","text-xs","mb-1"],[1,"rounded-xl","border","border-amber-200","bg-amber-50","px-3","py-2","text-xs","text-amber-800"],[1,"font-semibold"],[1,"text-xs","text-slate-400"],[1,"space-y-5"],[1,"flex","flex-col","gap-3","sm:flex-row","sm:items-start","sm:justify-between"],[1,"mt-1","text-xs","text-slate-500","max-w-xl"],[1,"text-right","space-y-1"],[1,"text-[11px]","uppercase","tracking-wide","text-slate-400"],["type","text","name","spatieRole",1,"w-40","rounded-lg","border","border-slate-200","px-2","py-1","text-[11px]","uppercase","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30",3,"ngModelChange","ngModel","ngModelOptions"],[1,"text-[10px]","text-slate-400"],[1,"grid","grid-cols-1","gap-3","text-sm","sm:grid-cols-2",3,"ngSubmit","formGroup"],["type","text","formControlName","username",1,"rounded-lg","border","border-slate-200","px-3","py-2","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","email","formControlName","email",1,"rounded-lg","border","border-slate-200","px-3","py-2","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","text","formControlName","first_name",1,"rounded-lg","border","border-slate-200","px-3","py-2","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","text","formControlName","last_name",1,"rounded-lg","border","border-slate-200","px-3","py-2","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["formControlName","doc_tipo",1,"rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["value",""],["value","DNI"],["value","CE"],["value","PASAPORTE"],["value","OTRO"],["type","text","formControlName","doc_numero",1,"rounded-lg","border","border-slate-200","px-3","py-2","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","text","formControlName","celular",1,"rounded-lg","border","border-slate-200","px-3","py-2","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","text","maxlength","2","formControlName","pais",1,"rounded-lg","border","border-slate-200","px-3","py-2","uppercase","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","date","formControlName","vigente_desde",1,"rounded-lg","border","border-slate-200","px-3","py-2","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","email","formControlName","correo_institucional",1,"rounded-lg","border","border-slate-200","px-3","py-2","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],[1,"sm:col-span-2","flex","flex-col","gap-1"],["formControlName","motivo","rows","2",1,"resize-none","rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],[1,"sm:col-span-2","mt-2","flex","justify-end","gap-2"],["type","button",1,"rounded-lg","border","border-slate-200","bg-white","px-4","py-2","text-xs","font-medium","text-slate-700","hover:bg-slate-50",3,"click"],["type","submit",1,"inline-flex","items-center","gap-2","rounded-lg","bg-gradient-to-r","from-emerald-600","to-teal-600","px-4","py-2","text-xs","font-medium","text-white","shadow-sm","transition","hover:from-emerald-700","hover:to-teal-700","hover:shadow-md","disabled:cursor-not-allowed","disabled:opacity-60",3,"disabled"],[1,"flex","flex-col","gap-2","sm:flex-row","sm:items-start","sm:justify-between"],[1,"rounded-xl","border","border-amber-100","bg-amber-50","px-3","py-2","text-[11px]","text-amber-800","max-w-xs"],[1,"flex","flex-col","gap-1","sm:col-span-2"],["type","number","formControlName","user_id","placeholder","Ej. 1023",1,"w-full","rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","date","formControlName","desde",1,"rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","date","formControlName","hasta",1,"rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["formControlName","motivo","rows","3","placeholder","Ej. Suplencia por licencia, encargo temporal del \xE1rea, etc.",1,"resize-none","rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30"],["type","submit",1,"inline-flex","items-center","gap-2","rounded-lg","bg-gradient-to-r","from-amber-600","to-emerald-600","px-4","py-2","text-xs","font-medium","text-white","shadow-sm","transition","hover:from-amber-700","hover:to-emerald-700","hover:shadow-md","disabled:cursor-not-allowed","disabled:opacity-60",3,"disabled"]],template:function(i,a){i&1&&(t(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"button",10),f("click",function(){return a.volverALaEpSede()}),P(),t(5,"svg",11),d(6,"path",12),e()(),T(),t(7,"div")(8,"div",13),n(9),e(),t(10,"h1",14),n(11),e(),t(12,"p",15),n(13," Puedes asignar un usuario existente, crear un nuevo perfil acad\xE9mico o, en el caso de encargados, registrar una delegaci\xF3n interina con fecha fin. "),e()()(),t(14,"div",16)(15,"div",17),n(16," Rol a asignar "),e(),t(17,"div",18),n(18),G(19,"uppercase"),e(),t(20,"div",19),n(21," EP-Sede: "),t(22,"span",20),n(23),e()()()(),p(24,ce,5,1,"div",21)(25,ue,5,1,"div",22),t(26,"div",23)(27,"nav",24)(28,"button",25),f("click",function(){return a.changeTab("existing")}),d(29,"span",26),n(30," Asignar usuario existente "),e(),t(31,"button",25),f("click",function(){return a.changeTab("new")}),d(32,"span",27),n(33," Crear nuevo perfil "),e(),p(34,pe,3,6,"button",28),e()(),t(35,"div",29),p(36,Ce,41,11,"ng-container",30)(37,Ie,76,8,"ng-container",30)(38,Re,38,4,"ng-container",30),e()()()),i&2&&(l(9),A(" Gesti\xF3n de ",a.roleLabel," \xB7 EP-Sede #",a.epSedeId??"\u2014"," "),l(2),h(" Configurar ",a.roleLabel.toLowerCase()," de la EP-Sede "),l(7),h(" ",j(19,23,a.roleLabel)," "),l(5),h("#",a.epSedeId??"\u2014"),l(),m("ngIf",a.errorMsg),l(),m("ngIf",a.successMsg),l(3),R("bg-white",a.selectedTab==="existing")("text-emerald-700",a.selectedTab==="existing")("border-emerald-500",a.selectedTab==="existing"),l(3),R("bg-white",a.selectedTab==="new")("text-emerald-700",a.selectedTab==="new")("border-emerald-500",a.selectedTab==="new"),l(3),m("ngIf",a.isEncargado),l(2),m("ngIf",a.selectedTab==="existing"),l(),m("ngIf",a.selectedTab==="new"),l(),m("ngIf",a.selectedTab==="delegate"))},dependencies:[z,B,le,X,ne,ie,W,Z,te,J,K,re,$,ee,oe,Q,q],encapsulation:2});var de=M;export{de as EpSedeStaffManagePage};
