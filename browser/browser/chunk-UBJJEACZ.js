import{a as le}from"./chunk-OKPZKVFZ.js";import{a as _e}from"./chunk-DFTIM2Z3.js";import{A as ue,b as se,d as de,i as pe,r as me,s as ce,t as ge}from"./chunk-J2XPQYKK.js";import"./chunk-LWNR2F3M.js";import{g as ae}from"./chunk-5VQTM22E.js";import{i as ee,j as te,k as ne,o as ie,s as oe,u as re}from"./chunk-FE5WSVYG.js";import{$ as u,$a as n,Gb as X,Hb as Z,Ka as J,Kb as f,Mb as b,Ob as F,Pa as x,T as $,Tb as K,Y as M,Z as C,_ as c,_a as d,ab as i,bb as p,eb as Q,fa as w,fb as U,gb as A,kb as E,mb as g,n as z,rb as B,sb as W,tb as q,vb as l,wb as I,xb as _,ya as a,yb as D}from"./chunk-63T4HJ2B.js";import{a as O,b as S}from"./chunk-IMPBB4AK.js";var ye=o=>({width:o}),Pe=(o,t)=>({"text-yellow-700 bg-yellow-50 px-1.5 py-0.5 rounded":o,"text-red-700 bg-red-50 px-1.5 py-0.5 rounded":t});function Me(o,t){if(o&1&&(n(0,"div",52),c(),n(1,"svg",53),p(2,"path",54),i(),u(),n(3,"span"),l(4),i()()),o&2){let e=g();a(4),I(e.errorMsg())}}function Ce(o,t){o&1&&(n(0,"span",100),l(1," Meta cumplida "),i())}function we(o,t){o&1&&p(0,"span",65)}function Ee(o,t){if(o&1&&(n(0,"span"),l(1),i()),o&2){let e=g().$implicit;a(),I(e.modalidad)}}function Oe(o,t){if(o&1&&(n(0,"div",101)(1,"div",102)(2,"div",103),l(3),f(4,"number"),i(),n(5,"div",104),l(6),i()(),n(7,"span",105),l(8),i()()),o&2){let e=t.$implicit;a(3),D(" ",e.fecha," \xB7 ",b(4,22,e.horas,"1.0-2")," h "),a(3),_(" ",e.actividad||"Sin descripci\xF3n"," "),a(),q("bg-emerald-50",e.estado==="APROBADO")("text-emerald-700",e.estado==="APROBADO")("border-emerald-100",e.estado==="APROBADO")("bg-yellow-50",e.estado==="PENDIENTE")("text-yellow-700",e.estado==="PENDIENTE")("border-yellow-100",e.estado==="PENDIENTE")("bg-red-50",e.estado!=="APROBADO"&&e.estado!=="PENDIENTE")("text-red-700",e.estado!=="APROBADO"&&e.estado!=="PENDIENTE")("border-red-100",e.estado!=="APROBADO"&&e.estado!=="PENDIENTE"),a(),_(" ",e.estado," ")}}function Se(o,t){if(o&1&&(n(0,"div",106),l(1),f(2,"number"),f(3,"number"),i()),o&2){let e=g().$implicit;a(),D(" meta: ",b(2,2,e.meta_horas,"1.0-2")," h requeridas \xB7 acumulado: ",b(3,5,e.total_horas??e.horas,"1.0-2")," h ")}}function ke(o,t){o&1&&(n(0,"div",106),l(1," sin meta definida (seguimiento libre de horas) "),i())}function He(o,t){if(o&1&&(n(0,"span",107),l(1),f(2,"number"),i()),o&2){let e=g().$implicit;a(),_(" ",b(2,1,e.total_horas,"1.0-2")," h acumuladas ")}}function Ie(o,t){if(o&1&&(n(0,"span",108),l(1),f(2,"number"),i()),o&2){let e=g().$implicit,r=g(4);d("ngClass",Z(5,Pe,e.estado!=="CERRADO"&&e.estado!=="CANCELADO",e.estado==="CERRADO"||e.estado==="CANCELADO")),a(),_(" faltan ",b(2,2,r.missingHours(e),"1.0-2")," h para la meta ")}}function Ve(o,t){if(o&1&&(n(0,"span",107),l(1),f(2,"number"),i()),o&2){let e=g().$implicit,r=g(4);a(),_(" extra ",b(2,1,r.extraHours(e),"1.0-2")," h ")}}function Te(o,t){if(o&1&&(n(0,"a",109),l(1," Ver detalles del proyecto "),c(),n(2,"svg",25),p(3,"path",110),i()()),o&2){let e=g().$implicit,r=g(4);d("routerLink",r.verProyectoUrl(e.id))}}function Ae(o,t){if(o&1&&(n(0,"div",75)(1,"div",76)(2,"div",77)(3,"div",78),l(4),i(),n(5,"span",79),l(6),i(),n(7,"span",80),l(8),i(),x(9,Ce,2,0,"span",81),i(),n(10,"div",82)(11,"span"),l(12),i(),x(13,we,1,0,"span",83)(14,Ee,2,1,"span",84),i(),n(15,"details",85)(16,"summary",86),c(),n(17,"svg",87),p(18,"path",40),i(),l(19),i(),u(),n(20,"div",88),x(21,Oe,9,25,"div",89),i()()(),n(22,"div",90)(23,"div",91),l(24),f(25,"number"),i(),x(26,Se,4,8,"div",92)(27,ke,2,0,"div",92),n(28,"div",93),p(29,"div",94),i(),n(30,"div",95)(31,"span",96),l(32),f(33,"number"),i(),x(34,He,3,4,"span",97)(35,Ie,3,8,"span",98)(36,Ve,3,4,"span",97),i(),x(37,Te,4,1,"a",99),i()()),o&2){let e=t.$implicit,r=g(4);a(4),D(" ",e.codigo?e.codigo+" \xB7 ":"","",e.titulo||e.tipo_label+" sin t\xEDtulo"," "),a(2),_(" ",e.tipo_label," "),a(),q("bg-red-100",e.estado==="CERRADO"||e.estado==="CANCELADO")("text-red-800",e.estado==="CERRADO"||e.estado==="CANCELADO")("bg-indigo-100",e.estado!=="CERRADO"&&e.estado!=="CANCELADO")("text-indigo-800",e.estado!=="CERRADO"&&e.estado!=="CANCELADO"),a(),_(" ",e.estado||"\u2014"," "),a(),d("ngIf",e.cumplido===!0),a(3),I(e.tipo_proyecto||e.tipo_label||"\u2014"),a(),d("ngIf",e.modalidad),a(),d("ngIf",e.modalidad),a(5),_(" Ver detalle de horas de este ",e.tipo_label.toLowerCase()," "),a(2),d("ngForOf",e.registros),a(3),_(" ",b(25,28,e.horas,"1.0-2")," h "),a(2),d("ngIf",r.hasPlan(e)),a(),d("ngIf",!r.hasPlan(e)),a(),d("ngClass",r.barBgClass(e)),a(),d("ngStyle",X(34,ye,(r.percentDone(e)>100?100:r.percentDone(e))+"%")),a(3),_(" ",b(33,31,e.horas,"1.0-2")," h en este per\xEDodo "),a(2),d("ngIf",e.total_horas!=null),a(),d("ngIf",r.hasPlan(e)&&r.missingHours(e)>0),a(),d("ngIf",r.hasExtra(e)),a(),d("ngIf",e.tipo==="vm_proyecto")}}function De(o,t){if(o&1){let e=A();n(0,"details",58)(1,"summary",59)(2,"div",7)(3,"div",60),c(),n(4,"svg",61),p(5,"path",26),i()(),u(),n(6,"div")(7,"div",49),l(8),i(),n(9,"div",62)(10,"span",63),c(),n(11,"svg",25),p(12,"path",64),i(),l(13),f(14,"number"),i(),u(),p(15,"span",65),n(16,"span",63),c(),n(17,"svg",25),p(18,"path",66),i(),l(19),i()()()(),u(),n(20,"div",67)(21,"div",68),l(22),f(23,"number"),i(),n(24,"button",69),E("click",function(s){let y=M(e).$implicit;return g(3).verPeriodo(y.periodo_id),C(s.preventDefault())}),c(),n(25,"svg",25),p(26,"path",70)(27,"path",71),i(),l(28," Ver per\xEDodo "),i()()(),u(),n(29,"div",72)(30,"div",73),x(31,Ae,38,36,"div",74),i()()()}if(o&2){let e=t.$implicit,r=t.index,s=g(3);W("animation-delay",r*100+"ms"),a(8),_(" ",e.codigo||"Sin per\xEDodo"," "),a(5),_(" ",b(14,9,e.horas,"1.0-2")," h "),a(6),_(" ",e.proyectos.length," proyectos / eventos "),a(3),_(" ",b(23,12,e.horas,"1.0-2")," h "),a(2),d("disabled",!e.periodo_id),a(7),d("ngForOf",e.proyectos)("ngForTrackBy",s.trackProyecto)}}function je(o,t){o&1&&(n(0,"span",115),c(),n(1,"svg",116),p(2,"path",117),i(),l(3," Cargar m\xE1s "),i())}function Re(o,t){o&1&&(n(0,"span",118),p(1,"span",119),l(2," Cargando\u2026 "),i())}function Ne(o,t){if(o&1){let e=A();n(0,"div",111)(1,"button",112),E("click",function(){M(e);let s=g(3);return C(s.loadMore())}),x(2,je,4,0,"span",113)(3,Re,3,0,"ng-template",null,2,F),i(),n(5,"p",114),l(6),i()()}if(o&2){let e,r=B(4),s=g(3);a(),d("disabled",s.loadingMore()),a(),d("ngIf",!s.loadingMore())("ngIfElse",r),a(4),D(" P\xE1gina ",(e=s.meta())==null?null:e.current_page," de ",(e=s.meta())==null?null:e.last_page," ")}}function Be(o,t){if(o&1&&(Q(0),n(1,"div",55),x(2,De,32,15,"details",56),i(),x(3,Ne,7,5,"div",57),U()),o&2){let e=g(2);a(2),d("ngForOf",e.periodGroups())("ngForTrackBy",e.trackPeriod),a(),d("ngIf",e.meta()&&e.meta().current_page<e.meta().last_page)}}function Fe(o,t){if(o&1&&(Q(0),x(1,Be,4,3,"ng-container",51),U()),o&2){let e=g(),r=B(84);a(),d("ngIf",e.periodGroups().length)("ngIfElse",r)}}function Le(o,t){o&1&&(n(0,"div",120)(1,"div",121),p(2,"div",122),n(3,"div",123),c(),n(4,"svg",9),p(5,"path",64),i()()(),u(),n(6,"p",124),l(7,"Cargando historial de horas..."),i()())}function Ge(o,t){if(o&1){let e=A();n(0,"div",125)(1,"div",126),c(),n(2,"svg",127),p(3,"path",64),i()(),u(),n(4,"h3",128),l(5,"No hay registros de horas"),i(),n(6,"p",129),l(7," No se encontraron registros de horas con los filtros actuales. Prueba ajustando los filtros o selecciona otro rango de fechas. "),i(),n(8,"button",130),E("click",function(){M(e);let s=g();return C(s.clearFilters())}),c(),n(9,"svg",25),p(10,"path",131),i(),l(11," Limpiar filtros "),i()()}}var V=class V{constructor(){this.api=$(_e);this.loader=$(le);this.loading=w(!0);this.loadingMore=w(!1);this.errorMsg=w(null);this.params=w({per_page:1e3,page:1,estado:""});this.resumen=w(null);this.historial=w([]);this.meta=w(null);this.periodGroups=w([]);this.totalHoras=K(()=>this.resumen()?.total_horas??0);this.totalMinutos=K(()=>this.resumen()?.total_minutos??0);this.trackPeriod=(t,e)=>`${e.periodo_id??"null"}`;this.trackProyecto=(t,e)=>`${e.tipo}|${e.id}`}ngOnInit(){this.reload()}async reload(){this.loading.set(!0),this.errorMsg.set(null),this.resumen.set(null),this.historial.set([]),this.periodGroups.set([]),this.meta.set(null),this.params.update(t=>S(O({},t),{page:1}));try{let t=await z(this.loader.track(this.api.obtenerMiReporteHoras(this.params()),"Cargando historial de horas..."));this.isOk(t)?this.onData(t):this.errorMsg.set(t.message||"Error al cargar el reporte")}catch(t){console.error(t),this.errorMsg.set("No se pudo cargar el historial")}finally{this.loading.set(!1)}}async loadMore(){let t=this.meta();if(!(!t||t.current_page>=t.last_page)){this.loadingMore.set(!0),this.errorMsg.set(null);try{let e=S(O({},this.params()),{page:t.current_page+1}),r=await z(this.api.obtenerMiReporteHoras(e));this.isOk(r)?(this.historial.update(s=>s.concat(r.data.historial||[])),this.meta.set(r.meta),this.recomputeGroups()):this.errorMsg.set(r.message||"Error al cargar m\xE1s")}catch(e){console.error(e),this.errorMsg.set("No se pudo cargar m\xE1s resultados")}finally{this.loadingMore.set(!1)}}}async applyFilters(){await this.reload()}async clearFilters(){this.params.set({per_page:1e3,page:1,estado:""}),await this.reload()}onFechaChange(t,e){this.params.update(r=>S(O({},r),{[t]:e||void 0}))}onEstadoChange(t){this.params.update(e=>S(O({},e),{estado:t}))}async verPeriodo(t){t&&(this.params.update(e=>S(O({},e),{periodo_id:t,page:1})),await this.reload())}verProyectoUrl(t){return["/vm/proyectos",t]}onData(t){this.resumen.set(t.data.resumen??null),this.meta.set(t.meta??null),this.historial.set(t.data.historial||[]),this.recomputeGroups()}recomputeGroups(){let t=this.historial()||[],e=this.resumen()?.por_vinculo??[],r=new Map;for(let m of e){let v=`${m.tipo}|${m.id}`;r.set(v,m)}let s=new Map;for(let m of t){let v=m.periodo?.id??null,T=m.periodo?.codigo??null,j=String(v??"null");s.has(j)||s.set(j,{periodo_id:v,codigo:T,minutos:0,horas:0,proyectos:[]});let R=s.get(j),N=m.minutos||0;R.minutos+=N;let h=m.vinculable;if(!h||h.id==null)continue;let k=h.tipo||"desconocido",he=`${k}|${h.id}`,H=r.get(he)||null,fe=H?.tipo_label??(k==="vm_proyecto"?"PROYECTO":k==="vm_evento"?"EVENTO":(k||"").toUpperCase()),L=H?.horas_requeridas??null,be=H?.minutos_requeridos??(L!=null?L*60:null),G=H?.minutos??null,ve=H?.horas??(G!=null?+(G/60).toFixed(2):null),Y=R.proyectos.findIndex(P=>P.id===h.id&&P.tipo===k);if(Y===-1){let P=+(N/60).toFixed(2);R.proyectos.push({id:h.id,tipo:k,tipo_label:fe,codigo:h.codigo??null,titulo:h.titulo??h.codigo??null,tipo_proyecto:h.tipo_proyecto??null,modalidad:h.modalidad??null,estado:h.estado??null,minutos:N,horas:P,total_minutos:G,total_horas:ve,meta_horas:L,meta_minutos:be,cumplido:H?.cumplido??null,registros:[m]})}else{let P=R.proyectos[Y];P.minutos+=N,P.horas=+(P.minutos/60).toFixed(2),P.registros.push(m)}}let y=Array.from(s.values()).map(m=>S(O({},m),{horas:+(m.minutos/60).toFixed(2),proyectos:m.proyectos.sort((v,T)=>T.minutos-v.minutos)}));y.sort((m,v)=>{if((m.codigo?1:0)!=(v.codigo?1:0))return(v.codigo?1:0)-(m.codigo?1:0);let T=m.codigo||"";return(v.codigo||"").localeCompare(T)}),this.periodGroups.set(y)}isOk(t){return t.ok===!0}hasPlan(t){return t.meta_horas!=null&&t.meta_horas>0}percentDone(t){if(!this.hasPlan(t))return 100;let e=t.meta_horas,s=(t.total_horas??t.horas)/e*100;return Math.max(0,Math.min(100,s))}missingHours(t){if(!this.hasPlan(t))return 0;let e=t.meta_horas,r=t.total_horas??t.horas;return Math.max(0,e-r)}hasExtra(t){return this.hasPlan(t)&&(t.total_horas??t.horas)>t.meta_horas}extraHours(t){if(!this.hasPlan(t))return 0;let e=t.meta_horas,r=t.total_horas??t.horas;return Math.max(0,r-e)}barBgClass(t){return!this.hasPlan(t)||!(this.missingHours(t)>0)?"bg-slate-100":t.estado==="CERRADO"||t.estado==="CANCELADO"?"bg-red-100":"bg-yellow-100"}};V.\u0275fac=function(e){return new(e||V)},V.\u0275cmp=J({type:V,selectors:[["app-history-page"]],decls:85,vars:12,consts:[["loadingTpl",""],["emptyTpl",""],["spinner",""],[1,"min-h-screen","bg-gradient-to-br","from-slate-50","to-emerald-50/30","py-8"],[1,"mx-auto","max-w-7xl","px-4"],[1,"mb-10","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-6"],[1,"space-y-3"],[1,"flex","items-center","gap-3"],[1,"p-2","bg-white/80","backdrop-blur-sm","rounded-xl","shadow-sm","border","border-white/60","shadow-emerald-100/50","transition-all","duration-300","hover:shadow-emerald-200/70","hover:scale-105"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-emerald-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10m-10 4h10M5 21h14a2 2 0 002-2v-9a2 2 0 00-2-2H5a2 2 0 00-2 2v9a2 2 0 002 2z"],[1,"text-4xl","font-bold","bg-gradient-to-r","from-gray-900","to-emerald-700","bg-clip-text","text-transparent"],[1,"text-gray-600","text-base","font-medium","flex","items-center","gap-2"],[1,"w-2","h-2","bg-gradient-to-r","from-emerald-500","to-teal-400","rounded-full","animate-pulse"],[1,"flex","gap-2"],["type","button",1,"p-2","rounded-lg","border","border-gray-200","bg-white/80","backdrop-blur-sm","hover:bg-white","transition-all","duration-300","hover:shadow-md"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["type","button",1,"px-4","py-2","rounded-lg","bg-white/80","backdrop-blur-sm","border","border-gray-200","hover:bg-white","transition-all","duration-300","hover:shadow-md","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-sm","font-medium"],[1,"bg-white/80","backdrop-blur-sm","rounded-xl","border","border-white/60","p-4","mb-6","grid","grid-cols-1","md:grid-cols-5","gap-3","shadow-sm","transition-all","duration-300","hover:shadow-md"],[1,"flex","flex-col"],[1,"text-sm","text-gray-600","mb-1","flex","items-center","gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["type","date",1,"border","rounded-lg","px-3","py-2","transition-all","duration-300","focus:ring-2","focus:ring-emerald-500/30","focus:border-emerald-500",3,"ngModelChange","ngModel"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"border","rounded-lg","px-3","py-2","transition-all","duration-300","focus:ring-2","focus:ring-emerald-500/30","focus:border-emerald-500",3,"ngModelChange","ngModel"],["value",""],["value","*"],["value","APROBADO"],["value","PENDIENTE"],["value","ANULADO"],[1,"flex","items-end","gap-2","md:col-span-2"],["type","button",1,"px-4","py-2","rounded-lg","bg-gradient-to-r","from-emerald-600","to-teal-600","text-white","hover:from-emerald-700","hover:to-teal-700","transition-all","duration-300","shadow-sm","hover:shadow-md","flex","items-center","gap-2","group",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","group-hover:scale-110","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"],["type","button",1,"px-4","py-2","rounded-lg","border","border-gray-300","bg-white","hover:bg-gray-50","transition-all","duration-300","hover:shadow-md","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"mb-6"],[1,"bg-gradient-to-r","from-white","to-emerald-50/50","rounded-2xl","border","border-white/60","p-6","flex","items-center","justify-between","shadow-sm","backdrop-blur-sm","transition-all","duration-500","hover:shadow-lg"],[1,"flex","items-baseline","gap-3"],[1,"text-5xl","font-extrabold","leading-none","bg-gradient-to-r","from-gray-900","to-emerald-700","bg-clip-text","text-transparent"],[1,"text-gray-500","font-medium"],[1,"flex","gap-3"],[1,"px-3","py-2","bg-white/80","backdrop-blur-sm","rounded-xl","border","border-white/60","transition-all","duration-300","hover:scale-105"],[1,"text-xs","uppercase","tracking-wide","text-gray-500"],[1,"font-semibold","text-gray-800"],["class","mb-6 p-4 rounded-xl bg-gradient-to-r from-red-50 to-red-100/50 text-red-700 border border-red-200 backdrop-blur-sm flex items-center gap-3",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"mb-6","p-4","rounded-xl","bg-gradient-to-r","from-red-50","to-red-100/50","text-red-700","border","border-red-200","backdrop-blur-sm","flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"space-y-4"],["class","bg-white/80 backdrop-blur-sm rounded-xl border border-white/60 overflow-hidden transition-all duration-500 hover:shadow-lg animate-fade-in",3,"animation-delay",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center mt-8",4,"ngIf"],[1,"bg-white/80","backdrop-blur-sm","rounded-xl","border","border-white/60","overflow-hidden","transition-all","duration-500","hover:shadow-lg","animate-fade-in"],[1,"cursor-pointer","select-none","p-4","flex","items-center","justify-between","hover:bg-white/50","transition-all","duration-300"],[1,"p-2","bg-emerald-100/50","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-emerald-600"],[1,"text-sm","text-gray-500","flex","items-center","gap-2","mt-1"],[1,"flex","items-center","gap-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-1","h-1","bg-gray-400","rounded-full"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"flex","items-center","gap-4"],[1,"text-emerald-700","font-bold","text-lg"],["type","button",1,"px-3","py-1.5","rounded-lg","border","border-gray-300","bg-white","hover:bg-gray-50","transition-all","duration-300","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"px-4","pb-4","border-t","border-gray-100","mt-2","pt-4"],[1,"divide-y","divide-gray-100/70"],["class","py-3 flex items-start justify-between group hover:bg-white/50 rounded-lg px-3 -mx-3 transition-all duration-300",4,"ngFor","ngForOf","ngForTrackBy"],[1,"py-3","flex","items-start","justify-between","group","hover:bg-white/50","rounded-lg","px-3","-mx-3","transition-all","duration-300"],[1,"pr-6","flex-1"],[1,"flex","items-center","gap-2","mb-1","flex-wrap"],[1,"font-semibold","text-gray-800","group-hover:text-gray-900","transition-colors","duration-300"],[1,"text-xs","px-2","py-0.5","rounded-full","font-medium","border","border-emerald-200","bg-emerald-50","text-emerald-700"],[1,"text-xs","px-2","py-0.5","rounded-full","font-medium","transition-all","duration-300"],["class","text-xs px-2 py-0.5 rounded-full font-semibold bg-emerald-100 text-emerald-800 border border-emerald-200",4,"ngIf"],[1,"text-sm","text-gray-500","flex","items-center","gap-2","flex-wrap"],["class","w-1 h-1 bg-gray-400 rounded-full",4,"ngIf"],[4,"ngIf"],[1,"mt-3","text-xs","text-gray-600"],[1,"cursor-pointer","select-none","flex","items-center","gap-2","text-gray-700","hover:text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],[1,"mt-2","space-y-1"],["class","flex items-start justify-between gap-3 border-b border-gray-100 last:border-b-0 pb-1",4,"ngFor","ngForOf"],[1,"text-right","shrink-0","w-72"],[1,"font-bold","text-lg","text-gray-800"],["class","text-xs text-gray-500 mt-1",4,"ngIf"],[1,"mt-2","h-2.5","w-full","rounded-full","overflow-hidden","border","border-white","shadow-inner",3,"ngClass"],[1,"h-full","bg-gradient-to-r","from-emerald-500","to-teal-400","transition-all","duration-1000","ease-out",3,"ngStyle"],[1,"mt-1","text-xs","flex","flex-wrap","justify-end","gap-1"],[1,"text-emerald-700","font-semibold","bg-emerald-50","px-1.5","py-0.5","rounded"],["class","text-teal-700 bg-teal-50 px-1.5 py-0.5 rounded",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","inline-block mt-2 text-sm text-emerald-700 hover:text-emerald-800 font-medium transition-all duration-300 hover:underline flex items-center gap-1 justify-end",3,"routerLink",4,"ngIf"],[1,"text-xs","px-2","py-0.5","rounded-full","font-semibold","bg-emerald-100","text-emerald-800","border","border-emerald-200"],[1,"flex","items-start","justify-between","gap-3","border-b","border-gray-100","last:border-b-0","pb-1"],[1,"flex-1"],[1,"font-medium","text-gray-700"],[1,"text-gray-500"],[1,"shrink-0","text-[11px]","px-2","py-0.5","rounded-full","border"],[1,"text-xs","text-gray-500","mt-1"],[1,"text-teal-700","bg-teal-50","px-1.5","py-0.5","rounded"],[3,"ngClass"],[1,"inline-block","mt-2","text-sm","text-emerald-700","hover:text-emerald-800","font-medium","transition-all","duration-300","hover:underline","flex","items-center","gap-1","justify-end",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14 5l7 7m0 0l-7 7m7-7H3"],[1,"text-center","mt-8"],["type","button",1,"px-6","py-3","rounded-xl","bg-gradient-to-r","from-slate-800","to-slate-700","text-white","hover:from-slate-900","hover:to-slate-800","disabled:opacity-60","transition-all","duration-300","shadow-md","hover:shadow-lg","flex","items-center","gap-2","mx-auto","group",3,"click","disabled"],["class","flex items-center gap-2",4,"ngIf","ngIfElse"],[1,"text-xs","text-gray-500","mt-2"],[1,"flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","group-hover:translate-y-0.5","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 14l-7 7m0 0l-7-7m7 7V3"],[1,"inline-flex","items-center","gap-2"],[1,"animate-spin","h-4","w-4","border-2","border-white","border-t-transparent","rounded-full"],[1,"flex","flex-col","justify-center","items-center","py-20","bg-white/80","backdrop-blur-sm","rounded-2xl","border","border-white/60"],[1,"relative"],[1,"animate-spin","rounded-full","h-16","w-16","border-b-2","border-emerald-600"],[1,"absolute","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2"],[1,"mt-4","text-gray-600","font-medium"],[1,"text-center","py-20","bg-white/80","backdrop-blur-sm","rounded-2xl","shadow-sm","border","border-white/60","transition-all","duration-500","hover:shadow-md"],[1,"w-20","h-20","mx-auto","mb-6","rounded-full","bg-gradient-to-r","from-emerald-100","to-teal-100","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-emerald-500"],[1,"text-xl","font-semibold","mb-2","text-gray-800"],[1,"text-gray-600","mb-6","max-w-md","mx-auto"],["type","button",1,"px-6","py-2.5","rounded-lg","bg-gradient-to-r","from-emerald-600","to-teal-600","text-white","hover:from-emerald-700","hover:to-teal-700","transition-all","duration-300","shadow-sm","hover:shadow-md","inline-flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"]],template:function(e,r){if(e&1){let s=A();n(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8),c(),n(6,"svg",9),p(7,"path",10),i()(),u(),n(8,"h1",11),l(9," Historial de horas "),i()(),n(10,"p",12),p(11,"span",13),l(12," Reporte de vinculaci\xF3n por per\xEDodos, proyectos y eventos "),i()(),n(13,"div",14)(14,"button",15),c(),n(15,"svg",16),p(16,"path",17),i()(),u(),n(17,"button",18),c(),n(18,"svg",19),p(19,"path",20),i(),u(),n(20,"span",21),l(21,"Exportar"),i()()()(),n(22,"div",22)(23,"div",23)(24,"label",24),c(),n(25,"svg",25),p(26,"path",26),i(),l(27," Desde "),i(),u(),n(28,"input",27),E("ngModelChange",function(m){return M(s),C(r.onFechaChange("desde",m))}),i()(),n(29,"div",23)(30,"label",24),c(),n(31,"svg",25),p(32,"path",26),i(),l(33," Hasta "),i(),u(),n(34,"input",27),E("ngModelChange",function(m){return M(s),C(r.onFechaChange("hasta",m))}),i()(),n(35,"div",23)(36,"label",24),c(),n(37,"svg",25),p(38,"path",28),i(),l(39," Estado "),i(),u(),n(40,"select",29),E("ngModelChange",function(m){return M(s),C(r.onEstadoChange(m))}),n(41,"option",30),l(42,"Aprobados (por defecto)"),i(),n(43,"option",31),l(44,"Todos"),i(),n(45,"option",32),l(46,"Aprobado"),i(),n(47,"option",33),l(48,"Pendiente"),i(),n(49,"option",34),l(50,"Anulado"),i()()(),n(51,"div",35)(52,"button",36),E("click",function(){return M(s),C(r.applyFilters())}),c(),n(53,"svg",37),p(54,"path",38),i(),l(55," Aplicar filtros "),i(),u(),n(56,"button",39),E("click",function(){return M(s),C(r.clearFilters())}),c(),n(57,"svg",25),p(58,"path",40),i(),l(59," Limpiar "),i()()(),u(),n(60,"div",41)(61,"div",42)(62,"div",43)(63,"div",44),l(64),f(65,"number"),i(),n(66,"div",45),l(67,"horas acumuladas"),i()(),n(68,"div",46)(69,"div",47)(70,"div",48),l(71,"Minutos"),i(),n(72,"div",49),l(73),i()(),n(74,"div",47)(75,"div",48),l(76,"Per\xEDodos"),i(),n(77,"div",49),l(78),i()()()()(),x(79,Me,5,1,"div",50)(80,Fe,2,2,"ng-container",51)(81,Le,8,0,"ng-template",null,0,F)(83,Ge,12,0,"ng-template",null,1,F),i()()}if(e&2){let s=B(82);a(28),d("ngModel",r.params().desde??""),a(6),d("ngModel",r.params().hasta??""),a(6),d("ngModel",r.params().estado??""),a(24),_(" ",b(65,9,r.totalHoras(),"1.0-2")," "),a(9),I(r.totalMinutos()),a(5),I(r.periodGroups().length),a(),d("ngIf",r.errorMsg()),a(),d("ngIf",!r.loading())("ngIfElse",s)}},dependencies:[re,ee,te,ne,ie,ue,ce,ge,se,me,de,pe,ae,oe],styles:[".history-page[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px}.history-page[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]{border-radius:18px}.history-page[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   .total-hrs[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:12px}.history-page[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   .total-hrs[_ngcontent-%COMP%]   .big[_ngcontent-%COMP%]{font-size:48px;font-weight:800;line-height:1}.history-page[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   .total-hrs[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;opacity:.7}.history-page[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px}.history-page[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{background:var(--ion-color-light, #f3f4f6);border-radius:12px;padding:8px 12px;display:inline-flex;align-items:baseline;gap:8px}.history-page[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]   .n[_ngcontent-%COMP%]{font-weight:700}.history-page[_ngcontent-%COMP%]   .total-card[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]   .t[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.history-page[_ngcontent-%COMP%]   .period-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;gap:8px}.history-page[_ngcontent-%COMP%]   .period-title[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{font-weight:700}.history-page[_ngcontent-%COMP%]   .period-title[_ngcontent-%COMP%]   .hrs[_ngcontent-%COMP%]{font-size:14px;opacity:.8}.history-page[_ngcontent-%COMP%]   .period-sub[_ngcontent-%COMP%]{font-size:12px;opacity:.7;margin-top:4px}.history-page[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .proj-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.history-page[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .proj-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600}.history-page[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .proj-title[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:11px;padding:2px 6px;border-radius:999px;background:#eef2ff;color:#4338ca}.history-page[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .proj-title[_ngcontent-%COMP%]   .badge.closed[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.history-page[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .proj-sub[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%]{opacity:.75;font-size:12px}.history-page[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .proj-sub[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{padding:0 6px;opacity:.4}.history-page[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .proj-hours[_ngcontent-%COMP%]{text-align:right}.history-page[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .proj-hours[_ngcontent-%COMP%]   .h[_ngcontent-%COMP%]{font-weight:700}.history-page[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .proj-hours[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.history-page[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:8px}.history-page[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:6px 0}.history-page[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.7;margin:0}"]});var xe=V;export{xe as HistoryPage};
