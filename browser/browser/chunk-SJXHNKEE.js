import{a as b}from"./chunk-LWNR2F3M.js";import{B as l,C as g}from"./chunk-FE5WSVYG.js";import{O as h,S as m,o as n}from"./chunk-63T4HJ2B.js";import{a as c}from"./chunk-IMPBB4AK.js";var u=class u{constructor(e,i){this.http=e;let t=i??"/api";this.baseUrl=t.endsWith("/")?t.slice(0,-1):t}adminUrl(){return`${this.baseUrl}/administrador`}rolesUrl(){return`${this.adminUrl()}/roles`}permissionsUrl(){return`${this.adminUrl()}/permissions`}universidadUrl(){return`${this.adminUrl()}/universidad`}academicoUrl(){return`${this.adminUrl()}/academico`}asApi(e){return e&&typeof e=="object"&&"ok"in e&&"data"in e?e:{ok:!0,data:e}}pickItems(e){return Array.isArray(e)?e:Array.isArray(e?.items)?e.items:Array.isArray(e?.data)?e.data:Array.isArray(e?.data?.items)?e.data.items:[]}listarRoles(e){let i=new l;return e?.guard&&(i=i.set("guard",e.guard)),e?.search&&(i=i.set("search",e.search)),e?.page!=null&&(i=i.set("page",String(e.page))),this.http.get(this.rolesUrl(),{params:i}).pipe(n(t=>this.asApi(t)))}obtenerRol(e){return this.http.get(`${this.rolesUrl()}/${e}`).pipe(n(i=>this.asApi(i)))}crearRol(e){let i=c({name:String(e.name).trim()},e.guard_name?{guard_name:String(e.guard_name)}:{});return this.http.post(this.rolesUrl(),i).pipe(n(t=>this.asApi(t)))}renombrarRol(e,i){let t=c({name:String(i.name).trim()},i.guard_name?{guard_name:String(i.guard_name)}:{});return this.http.patch(`${this.rolesUrl()}/${e}/rename`,t).pipe(n(s=>this.asApi(s)))}eliminarRol(e){return this.http.delete(`${this.rolesUrl()}/${e}`)}agregarPermisosARol(e,i){let t=Array.isArray(i)?{permissions:i}:i;return this.http.post(`${this.rolesUrl()}/${e}/permissions/assign`,t).pipe(n(s=>this.asApi(s)))}asignarPermisosARol(e,i){let t=Array.isArray(i)?{permissions:i}:i;return this.http.put(`${this.rolesUrl()}/${e}/permissions`,t).pipe(n(s=>this.asApi(s)))}revocarPermisosDeRol(e,i){let t={permissions:i};return this.http.request("DELETE",`${this.rolesUrl()}/${e}/permissions`,{body:t}).pipe(n(s=>this.asApi(s)))}listarPermisos(e){let i=new l;return e&&(i=i.set("guard",e)),this.http.get(this.permissionsUrl(),{params:i}).pipe(n(t=>this.asApi(t)))}listarUsuariosDeRol(e,i=1,t=15){let s=new l().set("page",String(i)).set("per_page",String(t));return this.http.get(`${this.rolesUrl()}/${e}/users`,{params:s}).pipe(n(a=>{let r=this.pickItems(a),o=a?.total??a?.meta?.total??(Array.isArray(r)?r.length:void 0),d={items:r,total:o,page:Number(a?.meta?.current_page??i)||void 0,per_page:Number(a?.meta?.per_page??t)||void 0};return this.asApi(a?.ok?{ok:a.ok,data:d,meta:a.meta}:d)}))}obtenerUniversidad(){return this.http.get(this.universidadUrl()).pipe(n(e=>this.asApi(e)))}actualizarUniversidad(e){let i={codigo:String(e.codigo??""),nombre:String(e.nombre??""),tipo_gestion:String(e.tipo_gestion??""),estado_licenciamiento:String(e.estado_licenciamiento??"")};return this.http.put(this.universidadUrl(),i).pipe(n(t=>this.asApi(t)))}setUniversidadLogo(e){let i=new FormData;return i.append("file",e),this.http.post(`${this.universidadUrl()}/logo`,i).pipe(n(t=>this.asApi(t)))}setUniversidadPortada(e){let i=new FormData;return i.append("file",e),this.http.post(`${this.universidadUrl()}/portada`,i).pipe(n(t=>this.asApi(t)))}listarFacultades(e,i=1,t=15){let s=new l().set("page",String(i)).set("per_page",String(t));return e&&(s=s.set("q",e)),this.http.get(`${this.academicoUrl()}/facultades`,{params:s}).pipe(n(a=>{let r=this.pickItems(a),o=a?.total??a?.meta?.total??(Array.isArray(r)?r.length:void 0),d={items:r,total:o,page:Number(a?.meta?.current_page??i)||void 0,per_page:Number(a?.meta?.per_page??t)||void 0};return this.asApi(a?.ok?{ok:a.ok,data:d,meta:a.meta}:d)}))}obtenerFacultad(e){return this.http.get(`${this.academicoUrl()}/facultades/${e}`).pipe(n(i=>this.asApi(i)))}crearFacultad(e){let i={universidad_id:e.universidad_id,codigo:String(e.codigo).trim(),nombre:String(e.nombre).trim()};return this.http.post(`${this.academicoUrl()}/facultades`,i).pipe(n(t=>this.asApi(t)))}actualizarFacultad(e,i){let t={};return i.codigo!==void 0&&(t.codigo=String(i.codigo)),i.nombre!==void 0&&(t.nombre=String(i.nombre)),i.universidad_id!==void 0&&(t.universidad_id=i.universidad_id),this.http.put(`${this.academicoUrl()}/facultades/${e}`,t).pipe(n(s=>this.asApi(s)))}eliminarFacultad(e){return this.http.delete(`${this.academicoUrl()}/facultades/${e}`)}listarSedes(e,i=1,t=15){let s=new l().set("page",String(i)).set("per_page",String(t));return e&&(s=s.set("q",e)),this.http.get(`${this.academicoUrl()}/sedes`,{params:s}).pipe(n(a=>{let r=this.pickItems(a),o=a?.total??a?.meta?.total??(Array.isArray(r)?r.length:void 0),d={items:r,total:o,page:Number(a?.meta?.current_page??i)||void 0,per_page:Number(a?.meta?.per_page??t)||void 0};return this.asApi(a?.ok?{ok:a.ok,data:d,meta:a.meta}:d)}))}obtenerSede(e){return this.http.get(`${this.academicoUrl()}/sedes/${e}`).pipe(n(i=>this.asApi(i)))}crearSede(e){let i={universidad_id:e.universidad_id,nombre:String(e.nombre).trim(),es_principal:e.es_principal??!1,esta_suspendida:e.esta_suspendida??!1};return this.http.post(`${this.academicoUrl()}/sedes`,i).pipe(n(t=>this.asApi(t)))}actualizarSede(e,i){let t={};return i.nombre!==void 0&&(t.nombre=String(i.nombre)),i.universidad_id!==void 0&&(t.universidad_id=i.universidad_id),i.es_principal!==void 0&&(t.es_principal=i.es_principal),i.esta_suspendida!==void 0&&(t.esta_suspendida=i.esta_suspendida),this.http.put(`${this.academicoUrl()}/sedes/${e}`,t).pipe(n(s=>this.asApi(s)))}eliminarSede(e){return this.http.delete(`${this.academicoUrl()}/sedes/${e}`)}listarEscuelas(e,i=1,t=15,s){let a=new l().set("page",String(i)).set("per_page",String(t));return e&&(a=a.set("q",e)),s!=null&&(a=a.set("sede_id",String(s))),this.http.get(`${this.academicoUrl()}/escuelas-profesionales`,{params:a}).pipe(n(r=>{let o=this.pickItems(r),d=r?.total??r?.meta?.total??(Array.isArray(o)?o.length:void 0),p={items:o,total:d,page:Number(r?.meta?.current_page??i)||void 0,per_page:Number(r?.meta?.per_page??t)||void 0};return this.asApi(r?.ok?{ok:r.ok,data:p,meta:r.meta}:p)}))}listarEscuelasDeSede(e,i,t=1,s=15){let a=new l().set("page",String(t)).set("per_page",String(s));return i&&(a=a.set("q",i)),this.http.get(`${this.academicoUrl()}/sedes/${e}/escuelas`,{params:a}).pipe(n(r=>{let o=this.pickItems(r),d=r?.total??r?.meta?.total??(Array.isArray(o)?o.length:void 0),p={items:o,total:d,page:Number(r?.meta?.current_page??t)||void 0,per_page:Number(r?.meta?.per_page??s)||void 0};return this.asApi(r?.ok?{ok:r.ok,data:p,meta:r.meta}:p)}))}obtenerEscuela(e){return this.http.get(`${this.academicoUrl()}/escuelas-profesionales/${e}`).pipe(n(i=>this.asApi(i)))}crearEscuela(e){let i={facultad_id:e.facultad_id,codigo:String(e.codigo).trim(),nombre:String(e.nombre).trim()};return this.http.post(`${this.academicoUrl()}/escuelas-profesionales`,i).pipe(n(t=>this.asApi(t)))}actualizarEscuela(e,i){let t={};return i.codigo!==void 0&&(t.codigo=String(i.codigo)),i.nombre!==void 0&&(t.nombre=String(i.nombre)),i.facultad_id!==void 0&&(t.facultad_id=i.facultad_id),this.http.put(`${this.academicoUrl()}/escuelas-profesionales/${e}`,t).pipe(n(s=>this.asApi(s)))}eliminarEscuela(e){return this.http.delete(`${this.academicoUrl()}/escuelas-profesionales/${e}`)}attachSedeToEscuela(e,i){let t={sede_id:i.sede_id,vigente_desde:i.vigente_desde??null,vigente_hasta:i.vigente_hasta??null};return this.http.post(`${this.academicoUrl()}/escuelas-profesionales/${e}/sedes`,t).pipe(n(s=>this.asApi(s)))}updateEscuelaSedeVigencia(e,i,t){let s={};return t.vigente_desde!==void 0&&(s.vigente_desde=t.vigente_desde),t.vigente_hasta!==void 0&&(s.vigente_hasta=t.vigente_hasta),this.http.put(`${this.academicoUrl()}/escuelas-profesionales/${e}/sedes/${i}`,s)}detachEscuelaFromSede(e,i){return this.http.delete(`${this.academicoUrl()}/escuelas-profesionales/${e}/sedes/${i}`)}};u.\u0275fac=function(i){return new(i||u)(m(g),m(b,8))},u.\u0275prov=h({token:u,factory:u.\u0275fac,providedIn:"root"});var f=u;export{f as a};
