import{a as A}from"./chunk-LWNR2F3M.js";import{A as R,B as o,C as v}from"./chunk-FE5WSVYG.js";import{O as m,S as l,j as d,k as b,o as p,w as h}from"./chunk-63T4HJ2B.js";import{a as c}from"./chunk-IMPBB4AK.js";var n=class n{constructor(e,s){this.http=e;this.base=s}crearProyecto(e){let s=c({},e);return e.tipo==="VINCULADO"&&(Array.isArray(e.niveles)&&e.niveles.length?s.niveles=e.niveles:e.nivel!=null?s.niveles=[e.nivel]:s.niveles=[]),delete s.nivel,this.http.post(`${this.base}/vm/proyectos`,s)}obtenerProyectoArbol(e){return this.http.get(`${this.base}/vm/proyectos/${e}`)}obtenerProyectoArbolAlumno(e){return this.http.get(`${this.base}/vm/alumno/proyectos/${e}`)}obtenerProyecto(e){return this.http.get(`${this.base}/vm/proyectos/${e}`).pipe(p(s=>s.ok?{ok:!0,data:s.data.proyecto}:s))}actualizarProyecto(e,s){let t=c({},s);return s?.tipo==="VINCULADO"&&(Array.isArray(s.niveles)&&s.niveles.length?t.niveles=s.niveles:s?.nivel!=null&&(t.niveles=[s.nivel])),delete t.nivel,this.http.put(`${this.base}/vm/proyectos/${e}`,t)}publicarProyecto(e){return this.http.put(`${this.base}/vm/proyectos/${e}/publicar`,{})}eliminarProyecto(e){return this.http.delete(`${this.base}/vm/proyectos/${e}`)}listarProyectos(e){let s=new o;return Object.entries(e??{}).forEach(([t,i])=>{i!=null&&i!==""&&(s=s.set(t,String(i)))}),this.http.get(`${this.base}/vm/proyectos`,{params:s})}nivelesDisponibles(e){let s=new o({fromObject:Object.entries(e).reduce((t,[i,r])=>(t[i]=String(r),t),{})});return this.http.get(`${this.base}/vm/proyectos/niveles-disponibles`,{params:s})}crearProceso(e,s){return this.http.post(`${this.base}/vm/proyectos/${e}/procesos`,s)}obtenerProcesos(e){return this.http.get(`${this.base}/vm/proyectos/${e}/procesos`)}actualizarProceso(e,s,t){return this.http.put(`${this.base}/vm/proyectos/${e}/procesos/${s}`,t)}eliminarProceso(e,s){return this.http.delete(`${this.base}/vm/proyectos/${e}/procesos/${s}`)}crearSesion(e,s){let t={mode:"list",fechas:[s.fecha],hora_inicio:s.hora_inicio,hora_fin:s.hora_fin};return this.http.post(`${this.base}/vm/procesos/${e}/sesiones/batch`,t).pipe(p(i=>i.ok?{ok:!0,data:i.data?.[0]}:i))}crearSesionesBatch(e,s){return this.http.post(`${this.base}/vm/procesos/${e}/sesiones/batch`,s)}obtenerSesiones(e){return this.http.get(`${this.base}/vm/procesos/${e}/sesiones`)}actualizarSesion(e,s,t){return this.http.put(`${this.base}/vm/procesos/${e}/sesiones/${s}`,t)}eliminarSesion(e,s){return this.http.delete(`${this.base}/vm/procesos/${e}/sesiones/${s}`)}crearEvento(e){return this.http.post(`${this.base}/vm/eventos`,e)}listarImagenesProyecto(e){return this.http.get(`${this.base}/vm/proyectos/${e}/imagenes`)}subirImagenProyecto(e,s){let t=new FormData;return t.append("file",s),this.http.post(`${this.base}/vm/proyectos/${e}/imagenes`,t)}eliminarImagenProyecto(e,s){return this.http.delete(`${this.base}/vm/proyectos/${e}/imagenes/${s}`)}agregarParticipante(e,s){return this.http.post(`${this.base}/vm/proyectos/${e}/participantes`,s)}obtenerParticipantes(e){return this.http.get(`${this.base}/vm/proyectos/${e}/participantes`)}actualizarParticipante(e,s,t){return this.http.put(`${this.base}/vm/proyectos/${e}/participantes/${s}`,t)}eliminarParticipante(e,s){return this.http.delete(`${this.base}/vm/proyectos/${e}/participantes/${s}`)}listarInscritosProyecto(e,s){let t=new o;return s?.estado&&(t=t.set("estado",s.estado)),s?.roles?.length&&s.roles.forEach(i=>t=t.append("roles[]",i)),this.http.get(`${this.base}/vm/proyectos/${e}/inscritos`,{params:t})}listarCandidatosProyecto(e,s){let t=new o;return s?.solo_elegibles!==void 0&&(t=t.set("solo_elegibles",String(s.solo_elegibles))),s?.q&&(t=t.set("q",s.q)),s?.limit&&(t=t.set("limit",String(s.limit))),this.http.get(`${this.base}/vm/proyectos/${e}/candidatos`,{params:t})}inscribirTodosCandidatosProyecto(e,s){let t=new o;return s?.solo_elegibles!==void 0&&(t=t.set("solo_elegibles",String(s.solo_elegibles))),s?.q&&(t=t.set("q",s.q)),s?.limit&&(t=t.set("limit",String(s.limit))),this.http.post(`${this.base}/vm/proyectos/${e}/inscribir-todos-candidatos`,{},{params:t})}inscribirCandidatosSeleccionadosProyecto(e,s){let t={expediente_ids:s};return this.http.post(`${this.base}/vm/proyectos/${e}/inscribir-candidatos-seleccionados`,t)}crearRegistro(e,s){return this.http.post(`${this.base}/vm/sesiones/${e}/registros`,s)}obtenerRegistros(e){return this.http.get(`${this.base}/vm/sesiones/${e}/registros`)}actualizarRegistro(e,s,t){return this.http.put(`${this.base}/vm/sesiones/${e}/registros/${s}`,t)}eliminarRegistro(e,s){return this.http.delete(`${this.base}/vm/sesiones/${e}/registros/${s}`)}listarProyectosAlumno(e){let s=new o;return e?.periodo_id&&(s=s.set("periodo_id",String(e.periodo_id))),this.http.get(`${this.base}/vm/proyectos/alumno`,{params:s})}inscribirseProyecto(e){return this.http.post(`${this.base}/vm/proyectos/${e}/inscribirse`,{})}abrirVentanaQr(e,s){return this.http.post(`${this.base}/vm/sesiones/${e}/qr`,s??{})}activarVentanaManual(e){return this.http.post(`${this.base}/vm/sesiones/${e}/activar-manual`,{})}checkInQr(e,s){return this.http.post(`${this.base}/vm/sesiones/${e}/check-in/qr`,s)}checkInManual(e,s){return this.http.post(`${this.base}/vm/sesiones/${e}/check-in/manual`,s)}checkInManualPorCodigo(e,s){return this.http.post(`${this.base}/vm/sesiones/${e}/check-in/manual`,{codigo:s})}listarAsistenciasSesion(e){return this.http.get(`${this.base}/vm/sesiones/${e}/asistencias`)}listarParticipantesSesion(e){return this.http.get(`${this.base}/vm/sesiones/${e}/participantes`)}checkInFueraDeHora(e,s){return this.http.post(`${this.base}/vm/sesiones/${e}/asistencias/justificar`,s)}listarAsistenciasSesionPoll(e,s){let t=new R;return s&&(t=t.set("If-None-Match",s)),this.http.get(`${this.base}/vm/sesiones/${e}/asistencias`,{observe:"response",headers:t}).pipe(p(i=>{let r=i.body;return{ok:!0,notModified:!1,data:r&&r.ok===!0?r.data??[]:[],etag:i.headers.get("ETag")??void 0,lastModified:i.headers.get("Last-Modified")??void 0}}),h(i=>i.status===304?d({ok:!0,notModified:!0,etag:s,lastModified:i.headers?.get?.("Last-Modified")??void 0}):b(()=>i)))}descargarReporteAsistenciasCSV(e){return this.http.get(`${this.base}/vm/sesiones/${e}/asistencias/reporte?format=csv`,{responseType:"blob"})}validarAsistenciasSesion(e,s){return this.http.post(`${this.base}/vm/sesiones/${e}/validar`,s??{})}obtenerAgendaAlumno(e){let s=new o;return e?.periodo_id&&(s=s.set("periodo_id",String(e.periodo_id))),this.http.get(`${this.base}/vm/alumno/agenda`,{params:s})}obtenerAgendaStaff(e){let s=new o;return e?.periodo_id&&(s=s.set("periodo_id",String(e.periodo_id))),e?.nivel!==void 0&&(s=s.set("nivel",String(e.nivel))),this.http.get(`${this.base}/vm/staff/agenda`,{params:s})}listarSesiones(e){let s=new o;return e&&Object.entries(e).forEach(([t,i])=>{i!=null&&i!==""&&(s=s.set(t,String(i)))}),this.http.get(`${this.base}/vm/sesiones`,{params:s})}listarProyectosExpand(e,s,t){let i=new o;return Object.entries(e??{}).forEach(([r,a])=>{a!=null&&a!==""&&(i=i.set(r,String(a)))}),s&&s.trim()&&(i=i.set("expand",s)),t&&(i=i.set("with_tree","1")),this.http.get(`${this.base}/vm/proyectos`,{params:i})}listarProyectosArbol(e){return this.listarProyectosExpand(e,"arbol",!0)}obtenerProyectoContextoEdicion(e){return this.http.get(`${this.base}/vm/proyectos/${e}/edit`)}obtenerProcesoContextoEdicion(e){return this.http.get(`${this.base}/vm/procesos/${e}/edit`)}actualizarProcesoById(e,s){return this.http.put(`${this.base}/vm/procesos/${e}`,s)}eliminarProcesoById(e){return this.http.delete(`${this.base}/vm/procesos/${e}`)}obtenerSesionParaEdicion(e){return this.http.get(`${this.base}/vm/sesiones/${e}/edit`)}actualizarSesionById(e,s){return this.http.put(`${this.base}/vm/sesiones/${e}`,s)}eliminarSesionById(e){return this.http.delete(`${this.base}/vm/sesiones/${e}`)}};n.\u0275fac=function(s){return new(s||n)(l(v),l(A))},n.\u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"});var u=n;export{u as a};
