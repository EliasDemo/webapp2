import{a as $}from"./chunk-G33XJ7AN.js";import"./chunk-LWNR2F3M.js";import{d as B,f as O,g as z}from"./chunk-5VQTM22E.js";import{k as U,u as j}from"./chunk-FE5WSVYG.js";import{$a as e,Fb as L,Ka as A,Ob as y,Pa as I,T as k,Tb as T,Y as g,Z as v,_a as u,ab as t,bb as d,eb as D,fa as w,fb as N,gb as P,kb as f,mb as p,n as F,rb as V,ua as R,ub as q,vb as i,xb as s,ya as a}from"./chunk-63T4HJ2B.js";import"./chunk-IMPBB4AK.js";var G=()=>["/mis-eventos"];function J(o,l){if(o&1&&(D(0),d(1,"img",36),N()),o&2){let n=p();a(),u("src",n.portadaUrl(),R)}}function K(o,l){o&1&&(e(0,"div",37)(1,"div",38),d(2,"i",39),e(3,"div",40),i(4,"Sin portada"),t()()())}function W(o,l){if(o&1&&(e(0,"p",59),i(1),t()),o&2){let n,r=p(3);a(),s(" ",(n=r.evento())==null?null:n.descripcion_larga," ")}}function X(o,l){if(o&1&&(e(0,"p",59),i(1),t()),o&2){let n,r=p(3);a(),s(" ",((n=r.evento())==null?null:n.descripcion_corta)||"Este evento no tiene una descripci\xF3n detallada registrada."," ")}}function Y(o,l){if(o&1&&(D(0),e(1,"section",41)(2,"div",42)(3,"div",43)(4,"div",44),d(5,"i",45),t(),e(6,"div")(7,"h2",46),i(8,"Resumen"),t(),e(9,"p",47),i(10,"Informaci\xF3n general del evento"),t()()(),e(11,"div",48)(12,"div",49)(13,"span",50),i(14,"C\xF3digo"),t(),e(15,"b",51),i(16),t()(),e(17,"div",49)(18,"span",50),i(19,"Modalidad"),t(),e(20,"b",51),i(21),t()(),e(22,"div",49)(23,"span",50),i(24,"Per\xEDodo"),t(),e(25,"b",51),i(26),t()(),e(27,"div",49)(28,"span",50),i(29,"EP-Sede"),t(),e(30,"b",51),i(31),t()(),e(32,"div",49)(33,"span",50),i(34,"Cupo m\xE1ximo"),t(),e(35,"b",51),i(36),t()(),e(37,"div",49)(38,"span",50),i(39,"Requiere inscripci\xF3n"),t(),e(40,"b",51),i(41),t()()(),e(42,"div",52)(43,"h3",53),i(44," Descripci\xF3n "),t(),I(45,W,2,1,"p",54)(46,X,2,1,"ng-template",null,3,y),t()()(),e(48,"section",55)(49,"div",42)(50,"div",43)(51,"div",44),d(52,"i",56),t(),e(53,"div")(54,"h2",46),i(55,"Informaci\xF3n de inscripci\xF3n"),t(),e(56,"p",47),i(57," Reglas y ventana de inscripci\xF3n del evento. "),t()()(),e(58,"div",57)(59,"div",49)(60,"span",50),i(61," Requiere inscripci\xF3n previa "),t(),e(62,"b",51),i(63),t()(),e(64,"div",49)(65,"span",50),i(66," Cupo m\xE1ximo "),t(),e(67,"b",51),i(68),t()(),e(69,"div",49)(70,"span",50),i(71," Inscripci\xF3n desde "),t(),e(72,"b",51),i(73),t()(),e(74,"div",49)(75,"span",50),i(76," Inscripci\xF3n hasta "),t(),e(77,"b",51),i(78),t()()(),e(79,"p",58),i(80," Recuerda que tu participaci\xF3n y registro de asistencia (por QR o manual) depender\xE1n de las indicaciones del docente o del \xE1rea organizadora del evento. "),t()()(),N()),o&2){let n,r,m,x,b,E,S,h,C,M,Q=V(47),c=p(2);a(16),s(" ",((n=c.evento())==null?null:n.codigo)||"\u2014"," "),a(5),s(" ",((r=c.evento())==null?null:r.modalidad)||"\u2014"," "),a(5),s(" ",c.periodoEtiqueta()," "),a(5),s(" ",((m=c.evento())==null?null:m.ep_sede_id)??"\u2014"," "),a(5),s(" ",((x=c.evento())==null?null:x.cupo_maximo)??"Sin l\xEDmite"," "),a(5),s(" ",(b=c.evento())!=null&&b.requiere_inscripcion?"S\xED":"No"," "),a(4),u("ngIf",(E=c.evento())==null?null:E.descripcion_larga)("ngIfElse",Q),a(18),s(" ",(S=c.evento())!=null&&S.requiere_inscripcion?"S\xED, debes inscribirte":"No, asistencia libre"," "),a(5),s(" ",((h=c.evento())==null?null:h.cupo_maximo)??"Sin l\xEDmite registrado"," "),a(5),s(" ",((C=c.evento())==null?null:C.inscripcion_desde)||"No definido"," "),a(5),s(" ",((M=c.evento())==null?null:M.inscripcion_hasta)||"No definido"," ")}}function Z(o,l){if(o&1&&(D(0),I(1,Y,81,12,"ng-container",24),N()),o&2){let n=p(),r=V(56);a(),u("ngIf",!n.error()&&n.evento())("ngIfElse",r)}}function ee(o,l){o&1&&(e(0,"div",60)(1,"div",61),d(2,"div",62)(3,"div",63),t(),e(4,"p",64),i(5," Cargando evento\u2026 "),t()())}function te(o,l){if(o&1){let n=P();e(0,"div",65)(1,"div",66),d(2,"i",67),t(),e(3,"h3",68),i(4," No se pudo cargar el evento "),t(),e(5,"p",69),i(6),t(),e(7,"div",70)(8,"button",71),f("click",function(){g(n);let m=p();return v(m.volverAlListado())}),d(9,"i",29),i(10," Volver "),t(),e(11,"button",72),f("click",function(){g(n);let m=p();return v(m.reintentar())}),d(12,"i",73),i(13," Reintentar "),t()()()}if(o&2){let n=p();a(6),s(" ",n.error()," ")}}var _=class _{constructor(){this.api=k($);this.route=k(B);this.router=k(O);this.loading=w(!0);this.error=w(null);this.data=w(null);this.lastEventoId=w(null);this.evento=T(()=>this.data());this.portadaUrl=T(()=>this.evento()?.url_imagen_portada||null);this.route.paramMap.subscribe(async l=>{let n=l.get("eventoId")??l.get("id"),r=Number(n);if(!Number.isFinite(r)||r<=0){this.error.set("ID de evento inv\xE1lido."),this.loading.set(!1);return}this.lastEventoId.set(r),await this.fetchEvento(r)})}async fetchEvento(l){this.loading.set(!0),this.error.set(null);try{let n=await F(this.api.obtenerEvento(l));n&&n.ok?this.data.set(n.data):this.error.set(n?.message||"No se pudo cargar el evento.")}catch(n){this.error.set(n?.error?.message||"No se pudo cargar el evento.")}finally{this.loading.set(!1)}}async reintentar(){let l=this.lastEventoId();!l||l<=0||await this.fetchEvento(l)}headerEstadoBadge(){let l=String(this.evento()?.estado??"").toUpperCase();return l==="PLANIFICADO"?"bg-amber-50 text-amber-700 border-amber-200":l==="EN_CURSO"?"bg-emerald-50 text-emerald-700 border-emerald-200":l==="CERRADO"?"bg-slate-100 text-slate-700 border-slate-200":l==="CANCELADO"?"bg-rose-50 text-rose-700 border-rose-200":"bg-slate-100 text-slate-700 border-slate-200"}periodoEtiqueta(){let l=this.evento();return l?l.periodo?`${l.periodo.anio} - ${l.periodo.ciclo}`:`Per\xEDodo ${l.periodo_id}`:"\u2014"}volverAlListado(){this.router.navigate(["/mis-eventos"])}scrollTo(l){let n=document.getElementById(l);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}};_.\u0275fac=function(n){return new(n||_)},_.\u0275cmp=A({type:_,selectors:[["app-mis-vent-view-page"]],decls:57,vars:15,consts:[["noCoverHero",""],["loadingTpl",""],["errorTpl",""],["descCorta",""],[1,"bg-white","border-b","border-slate-200"],[1,"max-w-7xl","mx-auto","px-4","py-6"],["aria-label","Breadcrumb",1,"text-xs","text-slate-500","mb-2"],[1,"hover:text-slate-700","font-medium",3,"routerLink"],[1,"mx-2","text-slate-400"],[1,"text-slate-600","font-semibold"],[1,"grid","grid-cols-1","lg:grid-cols-12","gap-8","items-start"],[1,"lg:col-span-7"],[1,"flex","flex-wrap","items-center","gap-3","mb-2"],[1,"text-3xl","sm:text-4xl","font-extrabold","tracking-tight","text-slate-900"],["aria-label","Estado del evento",1,"inline-flex","items-center","gap-2","rounded-full","px-3","py-1","text-xs","font-semibold","border"],[1,"fa-solid","fa-circle","text-[7px]","opacity-80"],[1,"mt-3","flex","flex-wrap","items-center","gap-2"],[1,"inline-flex","items-center","gap-2","rounded-lg","border","border-slate-200","bg-slate-50","px-3","py-1.5","text-xs","font-semibold","text-slate-700"],[1,"fa-solid","fa-hashtag","text-sky-600"],[1,"fa-solid","fa-location-dot","text-emerald-600"],[1,"fa-solid","fa-calendar","text-amber-600"],[1,"fa-solid","fa-ticket","text-violet-600"],[1,"lg:col-span-5"],[1,"rounded-2xl","border","border-slate-200","bg-white","overflow-hidden","shadow-sm"],[4,"ngIf","ngIfElse"],[1,"p-4","flex","items-center","justify-between","gap-3"],[1,"text-xs","text-slate-500"],[1,"font-semibold","text-slate-700"],["type","button",1,"inline-flex","items-center","gap-2","rounded-xl","border","border-slate-300","bg-white","px-4","py-2","text-sm","font-semibold","text-slate-700","hover:bg-slate-50",3,"click"],[1,"fa-solid","fa-arrow-left"],[1,"sticky","top-0","z-20","bg-white/85","backdrop-blur","border-t","border-b","border-slate-200"],[1,"max-w-7xl","mx-auto","px-4"],[1,"flex","items-center","gap-2","py-2"],[1,"inline-flex","items-center","gap-2","rounded-lg","px-3","py-2","text-sm","font-semibold","text-slate-700","hover:bg-slate-100","border","border-transparent",3,"click"],[1,"bg-slate-50/50","min-h-screen"],[1,"max-w-7xl","mx-auto","px-4","py-8"],["alt","Portada del evento",1,"w-full","h-56","object-cover",3,"src"],[1,"h-56","grid","place-items-center","bg-slate-50","text-slate-400"],[1,"text-center"],[1,"fa-solid","fa-image","text-3xl","mb-1"],[1,"text-sm","font-medium"],["id","resumen",1,"scroll-mt-20","mb-8"],[1,"rounded-2xl","border","border-slate-200","bg-white","p-6","shadow-sm"],[1,"mb-4","flex","items-center","gap-3"],[1,"grid","h-10","w-10","place-items-center","rounded-xl","bg-slate-900","text-white"],[1,"fa-solid","fa-circle-info"],[1,"text-xl","font-bold","text-slate-900"],[1,"text-sm","text-slate-500"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"rounded-lg","border","border-slate-200","bg-slate-50","px-3","py-2","flex","flex-col"],[1,"text-[11px]","uppercase","tracking-wider","text-slate-500"],[1,"text-sm","font-semibold","text-slate-900"],[1,"mt-6"],[1,"text-sm","font-semibold","text-slate-800","mb-2"],["class","text-sm text-slate-700 whitespace-pre-line",4,"ngIf","ngIfElse"],["id","inscripcion",1,"scroll-mt-20"],[1,"fa-solid","fa-ticket"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"text-xs","text-slate-600"],[1,"text-sm","text-slate-700","whitespace-pre-line"],[1,"grid","place-items-center","py-20","text-center"],[1,"relative"],[1,"h-14","w-14","rounded-full","border-4","border-slate-200"],[1,"absolute","inset-0","h-14","w-14","animate-spin","rounded-full","border-4","border-slate-900","border-t-transparent"],[1,"mt-4","text-sm","font-semibold","text-slate-700"],[1,"mx-auto","max-w-xl","rounded-2xl","border","border-rose-200","bg-white","p-8","text-center","shadow-sm"],[1,"mx-auto","mb-4","grid","h-14","w-14","place-items-center","rounded-xl","bg-rose-100","text-rose-600"],[1,"fa-solid","fa-triangle-exclamation","text-xl"],[1,"text-lg","font-bold","text-slate-900"],[1,"mt-2","rounded-lg","border","border-rose-200","bg-rose-50","px-4","py-2","text-sm","font-semibold","text-rose-700"],[1,"mt-4","flex","justify-center","gap-3"],["type","button",1,"inline-flex","items-center","gap-2","rounded-lg","bg-slate-900","px-4","py-2","text-sm","font-semibold","text-white","hover:bg-slate-800",3,"click"],["type","button",1,"inline-flex","items-center","gap-2","rounded-lg","border","border-slate-300","bg-white","px-4","py-2","text-sm","font-semibold","text-slate-700","hover:bg-slate-50",3,"click"],[1,"fa-solid","fa-rotate"]],template:function(n,r){if(n&1){let m=P();e(0,"section",4)(1,"div",5)(2,"nav",6)(3,"a",7),i(4," Mis eventos "),t(),e(5,"span",8),i(6,"/"),t(),e(7,"span",9),i(8,"Detalle"),t()(),e(9,"div",10)(10,"div",11)(11,"div",12)(12,"h1",13),i(13),t(),e(14,"span",14),d(15,"i",15),i(16),t()(),e(17,"div",16)(18,"span",17),d(19,"i",18),i(20),t(),e(21,"span",17),d(22,"i",19),i(23),t(),e(24,"span",17),d(25,"i",20),i(26),t(),e(27,"span",17),d(28,"i",21),i(29),t()()(),e(30,"div",22)(31,"div",23),I(32,J,2,1,"ng-container",24)(33,K,5,0,"ng-template",null,0,y),e(35,"div",25)(36,"div",26),i(37," ID: "),e(38,"span",27),i(39),t()(),e(40,"button",28),f("click",function(){return g(m),v(r.volverAlListado())}),d(41,"i",29),i(42," Volver a mis eventos "),t()()()()()(),e(43,"div",30)(44,"div",31)(45,"div",32)(46,"button",33),f("click",function(){return g(m),v(r.scrollTo("resumen"))}),i(47," Resumen "),t(),e(48,"button",33),f("click",function(){return g(m),v(r.scrollTo("inscripcion"))}),i(49," Informaci\xF3n de inscripci\xF3n "),t()()()()(),e(50,"main",34)(51,"div",35),I(52,Z,2,2,"ng-container",24)(53,ee,6,0,"ng-template",null,1,y)(55,te,14,1,"ng-template",null,2,y),t()()}if(n&2){let m,x,b,E,S,h,C=V(34),M=V(54);a(3),u("routerLink",L(14,G)),a(10),s(" ",((m=r.evento())==null?null:m.titulo)||"Evento"," "),a(),q(r.headerEstadoBadge()),a(2),s(" ",((x=r.evento())==null?null:x.estado)||"\u2014"," "),a(4),s(" ",((b=r.evento())==null?null:b.codigo)||"\u2014"," "),a(3),s(" ",((E=r.evento())==null?null:E.modalidad)||"\u2014"," "),a(3),s(" ",r.periodoEtiqueta()," "),a(3),s(" ",(S=r.evento())!=null&&S.requiere_inscripcion?"Requiere inscripci\xF3n":"Acceso libre"," "),a(3),u("ngIf",r.portadaUrl())("ngIfElse",C),a(7),s(" ",(h=r.evento())==null?null:h.id," "),a(13),u("ngIf",!r.loading())("ngIfElse",M)}},dependencies:[j,U,z],encapsulation:2});var H=_;export{H as MisVentViewPage};
