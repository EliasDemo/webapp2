import{a as ue}from"./chunk-JGZAIOON.js";import{a as le}from"./chunk-OKPZKVFZ.js";import{a as re}from"./chunk-3JNG56IY.js";import{A as pe,b as oe,d as de,i as se,s as me,t as ce}from"./chunk-J2XPQYKK.js";import"./chunk-LWNR2F3M.js";import{d as ne,f as ie,g as ae}from"./chunk-5VQTM22E.js";import{i as X,j as Y,k as Z,q as ee,u as te}from"./chunk-FE5WSVYG.js";import{$ as w,$a as e,Ab as B,Bb as z,Cb as q,Fb as W,Gb as T,Hb as $,Ib as L,Jb as J,Ka as j,Kb as K,Mb as Q,Ob as S,Pa as p,T as D,Tb as y,Y as C,Z as I,_ as h,_a as s,ab as n,bb as x,ca as H,eb as E,fa as b,fb as v,gb as A,kb as R,mb as m,n as P,rb as _,vb as a,wb as k,xb as c,ya as o,yb as U}from"./chunk-63T4HJ2B.js";import"./chunk-IMPBB4AK.js";var fe=(i,r,t)=>({"bg-emerald-50 text-emerald-700":i,"bg-slate-50 text-slate-600":r,"bg-red-50 text-red-700":t}),he=i=>["/staff/ep-sede",i,"manage","COORDINADOR"],ge=i=>["/staff/ep-sede",i,"manage","ENCARGADO"],be=()=>({mode:"delegate"}),ye=(i,r)=>({"bg-emerald-50 text-emerald-700":i,"bg-teal-50 text-teal-700":r}),Ce=(i,r,t,l)=>({"bg-emerald-50 text-emerald-700":i,"bg-red-50 text-red-700":r,"bg-amber-50 text-amber-700":t,"bg-slate-50 text-slate-600":l});function Ie(i,r){i&1&&(E(0),e(1,"span",35),x(2,"span",36),a(3," Cargando contexto de permisos... "),n(),v())}function we(i,r){i&1&&(E(0),e(1,"span"),a(2," Est\xE1s operando como "),e(3,"strong",37),a(4,"Administrador"),n(),a(5," (puedes gestionar coordinadores y encargados). "),n(),v())}function Re(i,r){i&1&&(E(0),e(1,"span"),a(2," Est\xE1s operando como "),e(3,"strong",37),a(4,"Coordinador de EP-Sede"),n(),a(5," (solo puedes gestionar encargados). "),n(),v())}function De(i,r){i&1&&(e(0,"span"),a(1," Est\xE1s en modo "),e(2,"strong",37),a(3,"solo lectura"),n(),a(4," (no puedes modificar coordinadores ni encargados). "),n())}function Ae(i,r){if(i&1&&p(0,Re,6,0,"ng-container",26)(1,De,5,0,"ng-template",null,3,S),i&2){let t=_(2),l=m(2);s("ngIf",l.isCoordinator())("ngIfElse",t)}}function Oe(i,r){if(i&1&&p(0,we,6,0,"ng-container",26)(1,Ae,3,2,"ng-template",null,2,S),i&2){let t=_(2),l=m();s("ngIf",l.isAdmin())("ngIfElse",t)}}function Ne(i,r){if(i&1&&(e(0,"div",40),a(1),n()),i&2){let t=m(2);o(),c(" ",t.currentEpSedeLabel()," ")}}function Me(i,r){if(i&1&&(E(0),e(1,"div",38),a(2),n(),p(3,Ne,2,1,"div",39),v()),i&2){let t=m();o(2),c(" #",t.epSedeId()," "),o(),s("ngIf",t.currentEpSedeLabel())}}function Pe(i,r){i&1&&(e(0,"div",41),a(1," No seleccionada "),n())}function ke(i,r){if(i&1&&(e(0,"option",52),a(1),n()),i&2){let t=r.$implicit;s("value",t.id),o(),U(" #",t.id," \xB7 ",t.label," ")}}function Te(i,r){if(i&1){let t=A();e(0,"div",47)(1,"label",48),a(2," Elige una EP-Sede de la lista "),n(),e(3,"select",49),R("change",function(d){C(t);let u=m(2);return I(u.onSelectEpSedeFromList(d))}),e(4,"option",50),a(5,"Selecciona una EP-Sede..."),n(),p(6,ke,2,3,"option",51),n(),e(7,"p",30),a(8," Al seleccionar una EP-Sede se actualizar\xE1 la ruta y el panel. "),n()()}if(i&2){let t=m(2);o(6),s("ngForOf",t.epSedes())}}function Ge(i,r){if(i&1&&(e(0,"div",42)(1,"div",43)(2,"h2",44),a(3," Selecciona una EP-Sede a gestionar "),n(),e(4,"p",45),a(5," Como administrador puedes gestionar cualquier EP-Sede sobre la que tengas alcance. Elige una de la lista o ingresa su ID manualmente. "),n(),p(6,Te,9,1,"div",46),n()()),i&2){let t=m();o(6),s("ngIf",t.epSedes().length>0)}}function Fe(i,r){if(i&1&&(e(0,"div",70),h(),e(1,"svg",71),x(2,"path",72),n(),w(),e(3,"span"),a(4),n()()),i&2){let t=m(2);o(4),k(t.errorMsg())}}function Le(i,r){if(i&1&&(e(0,"span"),a(1," ID usuario: "),e(2,"span",89),a(3),n()()),i&2){let t,l=m(3);o(3),c("#",(t=l.staff())==null||t.COORDINADOR==null?null:t.COORDINADOR.user_id)}}function Ve(i,r){i&1&&(e(0,"span",90),a(1,"A\xFAn no se ha configurado un coordinador."),n())}function He(i,r){if(i&1){let t=A();E(0),e(1,"button",91),h(),e(2,"svg",92),x(3,"path",93),n(),a(4," Gestionar coordinador "),n(),w(),e(5,"button",94),R("click",function(){C(t);let d=m(3);return I(d.openUnassign("COORDINADOR"))}),a(6," Desasignar "),n(),v()}if(i&2){let t,l=m(2).ngIf,d=m();o(),s("routerLink",T(2,he,l)),o(4),s("disabled",!((t=d.staff())!=null&&t.COORDINADOR))}}function je(i,r){i&1&&(e(0,"span",30),a(1," Solo administradores pueden modificar el coordinador. "),n())}function Ue(i,r){if(i&1&&(e(0,"span"),a(1," ID usuario: "),e(2,"span",89),a(3),n()()),i&2){let t,l=m(3);o(3),c("#",(t=l.staff())==null||t.ENCARGADO==null?null:t.ENCARGADO.user_id)}}function Be(i,r){i&1&&(e(0,"span",90),a(1,"A\xFAn no se ha configurado un encargado."),n())}function ze(i,r){if(i&1){let t=A();E(0),e(1,"button",95),h(),e(2,"svg",92),x(3,"path",93),n(),a(4," Gestionar encargado "),n(),w(),e(5,"a",96),a(6," Delegar interino "),n(),e(7,"button",94),R("click",function(){C(t);let d=m(3);return I(d.openUnassign("ENCARGADO"))}),a(8," Desasignar "),n(),v()}if(i&2){let t,l=m(2).ngIf,d=m();o(),s("routerLink",T(4,ge,l)),o(4),s("routerLink",T(6,ge,l))("queryParams",W(8,be)),o(2),s("disabled",!((t=d.staff())!=null&&t.ENCARGADO))}}function qe(i,r){i&1&&(e(0,"span",30),a(1," No tienes permisos para modificar el encargado. "),n())}function We(i,r){if(i&1&&(E(0),e(1,"div",73)(2,"section",74)(3,"header",75)(4,"div")(5,"div",76),x(6,"span",77),a(7," Coordinador "),n(),e(8,"h2",78),a(9),n(),e(10,"p",79),a(11," Responsable acad\xE9mico principal de la EP-Sede. "),n()(),e(12,"div",80)(13,"span",81),a(14),n(),e(15,"div",82),a(16," Desde: "),e(17,"span",64),a(18),n()()()(),e(19,"div",83)(20,"div",84),h(),e(21,"svg",68),x(22,"path",85)(23,"path",86),n(),p(24,Le,4,1,"span",26)(25,Ve,2,0,"ng-template",null,7,S),n(),w(),e(27,"div",87),p(28,He,7,4,"ng-container",26)(29,je,2,0,"ng-template",null,8,S),n()()(),e(31,"section",74)(32,"header",75)(33,"div")(34,"div",76),x(35,"span",88),a(36," Encargado "),n(),e(37,"h2",78),a(38),n(),e(39,"p",79),a(40," Soporte operativo y de seguimiento acad\xE9mico para la EP-Sede. "),n()(),e(41,"div",80)(42,"span",81),a(43),n(),e(44,"div",82),a(45," Desde: "),e(46,"span",64),a(47),n()()()(),e(48,"div",83)(49,"div",84),h(),e(50,"svg",68),x(51,"path",85)(52,"path",86),n(),p(53,Ue,4,1,"span",26)(54,Be,2,0,"ng-template",null,9,S),n(),w(),e(56,"div",87),p(57,ze,9,9,"ng-container",26)(58,qe,2,0,"ng-template",null,10,S),n()()()(),v()),i&2){let t,l,d,u,N,M,f,G,F,V,_e=_(26),Se=_(30),Ee=_(55),ve=_(59),g=m(2);o(9),c(" ",((t=g.staff())==null||t.COORDINADOR==null?null:t.COORDINADOR.user)||"Sin coordinador asignado"," "),o(4),s("ngClass",L(16,fe,((l=g.staff())==null||l.COORDINADOR==null?null:l.COORDINADOR.status)==="active",((l=g.staff())==null||l.COORDINADOR==null?null:l.COORDINADOR.status)==="view_only",((l=g.staff())==null||l.COORDINADOR==null?null:l.COORDINADOR.status)==="suspended")),o(),c(" ",g.formatStatus((d=g.staff())==null||d.COORDINADOR==null?null:d.COORDINADOR.status)," "),o(4),c(" ",((u=g.staff())==null||u.COORDINADOR==null?null:u.COORDINADOR.vigente_desde)||"\u2014"," "),o(6),s("ngIf",(N=g.staff())==null?null:N.COORDINADOR)("ngIfElse",_e),o(4),s("ngIf",g.canManageCoordinador())("ngIfElse",Se),o(10),c(" ",((M=g.staff())==null||M.ENCARGADO==null?null:M.ENCARGADO.user)||"Sin encargado asignado"," "),o(4),s("ngClass",L(20,fe,((f=g.staff())==null||f.ENCARGADO==null?null:f.ENCARGADO.status)==="active",((f=g.staff())==null||f.ENCARGADO==null?null:f.ENCARGADO.status)==="view_only",((f=g.staff())==null||f.ENCARGADO==null?null:f.ENCARGADO.status)==="suspended")),o(),c(" ",g.formatStatus((G=g.staff())==null||G.ENCARGADO==null?null:G.ENCARGADO.status)," "),o(4),c(" ",((F=g.staff())==null||F.ENCARGADO==null?null:F.ENCARGADO.vigente_desde)||"\u2014"," "),o(6),s("ngIf",(V=g.staff())==null?null:V.ENCARGADO)("ngIfElse",Ee),o(4),s("ngIf",g.canManageEncargado())("ngIfElse",ve)}}function $e(i,r){i&1&&(e(0,"div",73)(1,"div",97),x(2,"div",98)(3,"div",99)(4,"div",100)(5,"div",101),n(),e(6,"div",97),x(7,"div",98)(8,"div",99)(9,"div",100)(10,"div",101),n()())}function Je(i,r){if(i&1&&(e(0,"span"),a(1),n()),i&2){let t=m().$implicit;o(),c(" #",t.actor_id," ")}}function Ke(i,r){i&1&&(e(0,"span",114),a(1,"\u2014"),n())}function Qe(i,r){if(i&1&&(e(0,"tr",107)(1,"td",108),a(2),K(3,"date"),n(),e(4,"td",109)(5,"span",110),a(6),n()(),e(7,"td",111),a(8),n(),e(9,"td",105)(10,"span",112),a(11),n()(),e(12,"td",108)(13,"div"),a(14,"Desde: "),e(15,"span",64),a(16),n()(),e(17,"div"),a(18,"Hasta: "),e(19,"span",64),a(20),n()()(),e(21,"td",108),p(22,Je,2,1,"span",26)(23,Ke,2,0,"ng-template",null,11,S),n(),e(25,"td",113),a(26),n()()),i&2){let t=r.$implicit,l=_(24),d=m(4);o(2),c(" ",Q(3,11,t.created_at,"yyyy-MM-dd HH:mm")," "),o(3),s("ngClass",$(14,ye,t.role==="COORDINADOR",t.role==="ENCARGADO")),o(),c(" ",t.role," "),o(2),c(" #",t.user_id," "),o(2),s("ngClass",J(17,Ce,t.evento==="ASSIGN"||t.evento==="REINSTATE",t.evento==="UNASSIGN",t.evento==="DELEGATE",t.evento==="AUTO_END"||t.evento==="TRANSFER")),o(),c(" ",d.formatEvento(t.evento)," "),o(5),k(t.desde||"\u2014"),o(4),k(t.hasta||"\u2014"),o(2),s("ngIf",t.actor_id)("ngIfElse",l),o(4),c(" ",t.motivo||"\u2014"," ")}}function Xe(i,r){if(i&1&&(E(0),e(1,"div",102)(2,"table",103)(3,"thead",104)(4,"tr")(5,"th",105),a(6,"Fecha"),n(),e(7,"th",105),a(8,"Rol"),n(),e(9,"th",105),a(10,"Usuario"),n(),e(11,"th",105),a(12,"Evento"),n(),e(13,"th",105),a(14,"Vigencia"),n(),e(15,"th",105),a(16,"Actor"),n(),e(17,"th",105),a(18,"Motivo"),n()()(),e(19,"tbody"),p(20,Qe,27,22,"tr",106),n()()(),v()),i&2){let t=m(3);o(20),s("ngForOf",t.history())("ngForTrackBy",t.trackHistory)}}function Ye(i,r){if(i&1&&(E(0),p(1,Xe,21,2,"ng-container",26),v()),i&2){m();let t=_(49),l=m();o(),s("ngIf",l.history().length>0)("ngIfElse",t)}}function Ze(i,r){i&1&&(e(0,"div",115),x(1,"div",116),a(2," Cargando historial de movimientos... "),n())}function et(i,r){i&1&&(e(0,"div",117),a(1," No hay movimientos registrados en el historial para esta EP-Sede. "),n())}function tt(i,r){if(i&1){let t=A();E(0),p(1,Fe,5,1,"div",53),e(2,"div",54)(3,"div",55)(4,"div",56)(5,"div")(6,"div",57),a(7," Movimientos registrados "),n(),e(8,"div",58),a(9),n()(),e(10,"div",59),h(),e(11,"svg",60),x(12,"path",61),n()()()(),w(),e(13,"div",55)(14,"div",57),a(15," Coordinador actual "),n(),e(16,"div",62),a(17),n(),e(18,"div",63),a(19," Desde: "),e(20,"span",64),a(21),n()()(),e(22,"div",55)(23,"div",57),a(24," Encargado actual "),n(),e(25,"div",62),a(26),n(),e(27,"div",63),a(28," Desde: "),e(29,"span",64),a(30),n()()()(),p(31,We,60,24,"ng-container",26)(32,$e,11,0,"ng-template",null,4,S),e(34,"section",65)(35,"div",66)(36,"div")(37,"div",28),a(38," Historial de staff "),n(),e(39,"h2",44),a(40," Movimientos recientes de coordinadores y encargados "),n()(),e(41,"button",67),R("click",function(){C(t);let d=m();return I(d.reloadAll())}),h(),e(42,"svg",68),x(43,"path",69),n(),a(44," Recargar "),n()(),p(45,Ye,2,2,"ng-container",26)(46,Ze,3,0,"ng-template",null,5,S)(48,et,2,0,"ng-template",null,6,S),n(),v()}if(i&2){let t,l,d,u,N=_(33),M=_(47),f=m();o(),s("ngIf",f.errorMsg()),o(8),c(" ",f.history().length," "),o(8),c(" ",((t=f.staff())==null||t.COORDINADOR==null?null:t.COORDINADOR.user)||"Sin coordinador"," "),o(4),c(" ",((l=f.staff())==null||l.COORDINADOR==null?null:l.COORDINADOR.vigente_desde)||"\u2014"," "),o(5),c(" ",((d=f.staff())==null||d.ENCARGADO==null?null:d.ENCARGADO.user)||"Sin encargado"," "),o(4),c(" ",((u=f.staff())==null||u.ENCARGADO==null?null:u.ENCARGADO.vigente_desde)||"\u2014"," "),o(),s("ngIf",!f.loadingCurrent())("ngIfElse",N),o(14),s("ngIf",!f.loadingHistory())("ngIfElse",M)}}function nt(i,r){i&1&&(E(0),a(1," Desasignar ahora "),v())}function it(i,r){i&1&&(e(0,"span",136),x(1,"span",137),a(2," Procesando... "),n())}function at(i,r){if(i&1){let t=A();e(0,"div",118)(1,"div",119)(2,"div",120)(3,"div")(4,"h3",121),a(5," Confirmar desasignaci\xF3n "),n(),e(6,"p",122),a(7," Esta acci\xF3n suspender\xE1 al titular actual del rol seleccionado en esta EP-Sede. "),n()(),e(8,"button",123),R("click",function(){C(t);let d=m();return I(d.cancelUnassign())}),h(),e(9,"svg",68),x(10,"path",124),n()()(),w(),e(11,"div",125),a(12," Revisa que este cambio est\xE9 alineado con las directivas acad\xE9micas antes de confirmarlo. "),n(),e(13,"div",126)(14,"div",127)(15,"span"),a(16,"EP-Sede"),n(),e(17,"span",128),a(18),n()(),e(19,"div",127)(20,"span"),a(21,"Rol a desasignar"),n(),e(22,"span",129),a(23),n()()(),e(24,"div",130)(25,"label",131),a(26," Motivo (opcional) "),n(),e(27,"textarea",132),q("ngModelChange",function(d){C(t);let u=m();return z(u.unassignMotivo,d)||(u.unassignMotivo=d),I(d)}),n()(),e(28,"div",133)(29,"button",134),R("click",function(){C(t);let d=m();return I(d.cancelUnassign())}),a(30," Cancelar "),n(),e(31,"button",135),R("click",function(){C(t);let d=m();return I(d.confirmUnassign())}),p(32,nt,2,0,"ng-container",26)(33,it,3,0,"ng-template",null,12,S),n()()()()}if(i&2){let t=_(34),l=m();o(18),c("#",l.epSedeId()),o(5),k(l.unassignRole),o(4),B("ngModel",l.unassignMotivo),o(2),s("disabled",l.unassignSubmitting),o(2),s("disabled",l.unassignSubmitting),o(),s("ngIf",!l.unassignSubmitting)("ngIfElse",t)}}var O=class O{constructor(){this.api=D(ue);this.route=D(ne);this.router=D(ie);this.destroyRef=D(H);this.loader=D(le);this.context=b(null);this.contextLoading=b(!1);this.canManageCoordinador=y(()=>!!this.context()?.can_manage_coordinador);this.canManageEncargado=y(()=>!!this.context()?.can_manage_encargado);this.isAdmin=y(()=>this.context()?.panel_mode==="ADMIN");this.isCoordinator=y(()=>this.context()?.panel_mode==="COORDINADOR");this.epSedes=y(()=>this.context()?.ep_sedes??[]);this.currentEpSedeLabel=y(()=>{let r=this.epSedeId();return r?this.epSedes().find(l=>l.id===r)?.label??null:null});this.epSedeId=b(null);this.epSedeIdInput=b(null);this.routeEpSedeId=null;this.loadingCurrent=b(!1);this.loadingHistory=b(!1);this.errorMsg=b(null);this.currentPayload=b(null);this.historyPayload=b(null);this.staff=y(()=>this.currentPayload()?.staff??null);this.history=y(()=>this.historyPayload()?.history??[]);this.hasData=y(()=>!!this.staff()||this.history().length>0);this.unassignRole=null;this.unassignMotivo="";this.unassignSubmitting=!1;this.trackHistory=(r,t)=>t.id}get unassignDialogOpen(){return this.unassignRole!==null}ngOnInit(){this.route.paramMap.pipe(re(this.destroyRef)).subscribe(r=>{let t=r.get("epSedeId"),l=t?Number(t):NaN;this.routeEpSedeId=Number.isFinite(l)&&l>0?l:null,this.resolveEpSedeFromContextAndRoute()}),this.loadContext()}async loadContext(){this.contextLoading.set(!0),this.loader.show("Cargando contexto de staff...");try{let r=await P(this.api.obtenerContextoPanel());r.ok?this.context.set(r.data):(this.context.set(null),this.errorMsg.set(r.message||"No se pudo obtener el contexto de staff."))}catch(r){console.error(r);let t=r instanceof Error?r.message:"No se pudo obtener el contexto de staff.";this.context.set(null),this.errorMsg.set(t)}finally{this.contextLoading.set(!1),this.loader.hide(),this.resolveEpSedeFromContextAndRoute()}}resolveEpSedeFromContextAndRoute(){let r=this.context(),t=this.routeEpSedeId;if(!r&&this.contextLoading())return;let l=null;if(r){let u=r.ep_sede_id;this.isAdmin()?l=t??u:l=u}else l=t??null;let d=this.epSedeId();this.epSedeId.set(l),l?(this.epSedeIdInput.set(l),(d!==l||!this.currentPayload())&&this.reloadAll()):(this.epSedeIdInput.set(null),this.currentPayload.set(null),this.historyPayload.set(null))}async reloadAll(){let r=this.epSedeId();if(r){this.errorMsg.set(null),this.loadingCurrent.set(!0),this.loadingHistory.set(!0),this.loader.show("Cargando informaci\xF3n de staff...");try{let[t,l]=await Promise.all([P(this.api.obtenerStaffActual(r)),P(this.api.obtenerHistorialStaff(r))]);t.ok?this.currentPayload.set(t.data):(this.currentPayload.set(null),this.errorMsg.set(t.message||"Error al cargar el staff actual.")),l.ok?this.historyPayload.set(l.data):(this.historyPayload.set(null),this.errorMsg()||this.errorMsg.set(l.message||"Error al cargar el historial."))}catch(t){console.error(t);let l=t instanceof Error?t.message:"No se pudo cargar la informaci\xF3n de staff.";this.errorMsg.set(l),this.currentPayload.set(null),this.historyPayload.set(null)}finally{this.loadingCurrent.set(!1),this.loadingHistory.set(!1),this.loader.hide()}}}onSelectEpSedeFromList(r){let t=r.target.value;if(!t)return;let l=Number(t);!Number.isFinite(l)||l<=0||(this.errorMsg.set(null),this.router.navigate(["/staff/ep-sede",l]))}goToEpSedeFromInput(){if(!this.isAdmin()){this.errorMsg.set("Como coordinador solo puedes gestionar la EP-Sede asignada en tu sesi\xF3n.");return}let r=this.epSedeIdInput();if(r==null){this.errorMsg.set("Ingresa un ID de EP-Sede.");return}let t=Number(r);if(!Number.isFinite(t)||t<=0){this.errorMsg.set("Ingresa un ID de EP-Sede v\xE1lido.");return}this.errorMsg.set(null),this.router.navigate(["/staff/ep-sede",t])}openUnassign(r){if(!this.canManageCoordinador()&&r==="COORDINADOR"){this.errorMsg.set("No est\xE1s autorizado para desasignar al coordinador.");return}this.unassignRole=r,this.unassignMotivo="",this.errorMsg.set(null)}cancelUnassign(){this.unassignSubmitting||(this.unassignRole=null,this.unassignMotivo="")}async confirmUnassign(){let r=this.epSedeId(),t=this.unassignRole;if(!r||!t)return;let l={role:t,motivo:this.unassignMotivo.trim()||void 0};this.unassignSubmitting=!0,this.loadingCurrent.set(!0),this.errorMsg.set(null),this.loader.show("Desasignando staff...");try{let d=await P(this.api.desasignarStaff(r,l));d.ok?(this.cancelUnassign(),await this.reloadAll()):this.errorMsg.set(d.message||"Error al desasignar staff.")}catch(d){console.error(d);let u=d instanceof Error?d.message:"Error al desasignar staff.";this.errorMsg.set(u)}finally{this.unassignSubmitting=!1,this.loadingCurrent.set(!1),this.loader.hide()}}formatStatus(r){switch(r){case"active":return"Activo";case"view_only":return"Solo lectura";case"suspended":return"Suspendido";default:return"\u2014"}}formatEvento(r){switch(r){case"ASSIGN":return"Asignaci\xF3n";case"UNASSIGN":return"Desasignaci\xF3n";case"REINSTATE":return"Reincorporaci\xF3n";case"DELEGATE":return"Delegaci\xF3n interina";case"AUTO_END":return"Fin autom\xE1tico";case"TRANSFER":return"Transferencia";default:return r}}};O.\u0275fac=function(t){return new(t||O)},O.\u0275cmp=j({type:O,selectors:[["app-ep-sede-staff-page"]],decls:34,vars:7,consts:[["contextLoadedTpl",""],["noEpSede",""],["notAdminBadge",""],["readonlyBadge",""],["loadingStaffTpl",""],["loadingHistoryTpl",""],["emptyHistoryTpl",""],["noCoord",""],["coordReadOnlyTpl",""],["noEnc",""],["encReadOnlyTpl",""],["sinActor",""],["desasignandoTpl",""],[1,"min-h-screen","bg-gradient-to-br","from-slate-50","via-emerald-50/30","to-slate-50"],[1,"mx-auto","max-w-6xl","px-4","py-8"],[1,"mb-8","flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"flex","items-start","gap-3"],[1,"mt-1","flex","h-11","w-11","items-center","justify-center","rounded-2xl","bg-emerald-600","text-white","shadow-lg","shadow-emerald-500/30"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 10c0 3.866-3.582 7-8 7s-8-3.134-8-7a8 8 0 1116 0z"],[1,"text-[11px]","font-semibold","uppercase","tracking-wide","text-emerald-700"],[1,"mt-0.5","text-2xl","sm:text-3xl","font-bold","tracking-tight","text-slate-900"],[1,"mt-1","text-sm","text-slate-600","max-w-xl"],[1,"mt-2","inline-flex","items-center","gap-2","rounded-full","bg-slate-900/90","px-3","py-1","text-[11px]","text-white"],[1,"h-1.5","w-1.5","rounded-full","bg-emerald-400"],[4,"ngIf","ngIfElse"],[1,"rounded-2xl","border","border-white/70","bg-white/90","px-4","py-3","shadow-sm","backdrop-blur-sm","text-right","space-y-1"],[1,"text-[11px]","uppercase","tracking-wide","text-slate-500"],[1,"text-right"],[1,"text-[11px]","text-slate-400"],[1,"rounded","bg-slate-100","px-1.5","py-0.5","font-mono","text-[11px]"],["class","mb-8",4,"ngIf"],[4,"ngIf"],["class","fixed inset-0 z-40 flex items-center justify-center bg-slate-900/40 px-4",4,"ngIf"],[1,"inline-flex","items-center","gap-2"],[1,"h-3","w-3","animate-spin","rounded-full","border","border-white/40","border-t-transparent"],[1,"font-semibold"],[1,"text-xl","font-semibold","text-slate-900"],["class","mt-0.5 text-[11px] font-medium text-emerald-700",4,"ngIf"],[1,"mt-0.5","text-[11px]","font-medium","text-emerald-700"],[1,"text-base","font-medium","text-slate-400"],[1,"mb-8"],[1,"rounded-2xl","border","border-dashed","border-emerald-300/80","bg-white/80","p-6","text-center","shadow-sm","backdrop-blur-sm","space-y-4"],[1,"text-lg","font-semibold","text-slate-900"],[1,"text-sm","text-slate-600","max-w-xl","mx-auto"],["class","mt-2 space-y-2",4,"ngIf"],[1,"mt-2","space-y-2"],[1,"text-xs","font-medium","text-slate-600"],[1,"w-full","sm:w-80","rounded-lg","border","border-slate-200","px-3","py-2","text-sm","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","mb-6 rounded-xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm text-red-800 flex gap-2",4,"ngIf"],[1,"mb-6","grid","grid-cols-1","gap-4","sm:grid-cols-3"],[1,"rounded-2xl","border","border-white/70","bg-white/90","p-4","shadow-sm","backdrop-blur-sm"],[1,"flex","items-center","justify-between"],[1,"text-[11px]","uppercase","tracking-wide","text-slate-400"],[1,"mt-1","text-2xl","font-semibold","text-slate-900"],[1,"flex","h-9","w-9","items-center","justify-center","rounded-xl","bg-emerald-50","text-emerald-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10m-9 4h6m-9 4h12a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-1","text-sm","font-medium","text-slate-900"],[1,"mt-1","text-[11px]","text-slate-500"],[1,"font-medium"],[1,"mb-6","rounded-2xl","border","border-white/70","bg-white/90","p-5","shadow-sm","backdrop-blur-sm"],[1,"mb-4","flex","items-center","justify-between","gap-3"],["type","button",1,"inline-flex","items-center","gap-1","rounded-lg","border","border-slate-200","bg-white","px-3","py-1.5","text-xs","font-medium","text-slate-700","transition","hover:bg-slate-50",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v6h6M20 20v-6h-6M5 19a9 9 0 0014.36-1.36M19 5A9 9 0 004.64 6.36"],[1,"mb-6","rounded-xl","border","border-red-200","bg-red-50/90","px-4","py-3","text-sm","text-red-800","flex","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mb-8","grid","grid-cols-1","gap-4","md:grid-cols-2"],[1,"flex","flex-col","gap-4","rounded-2xl","border","border-white/70","bg-white/90","p-5","shadow-sm","transition","hover:shadow-md"],[1,"flex","items-start","justify-between","gap-3"],[1,"flex","items-center","gap-1","text-[11px]","uppercase","tracking-wide","text-slate-500"],[1,"h-1.5","w-1.5","rounded-full","bg-emerald-500"],[1,"mt-1","text-lg","font-semibold","text-slate-900"],[1,"mt-1","text-xs","text-slate-500","max-w-xs"],[1,"flex","flex-col","items-end","gap-1"],[1,"inline-flex","items-center","rounded-full","px-2","py-0.5","text-[11px]","font-medium",3,"ngClass"],[1,"text-[11px]","text-slate-500"],[1,"flex","flex-wrap","items-center","justify-between","gap-3","text-xs","text-slate-500"],[1,"flex","items-center","gap-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"flex","flex-wrap","gap-2"],[1,"h-1.5","w-1.5","rounded-full","bg-teal-500"],[1,"font-mono","font-medium"],[1,"italic","text-slate-400"],["type","button",1,"inline-flex","items-center","gap-2","rounded-lg","bg-slate-900","px-3","py-1.5","text-xs","font-medium","text-white","shadow-sm","transition","hover:bg-black","hover:shadow-md",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-3.5","w-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["type","button",1,"inline-flex","items-center","gap-1","rounded-lg","border","border-red-200","bg-white","px-3","py-1.5","text-xs","font-medium","text-red-700","transition","hover:bg-red-50","disabled:cursor-not-allowed","disabled:opacity-50",3,"click","disabled"],["type","button",1,"inline-flex","items-center","gap-2","rounded-lg","bg-gradient-to-r","from-emerald-600","to-teal-600","px-3","py-1.5","text-xs","font-medium","text-white","shadow-sm","transition","hover:from-emerald-700","hover:to-teal-700","hover:shadow-md",3,"routerLink"],[1,"inline-flex","items-center","gap-1","rounded-lg","border","border-amber-200","bg-white","px-3","py-1.5","text-xs","font-medium","text-amber-700","transition","hover:bg-amber-50",3,"routerLink","queryParams"],[1,"animate-pulse","rounded-2xl","border","border-slate-100","bg-white/80","p-5"],[1,"mb-4","h-4","w-28","rounded","bg-slate-100"],[1,"mb-2","h-5","w-48","rounded","bg-slate-100"],[1,"mb-6","h-3","w-64","rounded","bg-slate-100"],[1,"h-8","w-full","rounded","bg-slate-100"],[1,"overflow-x-auto"],[1,"min-w-full","text-left","text-xs","text-slate-700"],[1,"border-b","border-slate-100","text-[11px]","uppercase","text-slate-500"],[1,"py-2","pr-4"],["class","border-b border-slate-50 text-[11px] hover:bg-emerald-50/40",4,"ngFor","ngForOf","ngForTrackBy"],[1,"border-b","border-slate-50","text-[11px]","hover:bg-emerald-50/40"],[1,"py-2","pr-4","text-slate-600"],[1,"py-2","pr-4","font-semibold"],[1,"inline-flex","rounded-full","px-2","py-0.5",3,"ngClass"],[1,"py-2","pr-4","text-slate-700"],[1,"inline-flex","rounded-full","px-2","py-0.5","font-medium",3,"ngClass"],[1,"py-2","pr-4","text-slate-600","max-w-xs"],[1,"text-slate-400"],[1,"flex","flex-col","items-center","justify-center","py-10","text-sm","text-slate-500"],[1,"mb-3","h-6","w-6","animate-spin","rounded-full","border-2","border-emerald-600","border-t-transparent"],[1,"py-10","text-center","text-sm","text-slate-500"],[1,"fixed","inset-0","z-40","flex","items-center","justify-center","bg-slate-900/40","px-4"],[1,"w-full","max-w-md","rounded-2xl","bg-white","p-6","shadow-xl"],[1,"mb-3","flex","items-start","justify-between","gap-2"],[1,"text-base","font-semibold","text-slate-900"],[1,"mt-1","text-xs","text-slate-500"],["type","button",1,"rounded-full","p-1","text-slate-400","hover:bg-slate-100","hover:text-slate-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-4","rounded-lg","bg-amber-50","px-3","py-2","text-[11px]","text-amber-800","border","border-amber-100"],[1,"mb-4","space-y-2","text-sm"],[1,"flex","items-center","justify-between","text-xs","text-slate-600"],[1,"font-mono","font-medium","text-slate-900"],[1,"font-medium","text-slate-900"],[1,"mb-4"],[1,"mb-1","block","text-xs","font-medium","text-slate-600"],["rows","3","placeholder","Ej. Cambio de responsabilidades, t\xE9rmino de contrato, etc.",1,"w-full","rounded-lg","border","border-slate-200","px-3","py-2","text-sm","text-slate-800","shadow-sm","focus:border-emerald-500","focus:outline-none","focus:ring-2","focus:ring-emerald-500/30",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-2"],["type","button",1,"rounded-lg","border","border-slate-200","bg-white","px-4","py-1.5","text-xs","font-medium","text-slate-700","hover:bg-slate-50","disabled:cursor-not-allowed","disabled:opacity-60",3,"click","disabled"],["type","button",1,"inline-flex","items-center","gap-2","rounded-lg","bg-red-600","px-4","py-1.5","text-xs","font-medium","text-white","shadow-sm","hover:bg-red-700","hover:shadow-md","disabled:cursor-not-allowed","disabled:opacity-60",3,"click","disabled"],[1,"inline-flex","items-center","gap-1"],[1,"h-3","w-3","animate-spin","rounded-full","border-2","border-white","border-t-transparent"]],template:function(t,l){if(t&1&&(e(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17),h(),e(5,"svg",18),x(6,"path",19)(7,"path",20),n()(),w(),e(8,"div")(9,"p",21),a(10," Panel de administraci\xF3n "),n(),e(11,"h1",22),a(12," Staff acad\xE9mico por EP-Sede "),n(),e(13,"p",23),a(14," Consulta y administra coordinadores y encargados titulares de cada EP-Sede, junto con el historial de movimientos. "),n(),e(15,"div",24),x(16,"span",25),p(17,Ie,4,0,"ng-container",26)(18,Oe,3,2,"ng-template",null,0,S),n()()(),e(20,"div",27)(21,"div",28),a(22," EP-Sede actual "),n(),e(23,"div",29),p(24,Me,4,2,"ng-container",26)(25,Pe,2,0,"ng-template",null,1,S),n(),e(27,"div",30),a(28," Ruta base: "),e(29,"code",31),a(30," /staff/ep-sede/:epSedeId "),n()()()(),p(31,Ge,7,1,"div",32)(32,tt,50,10,"ng-container",33),n(),p(33,at,35,7,"div",34),n()),t&2){let d=_(19),u=_(26);o(17),s("ngIf",l.contextLoading())("ngIfElse",d),o(7),s("ngIf",l.epSedeId())("ngIfElse",u),o(7),s("ngIf",l.isAdmin()&&!l.epSedeId()),o(),s("ngIf",l.epSedeId()),o(),s("ngIf",l.unassignDialogOpen)}},dependencies:[te,X,Y,Z,pe,me,ce,oe,de,se,ae,ee],encapsulation:2});var xe=O;export{xe as EpSedeStaffPage};
