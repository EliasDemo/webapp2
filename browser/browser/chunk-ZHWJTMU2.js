import{a as d}from"./chunk-LWNR2F3M.js";import{B as a,C as m}from"./chunk-FE5WSVYG.js";import{O as l,S as p,o as n}from"./chunk-63T4HJ2B.js";var e=class e{constructor(o,r){this.http=o;let t=r??"/api";this.baseUrl=t.endsWith("/")?t.slice(0,-1):t}autoHorasUrl(){return`${this.baseUrl}/reportes/horas`}paramHorasUrl(o){return`${this.baseUrl}/ep-sedes/${o}/reportes/horas`}listarHorasPorPeriodoAuto(o){let r=this.toHorasParams(o);return this.http.get(this.autoHorasUrl(),{params:r}).pipe(n(t=>({ok:!0,data:t?.data??[],meta:t?.meta})))}listarHorasPorPeriodo(o,r){let t=this.toHorasParams(r);return this.http.get(this.paramHorasUrl(o),{params:t}).pipe(n(s=>({ok:!0,data:s?.data??[],meta:s?.meta})))}exportarHorasPorPeriodoAuto(o){let r=this.toHorasParams(o);return this.http.get(`${this.autoHorasUrl()}/export`,{params:r,responseType:"blob"})}exportarHorasPorPeriodo(o,r){let t=this.toHorasParams(r);return this.http.get(`${this.paramHorasUrl(o)}/export`,{params:t,responseType:"blob"})}obtenerMiAvancePorProyecto(o){let r=this.toAvanceParams(o),t=`${this.baseUrl}/reportes/horas/mias/por-proyecto`;return this.http.get(t,{params:r}).pipe(n(s=>{let i=s?.ok??!0,u=s?.data??s;return{ok:i,data:u}}))}obtenerMisHorasRaw(){let o=`${this.baseUrl}/reportes/horas/mias`;return this.http.get(o)}obtenerReporteHorasPorExpediente(o){let r=`${this.baseUrl}/reportes/horas/expedientes/${o}`;return this.http.get(r)}descargarPlantillaHorasHistoricas(o){let r=new a;return o?.periodos?.length&&o.periodos.forEach(t=>{t&&(r=r.append("periodos[]",String(t)))}),o?.ultimos!=null&&(r=r.set("ultimos",String(o.ultimos))),this.http.get(`${this.baseUrl}/vm/import/historico-horas/plantilla`,{params:r,responseType:"blob"})}importarHorasHistoricas(o,r){let t=`${this.baseUrl}/vm/import/historico-horas`,s=new FormData;return s.append("file",o),r?.ep_sede_id!=null&&s.append("ep_sede_id",String(r.ep_sede_id)),r?.replace!=null&&s.append("replace",r.replace?"1":"0"),this.http.post(t,s)}consultarEstadoHorasHistoricas(o,r){let t=`${this.baseUrl}/vm/import/historico-horas/status`,s=new a;return o!=null&&(s=s.set("ep_sede_id",String(o))),Array.isArray(r)&&r.length&&r.forEach(i=>{i&&(s=s.append("periodos[]",String(i)))}),this.http.get(t,{params:s})}toHorasParams(o){let r=new a;if(!o)return r;if(Array.isArray(o.periodos)&&o.periodos.length&&o.periodos.forEach(t=>{t!=null&&t!==""&&(r=r.append("periodos[]",String(t)))}),o.ultimos!=null&&(r=r.set("ultimos",String(o.ultimos))),o.unidad&&(r=r.set("unidad",o.unidad)),o.estado&&(r=r.set("estado",o.estado)),o.orden&&(r=r.set("orden",o.orden)),o.dir&&(r=r.set("dir",o.dir)),o.solo_con_horas_periodos!==void 0){let t=typeof o.solo_con_horas_periodos=="boolean"?o.solo_con_horas_periodos?"1":"0":o.solo_con_horas_periodos==="1"?"1":"0";r=r.set("solo_con_horas_periodos",t)}return r}toAvanceParams(o){let r=new a;return o&&(o.estado&&(r=r.set("estado",o.estado)),o.periodo_id!=null&&(r=r.set("periodo_id",String(o.periodo_id))),o.debug!=null&&(r=r.set("debug",o.debug?"1":"0"))),r}};e.\u0275fac=function(r){return new(r||e)(p(m),p(d,8))},e.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"});var c=e;export{c as a};
