import{a as K}from"./chunk-SJXHNKEE.js";import{A as Y,b as j,d as N,e as T,g as D,i as A,j as G,r as L,s as H,t as z,y as R}from"./chunk-J2XPQYKK.js";import"./chunk-LWNR2F3M.js";import{f as V}from"./chunk-5VQTM22E.js";import{j as B,k as I,u as O}from"./chunk-FE5WSVYG.js";import{$ as c,$a as e,Ka as y,Pa as f,T as E,Y as k,Z as S,_ as s,_a as d,ab as t,bb as m,fa as x,gb as P,kb as u,mb as h,n as C,vb as i,wb as b,xb as _,ya as a,yb as F}from"./chunk-63T4HJ2B.js";import{a as w,b as M}from"./chunk-IMPBB4AK.js";function q(l,o){if(l&1&&(e(0,"div",43)(1,"div",36),s(),e(2,"svg",44),m(3,"path",45),t(),c(),e(4,"div")(5,"h3",46),i(6,"Error al crear escuela profesional"),t(),e(7,"p",47),i(8),t()()()()),l&2){let n=h();a(8),b(n.error())}}function U(l,o){if(l&1&&(e(0,"option",22),i(1),t()),l&2){let n=o.$implicit;d("ngValue",n.id),a(),F(" ",n.nombre," (",n.codigo,") ")}}function J(l,o){if(l&1&&(e(0,"div",48)(1,"div",49)(2,"div",50),s(),e(3,"svg",51),m(4,"path",52),t()(),c(),e(5,"div",53)(6,"div",54),i(7),t(),e(8,"div",55)(9,"span",56),i(10),t(),e(11,"span",57),i(12,"\u2022"),t(),e(13,"span"),i(14),t()()()()()),l&2){let n=h();a(7),b(n.form().nombre),a(3),_(" ",n.form().codigo," "),a(4),_("Facultad: ",n.getFacultadNombre())}}function Q(l,o){l&1&&(s(),e(0,"svg",58),m(1,"path",59),t())}function W(l,o){l&1&&(s(),e(0,"svg",30),m(1,"path",60),t())}function X(l,o){if(l&1){let n=P();e(0,"div",61),u("click",function(){let p=k(n).$implicit,g=h();return S(g.usarEjemplo(p))}),e(1,"div",62),i(2),t(),e(3,"div",63),i(4),t(),e(5,"div",64),i(6),t()()}if(l&2){let n=o.$implicit;a(2),b(n.codigo),a(2),b(n.nombre),a(2),b(n.facultad)}}var v=class v{constructor(){this.api=E(K);this.router=E(V);this.form=x({codigo:"",nombre:"",facultad_id:null});this.loading=x(!1);this.error=x(null);this.facs=x([]);this.trackByFac=(o,n)=>n.id;this.bootstrap()}async bootstrap(){try{let o=await C(this.api.listarFacultades(void 0,1,500));this.facs.set(o.data?.items??[])}catch{this.error.set("No se pudieron cargar las facultades")}}set(o,n){this.form.update(r=>M(w({},r),{[o]:n}))}async guardar(){let o=this.form();if(!o.codigo.trim()||!o.nombre.trim()||!o.facultad_id){this.error.set("Completa c\xF3digo, nombre y selecciona facultad");return}this.loading.set(!0),this.error.set(null);try{await C(this.api.crearEscuela({facultad_id:o.facultad_id,codigo:o.codigo.trim(),nombre:o.nombre.trim()})),this.router.navigate(["/ad/sedes"])}catch(n){this.error.set(n?.error?.message??"No se pudo crear la escuela profesional")}finally{this.loading.set(!1)}}volver(){this.router.navigate(["/ad/sedes"])}ejemplosEP(){return[{codigo:"DER",nombre:"Derecho",facultad:"Facultad de Derecho"},{codigo:"MED",nombre:"Medicina",facultad:"Facultad de Medicina"},{codigo:"ADM",nombre:"Administraci\xF3n",facultad:"Facultad de Ciencias Empresariales"},{codigo:"ING",nombre:"Ingenier\xEDa Civil",facultad:"Facultad de Ingenier\xEDa"}]}usarEjemplo(o){this.set("codigo",o.codigo),this.set("nombre",o.nombre)}getFacultadNombre(){let o=this.form().facultad_id,n=this.facs().find(r=>r.id===o);return n?n.nombre:""}};v.\u0275fac=function(n){return new(n||v)},v.\u0275cmp=y({type:v,selectors:[["app-ep-create-page"]],decls:74,vars:13,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-50","via-blue-50/20","to-indigo-50/10","py-8"],[1,"max-w-2xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-8","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-6"],[1,"flex","items-center","gap-4"],[1,"p-3","bg-white","rounded-2xl","shadow-lg","border","border-slate-200/60","backdrop-blur-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-[#003B5C]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 14l9-5-9-5-9 5 9 5z"],[1,"text-3xl","font-bold","bg-gradient-to-r","from-[#003B5C]","to-[#4A7729]","bg-clip-text","text-transparent"],[1,"text-slate-600","mt-2"],[1,"group","inline-flex","items-center","justify-center","px-6","py-3","rounded-xl","border","border-slate-300","bg-white","text-slate-700","font-semibold","shadow","transition-all","duration-300","hover:bg-slate-50","hover:shadow-md","hover:scale-105","active:scale-95",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","group-hover:-translate-x-1","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["class","mb-6 rounded-2xl border border-red-200 bg-red-50/90 backdrop-blur-sm p-6 shadow-lg transform transition-all duration-300 animate-in slide-in-from-top",4,"ngIf"],[1,"bg-white/90","backdrop-blur-sm","rounded-2xl","border","border-slate-200/60","shadow-xl","p-6","space-y-6","transform","transition-all","duration-300","hover:shadow-2xl",3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"block","text-sm","font-semibold","text-slate-700"],["name","codigo","placeholder","Ej: DER, MED, ADM","maxlength","10",1,"w-full","border","border-slate-300","rounded-xl","px-4","py-3.5","text-slate-700","bg-white","placeholder-slate-400","focus:outline-none","focus:ring-2","focus:ring-[#003B5C]","focus:border-transparent","transition-all","duration-200","shadow-sm",3,"ngModelChange","ngModel"],[1,"text-xs","text-slate-500"],["name","nombre","placeholder","Ej: Derecho, Medicina, Administraci\xF3n",1,"w-full","border","border-slate-300","rounded-xl","px-4","py-3.5","text-slate-700","bg-white","placeholder-slate-400","focus:outline-none","focus:ring-2","focus:ring-[#003B5C]","focus:border-transparent","transition-all","duration-200","shadow-sm",3,"ngModelChange","ngModel"],[1,"relative"],["name","facultad_id",1,"w-full","border","border-slate-300","rounded-xl","px-4","py-3.5","text-slate-700","bg-white","focus:outline-none","focus:ring-2","focus:ring-[#003B5C]","focus:border-transparent","transition-all","duration-200","shadow-sm","appearance-none",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf","ngForTrackBy"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-slate-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","p-4 bg-slate-50/80 rounded-xl border border-slate-200/60 transition-all duration-300 animate-in fade-in",4,"ngIf"],[1,"flex","items-center","justify-end","gap-3","pt-4","border-t","border-slate-200/60"],["type","button",1,"group","inline-flex","items-center","justify-center","px-6","py-3.5","rounded-xl","border","border-slate-300","bg-white","text-slate-700","font-semibold","shadow","transition-all","duration-300","hover:bg-slate-50","hover:shadow-md","hover:scale-105","active:scale-95",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","group-hover:scale-110","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["type","submit",1,"group","inline-flex","items-center","justify-center","px-8","py-3.5","rounded-xl","bg-gradient-to-r","from-[#003B5C]","to-[#4A7729]","hover:from-[#003B5C]","hover:to-[#5a8a35]","text-white","font-semibold","shadow-lg","transition-all","duration-300","hover:shadow-xl","hover:scale-105","active:scale-95","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none",3,"disabled"],["class","w-4 h-4 mr-2 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","w-4 h-4 mr-2 group-hover:scale-110 transition-transform duration-200","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"mt-8","bg-white/80","backdrop-blur-sm","rounded-2xl","border","border-slate-200/60","p-6","shadow-lg"],[1,"flex","items-start","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[#003B5C]","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-[#003B5C]","font-semibold","mb-2"],[1,"text-sm","text-slate-600","space-y-1"],[1,"mt-6","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["class","bg-white/80 border border-slate-200 rounded-xl p-4 text-center hover:shadow-md transition-all duration-300 hover:scale-105 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"mb-6","rounded-2xl","border","border-red-200","bg-red-50/90","backdrop-blur-sm","p-6","shadow-lg","transform","transition-all","duration-300","animate-in","slide-in-from-top"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-red-800","font-semibold","mb-1"],[1,"text-red-700"],[1,"p-4","bg-slate-50/80","rounded-xl","border","border-slate-200/60","transition-all","duration-300","animate-in","fade-in"],[1,"flex","items-center","gap-3"],[1,"p-2","bg-white","rounded-lg","border","border-slate-200","shadow-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[#003B5C]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"flex-1"],[1,"text-sm","font-semibold","text-slate-900"],[1,"text-xs","text-slate-600","flex","items-center","gap-2","mt-1"],[1,"bg-[#003B5C]/10","text-[#003B5C]","px-2","py-1","rounded-full","font-medium"],[1,"text-slate-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 2v4m0 12v4m8-10h-4M6 12H2m15.364-7.364l-2.828 2.828M7.464 17.536l-2.828 2.828m12.728 0l-2.828-2.828M7.464 6.464L4.636 3.636"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"bg-white/80","border","border-slate-200","rounded-xl","p-4","text-center","hover:shadow-md","transition-all","duration-300","hover:scale-105","cursor-pointer",3,"click"],[1,"text-sm","font-semibold","text-[#003B5C]","mb-1"],[1,"text-xs","text-slate-600","truncate"],[1,"text-xs","text-slate-400","mt-1"]],template:function(n,r){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),s(),e(5,"svg",5),m(6,"path",6),t()(),c(),e(7,"div")(8,"h1",7),i(9," Crear Escuela Profesional "),t(),e(10,"p",8),i(11,"Registre una nueva escuela profesional en el cat\xE1logo acad\xE9mico"),t()()(),e(12,"button",9),u("click",function(){return r.volver()}),s(),e(13,"svg",10),m(14,"path",11),t(),i(15," Volver "),t()(),f(16,q,9,1,"div",12),c(),e(17,"form",13),u("ngSubmit",function(){return r.guardar()}),e(18,"div",14)(19,"div",15)(20,"label",16),i(21,"C\xF3digo EP"),t(),e(22,"input",17),u("ngModelChange",function(g){return r.set("codigo",g)}),t(),e(23,"p",18),i(24,"C\xF3digo \xFAnico (m\xE1x. 10 caracteres)"),t()(),e(25,"div",15)(26,"label",16),i(27,"Nombre Completo"),t(),e(28,"input",19),u("ngModelChange",function(g){return r.set("nombre",g)}),t(),e(29,"p",18),i(30,"Nombre completo de la carrera"),t()()(),e(31,"div",15)(32,"label",16),i(33,"Facultad"),t(),e(34,"div",20)(35,"select",21),u("ngModelChange",function(g){return r.set("facultad_id",g)}),e(36,"option",22),i(37,"\u2014 Selecciona una facultad \u2014"),t(),f(38,U,2,3,"option",23),t(),e(39,"div",24),s(),e(40,"svg",25),m(41,"path",26),t()()(),c(),e(42,"p",18),i(43,"Seleccione la facultad a la que pertenece esta escuela profesional"),t()(),f(44,J,15,3,"div",27),e(45,"div",28)(46,"button",29),u("click",function(){return r.volver()}),s(),e(47,"svg",30),m(48,"path",31),t(),i(49," Cancelar "),t(),c(),e(50,"button",32),f(51,Q,2,0,"svg",33)(52,W,2,0,"svg",34),i(53),t()()(),e(54,"div",35)(55,"div",36),s(),e(56,"svg",37),m(57,"path",38),t(),c(),e(58,"div")(59,"h3",39),i(60,"Informaci\xF3n importante sobre EP"),t(),e(61,"ul",40)(62,"li"),i(63,"\u2022 El c\xF3digo debe ser \xFAnico en toda la universidad"),t(),e(64,"li"),i(65,"\u2022 Use c\xF3digos cortos y representativos (ej: DER, MED, ADM)"),t(),e(66,"li"),i(67,"\u2022 El nombre debe ser completo y oficial de la carrera"),t(),e(68,"li"),i(69,"\u2022 Cada escuela profesional debe pertenecer a una facultad"),t(),e(70,"li"),i(71,"\u2022 Despu\xE9s de crear la EP, podr\xE1 asignarla a sedes universitarias"),t()()()()(),e(72,"div",41),f(73,X,7,3,"div",42),t()()()),n&2&&(a(16),d("ngIf",r.error()),a(6),d("ngModel",r.form().codigo),a(6),d("ngModel",r.form().nombre),a(7),d("ngModel",r.form().facultad_id),a(),d("ngValue",null),a(2),d("ngForOf",r.facs())("ngForTrackBy",r.trackByFac),a(6),d("ngIf",r.form().codigo&&r.form().nombre&&r.form().facultad_id),a(6),d("disabled",r.loading()||!r.form().codigo||!r.form().nombre||!r.form().facultad_id),a(),d("ngIf",r.loading()),a(),d("ngIf",!r.loading()),a(),_(" ",r.loading()?"Creando EP...":"Crear Escuela Profesional"," "),a(20),d("ngForOf",r.ejemplosEP()))},dependencies:[O,B,I,Y,G,H,z,j,L,N,T,R,A,D],styles:["[_nghost-%COMP%]{display:block}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fade-in-up{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse-slow{0%,to{opacity:.6}50%{opacity:1}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .6s ease-out}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-up .8s ease-out}.animate-pulse-slow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-slow 2s ease-in-out infinite}button[_ngcontent-%COMP%]:focus-visible, select[_ngcontent-%COMP%]:focus-visible, input[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px;border-radius:.5rem}*[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.loading-state[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f1f5f9 25%,#e2e8f0,#f1f5f9 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}"]});var $=v;export{$ as EpCreatePage};
