import{a as k}from"./chunk-G33XJ7AN.js";import"./chunk-LWNR2F3M.js";import{g as A}from"./chunk-5VQTM22E.js";import{j as T,k as F,u as N}from"./chunk-FE5WSVYG.js";import{$a as n,Gb as w,Ka as V,Ob as v,Pa as p,T as M,Tb as h,Y as S,Z as C,_a as d,ab as t,bb as c,eb as u,fa as _,fb as g,gb as y,kb as I,mb as m,n as P,rb as f,ub as E,vb as o,xb as s,ya as r,yb as D,zb as L}from"./chunk-63T4HJ2B.js";import"./chunk-IMPBB4AK.js";var O=i=>["/mis-eventos",i];function R(i,a){i&1&&(n(0,"div",23)(1,"div",24)(2,"div",25),c(3,"i",26),t(),n(4,"div")(5,"div",27),o(6," \xBFC\xF3mo me inscribo a un evento nuevo? "),t(),n(7,"ol",28)(8,"li"),o(9,"Ingresa al m\xF3dulo de eventos desde el men\xFA principal (cat\xE1logo de eventos)."),t(),n(10,"li"),o(11,"Busca el evento que te interese y revisa su informaci\xF3n."),t(),n(12,"li"),o(13,"Si el evento indica \u201Crequiere inscripci\xF3n\u201D y hay cupos, pulsa el bot\xF3n \u201CInscribirme\u201D."),t(),n(14,"li"),o(15,"Una vez inscrito, el evento aparecer\xE1 aqu\xED en \u201CMis eventos\u201D."),t()(),n(16,"p",29),o(17," Nota: algunos eventos pueden ser de asistencia libre y no aparecer\xE1n en este listado. "),t()()()())}function q(i,a){i&1&&(u(0),n(1,"div",30)(2,"div",31),c(3,"i",32),t(),n(4,"h2",33),o(5,"A\xFAn no tienes eventos inscritos"),t(),n(6,"p",34),o(7," Cuando te inscribas a un evento acad\xE9mico, aparecer\xE1 aqu\xED el detalle por per\xEDodo y estado. "),t()(),g())}function H(i,a){if(i&1&&(n(0,"p",62),o(1),t()),i&2){let e=m().$implicit;r(),s(" ",e.subtitulo," ")}}function B(i,a){if(i&1&&(n(0,"div"),o(1," Cupo m\xE1ximo: "),n(2,"span",59),o(3),t()()),i&2){let e=m().$implicit;r(3),s(" ",e.cupo_maximo," ")}}function U(i,a){if(i&1&&(n(0,"article",45)(1,"header",46)(2,"div",47)(3,"h3",48),o(4),t(),p(5,H,2,1,"p",49),t(),n(6,"div",50)(7,"span"),c(8,"i",51),o(9),t(),n(10,"span"),o(11),t()()(),n(12,"div",52)(13,"span",53),c(14,"i",54),o(15),t(),n(16,"span",53),c(17,"i",55),o(18),t(),n(19,"span",53),c(20,"i",56),o(21),t()(),n(22,"div",57)(23,"div",58)(24,"div"),o(25," Requiere inscripci\xF3n: "),n(26,"span",59),o(27),t()(),p(28,B,4,1,"div",36),t(),n(29,"button",60),c(30,"i",61),o(31," Ver detalle "),t()()()),i&2){let e=a.$implicit,l=m(6);r(4),s(" ",e.titulo," "),r(),d("ngIf",e.subtitulo),r(2),E(l.estadoEventoClass(e.estado)),r(2),s(" ",e.estado," "),r(),E(l.estadoParticipacionClass(e.participacion==null?null:e.participacion.estado)),r(),s(" ",(e.participacion==null?null:e.participacion.estado)||"\u2014"," "),r(4),s(" ",e.codigo||"\u2014"," "),r(3),s(" ",e.modalidad," "),r(3),s(" ",l.periodoEtiqueta(e.periodo)," "),r(6),s(" ",e.requiere_inscripcion?"S\xED":"No"," "),r(),d("ngIf",e.cupo_maximo!==null),r(),d("routerLink",w(14,O,e.id))}}function j(i,a){if(i&1&&(u(0),n(1,"div",43),p(2,U,32,16,"article",44),t(),g()),i&2){let e=m(5);r(2),d("ngForOf",e.eventosPeriodoActual())}}function z(i,a){i&1&&(n(0,"div",63),o(1," No tienes eventos en el per\xEDodo actual. Revisa el historial o inscr\xEDbete a nuevos eventos desde el cat\xE1logo. "),t())}function Z(i,a){if(i&1&&(n(0,"section",37)(1,"header",38)(2,"div",39)(3,"div",40),c(4,"i",41),t(),n(5,"div")(6,"h2",42),o(7),t(),n(8,"p",17),o(9),t()()()(),p(10,j,3,1,"ng-container",22)(11,z,2,0,"ng-template",null,3,v),t()),i&2){let e=a.ngIf,l=f(12),x=m(4);r(7),s(" Per\xEDodo actual: ",x.periodoEtiqueta(e)," "),r(2),D(" Estado: ",e.estado||"\u2014"," \xB7 ",e.total_eventos," evento(s) "),r(),d("ngIf",x.eventosPeriodoActual().length)("ngIfElse",l)}}function G(i,a){if(i&1&&(n(0,"p",62),o(1),t()),i&2){let e=m().$implicit;r(),s(" ",e.subtitulo," ")}}function J(i,a){if(i&1&&(n(0,"article",45)(1,"header",46)(2,"div",47)(3,"h4",48),o(4),t(),p(5,G,2,1,"p",49),t(),n(6,"div",50)(7,"span"),c(8,"i",51),o(9),t(),n(10,"span"),o(11),t()()(),n(12,"div",52)(13,"span",53),c(14,"i",54),o(15),t(),n(16,"span",53),c(17,"i",55),o(18),t()(),n(19,"div",57)(20,"div",58),o(21," Inscripci\xF3n: "),n(22,"span",59),o(23),t()(),n(24,"button",60),o(25," Ver detalle "),t()()()),i&2){let e=a.$implicit,l=m(7);r(4),s(" ",e.titulo," "),r(),d("ngIf",e.subtitulo),r(2),E(l.estadoEventoClass(e.estado)),r(2),s(" ",e.estado," "),r(),E(l.estadoParticipacionClass(e.participacion==null?null:e.participacion.estado)),r(),s(" ",(e.participacion==null?null:e.participacion.estado)||"\u2014"," "),r(4),s(" ",e.codigo||"\u2014"," "),r(3),s(" ",e.modalidad," "),r(5),s(" ",e.requiere_inscripcion?"Con inscripci\xF3n":"Libre"," "),r(),d("routerLink",w(12,O,e.id))}}function K(i,a){if(i&1&&(u(0),n(1,"div",43),p(2,J,26,14,"article",44),t(),g()),i&2){let e=m().$implicit,l=m(5);r(2),d("ngForOf",l.eventosPorPeriodo(e.id))}}function Q(i,a){i&1&&(n(0,"div",69),o(1," No se encontraron eventos en este per\xEDodo. "),t())}function W(i,a){if(i&1&&(n(0,"section")(1,"h3",68),o(2),t(),p(3,K,3,1,"ng-container",22)(4,Q,2,0,"ng-template",null,4,v),t()),i&2){let e=a.$implicit,l=f(5),x=m(5);r(2),L(" Per\xEDodo ",x.periodoEtiqueta(e)," \xB7 ",e.estado||"\u2014"," \xB7 ",e.total_eventos," evento(s) "),r(),d("ngIf",x.eventosPorPeriodo(e.id).length)("ngIfElse",l)}}function X(i,a){if(i&1&&(n(0,"section")(1,"header",64)(2,"div",40),c(3,"i",65),t(),n(4,"div")(5,"h2",42),o(6,"Historial de eventos"),t(),n(7,"p",17),o(8," Eventos de per\xEDodos anteriores donde participaste. "),t()()(),n(9,"div",66),p(10,W,6,5,"section",67),t()()),i&2){let e=m(4);r(10),d("ngForOf",e.historicoPeriodos())}}function Y(i,a){if(i&1&&p(0,Z,13,5,"section",35)(1,X,11,1,"section",36),i&2){let e=m(3);d("ngIf",e.currentPeriodo()),r(),d("ngIf",e.tieneHistorial())}}function ee(i,a){if(i&1&&(u(0),p(1,q,8,0,"ng-container",22)(2,Y,2,2,"ng-template",null,2,v),g()),i&2){let e=f(3),l=m(2);r(),d("ngIf",l.totalEventos()===0)("ngIfElse",e)}}function te(i,a){if(i&1&&(u(0),p(1,ee,4,2,"ng-container",22),g()),i&2){let e=m(),l=f(30);r(),d("ngIf",!e.error())("ngIfElse",l)}}function ne(i,a){i&1&&(n(0,"div",70)(1,"div",71),c(2,"div",72)(3,"div",73),t(),n(4,"p",74),o(5," Cargando tus eventos\u2026 "),t()())}function ie(i,a){if(i&1){let e=y();n(0,"div",75)(1,"div",76),c(2,"i",77),t(),n(3,"h2",33),o(4," No se pudo cargar la informaci\xF3n "),t(),n(5,"p",78),o(6),t(),n(7,"button",79),I("click",function(){S(e);let x=m();return C(x.cargarMisEventos())}),c(8,"i",80),o(9," Reintentar "),t()()}if(i&2){let e=m();r(6),s(" ",e.error()," ")}}var b=class b{constructor(){this.api=M(k);this.loading=_(!0);this.error=_(null);this.periodos=_([]);this.eventos=_([]);this.showHelp=_(!1);this.currentPeriodo=h(()=>{let a=this.periodos();return a.length?a.find(l=>(l.estado||"").toUpperCase()==="EN_CURSO")??a[0]:null});this.eventosPeriodoActual=h(()=>{let a=this.currentPeriodo();return a?this.eventos().filter(e=>e.periodo_id===a.id):[]});this.historicoPeriodos=h(()=>{let a=this.currentPeriodo(),e=this.periodos();return!e.length||!a?[]:e.filter(l=>l.id!==a.id)});this.totalEventos=h(()=>this.eventos().length);this.cargarMisEventos()}async cargarMisEventos(){this.loading.set(!0),this.error.set(null);try{let a=await P(this.api.listarMisEventos({estado_participacion:"TODOS"}));if(!a||a.ok===!1){this.error.set(a?.message||"No se pudieron cargar tus eventos.");return}let e=a.data||{periodos:[],eventos:[]};this.periodos.set(e.periodos??[]),this.eventos.set(e.eventos??[])}catch(a){this.error.set(a?.error?.message||"No se pudieron cargar tus eventos.")}finally{this.loading.set(!1)}}toggleHelp(){this.showHelp.update(a=>!a)}eventosPorPeriodo(a){return this.eventos().filter(e=>e.periodo_id===a)}tieneHistorial(){return this.historicoPeriodos().length>0}periodoEtiqueta(a){return a?`${a.anio} - ${a.ciclo}`:"\u2014"}estadoEventoClass(a){let e=String(a??"").toUpperCase(),l="inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-[11px] font-semibold border";return e==="PLANIFICADO"?`${l} bg-amber-50 text-amber-700 border-amber-200`:e==="EN_CURSO"?`${l} bg-emerald-50 text-emerald-700 border-emerald-200`:e==="CERRADO"?`${l} bg-slate-100 text-slate-700 border-slate-200`:e==="CANCELADO"?`${l} bg-rose-50 text-rose-700 border-rose-200`:`${l} bg-slate-100 text-slate-700 border-slate-200`}estadoParticipacionClass(a){let e=String(a??"").toUpperCase(),l="inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-[11px] font-semibold border";return e==="INSCRITO"?`${l} bg-sky-50 text-sky-700 border-sky-200`:e==="CONFIRMADO"?`${l} bg-emerald-50 text-emerald-700 border-emerald-200`:e==="FINALIZADO"?`${l} bg-slate-100 text-slate-700 border-slate-200`:e==="RETIRADO"?`${l} bg-amber-50 text-amber-700 border-amber-200`:e==="CANCELADO"?`${l} bg-rose-50 text-rose-700 border-rose-200`:`${l} bg-slate-100 text-slate-700 border-slate-200`}};b.\u0275fac=function(e){return new(e||b)},b.\u0275cmp=V({type:b,selectors:[["app-mis-vent-list-page"]],decls:31,vars:4,consts:[["loadingTpl",""],["errorTpl",""],["withEvents",""],["noEventosActual",""],["noEvPeriodo",""],[1,"min-h-screen","bg-slate-50/60"],[1,"max-w-7xl","mx-auto","px-4","py-8"],[1,"mb-8"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],["aria-label","Breadcrumb",1,"text-xs","text-slate-500","mb-1"],[1,"font-medium","text-slate-500"],[1,"mx-2","text-slate-400"],[1,"text-slate-700","font-semibold"],[1,"text-3xl","sm:text-4xl","font-extrabold","tracking-tight","text-slate-900"],[1,"mt-1","text-sm","text-slate-600"],[1,"flex","flex-col","items-end","gap-3"],[1,"rounded-xl","border","border-slate-200","bg-white","px-4","py-2","text-right","shadow-sm"],[1,"text-xs","text-slate-500"],[1,"text-2xl","font-black","text-slate-900"],["type","button",1,"inline-flex","items-center","gap-2","rounded-xl","border","border-slate-300","bg-white","px-4","py-2","text-sm","font-semibold","text-slate-700","hover:bg-slate-50","shadow-sm",3,"click"],[1,"fa-solid","fa-circle-question","text-sky-600"],["class","mt-4 rounded-2xl border border-sky-100 bg-sky-50/70 p-4 text-sm text-slate-700 shadow-sm",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"mt-4","rounded-2xl","border","border-sky-100","bg-sky-50/70","p-4","text-sm","text-slate-700","shadow-sm"],[1,"flex","items-start","gap-3"],[1,"mt-0.5"],[1,"fa-solid","fa-info-circle","text-sky-600"],[1,"font-semibold","text-slate-900","mb-1"],[1,"list-decimal","list-inside","space-y-1"],[1,"mt-2","text-xs","text-slate-500"],[1,"max-w-xl","mx-auto","rounded-2xl","border","border-slate-200","bg-white","p-8","text-center","shadow-sm"],[1,"mx-auto","mb-3","grid","h-12","w-12","place-items-center","rounded-xl","bg-slate-900","text-white"],[1,"fa-solid","fa-calendar-xmark","text-lg"],[1,"text-lg","font-bold","text-slate-900"],[1,"mt-2","text-sm","text-slate-600"],["class","mb-10",4,"ngIf"],[4,"ngIf"],[1,"mb-10"],[1,"mb-3","flex","items-center","justify-between","gap-3"],[1,"flex","items-center","gap-3"],[1,"grid","h-10","w-10","place-items-center","rounded-xl","bg-slate-900","text-white"],[1,"fa-solid","fa-calendar-day"],[1,"text-xl","font-bold","text-slate-900"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-4"],["class","group rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition-shadow",4,"ngFor","ngForOf"],[1,"group","rounded-2xl","border","border-slate-200","bg-white","p-4","shadow-sm","hover:shadow-md","transition-shadow"],[1,"flex","items-start","justify-between","gap-3","mb-3"],[1,"min-w-0"],[1,"text-sm","font-bold","text-slate-900","truncate"],["class","text-xs text-slate-500 truncate",4,"ngIf"],[1,"flex","flex-col","items-end","gap-1"],[1,"fa-solid","fa-circle","text-[6px]","opacity-80"],[1,"flex","flex-wrap","items-center","gap-2","mb-3"],[1,"inline-flex","items-center","gap-1","rounded-lg","border","border-slate-200","bg-slate-50","px-2","py-1","text-[11px]","font-semibold","text-slate-700"],[1,"fa-solid","fa-hashtag","text-sky-600"],[1,"fa-solid","fa-location-dot","text-emerald-600"],[1,"fa-solid","fa-calendar","text-amber-600"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-[11px]","text-slate-500"],[1,"font-semibold","text-slate-800"],["type","button",1,"inline-flex","items-center","gap-2","rounded-xl","border","border-slate-300","bg-white","px-3","py-1.5","text-xs","font-semibold","text-slate-700","hover:bg-slate-50",3,"routerLink"],[1,"fa-solid","fa-arrow-right"],[1,"text-xs","text-slate-500","truncate"],[1,"rounded-xl","border","border-dashed","border-slate-300","bg-slate-50","p-6","text-sm","text-slate-600"],[1,"mb-3","flex","items-center","gap-3"],[1,"fa-solid","fa-clock-rotate-left"],[1,"space-y-6"],[4,"ngFor","ngForOf"],[1,"text-sm","font-semibold","text-slate-700","mb-2"],[1,"rounded-lg","border","border-dashed","border-slate-300","bg-slate-50","p-4","text-xs","text-slate-500"],[1,"grid","place-items-center","py-20","text-center"],[1,"relative"],[1,"h-12","w-12","rounded-full","border-4","border-slate-200"],[1,"absolute","inset-0","h-12","w-12","animate-spin","rounded-full","border-4","border-slate-900","border-t-transparent"],[1,"mt-3","text-sm","font-semibold","text-slate-700"],[1,"mx-auto","max-w-xl","rounded-2xl","border","border-rose-200","bg-white","p-8","text-center","shadow-sm"],[1,"mx-auto","mb-4","grid","h-12","w-12","place-items-center","rounded-xl","bg-rose-100","text-rose-600"],[1,"fa-solid","fa-triangle-exclamation","text-lg"],[1,"mt-2","rounded-lg","border","border-rose-200","bg-rose-50","px-4","py-2","text-sm","font-semibold","text-rose-700"],["type","button",1,"mt-4","inline-flex","items-center","gap-2","rounded-lg","border","border-slate-300","bg-white","px-4","py-2","text-sm","font-semibold","text-slate-700","hover:bg-slate-50",3,"click"],[1,"fa-solid","fa-rotate"]],template:function(e,l){if(e&1){let x=y();n(0,"div",5)(1,"div",6)(2,"section",7)(3,"div",8)(4,"div")(5,"nav",9)(6,"span",10),o(7,"Vida acad\xE9mica"),t(),n(8,"span",11),o(9,"/"),t(),n(10,"span",12),o(11,"Mis eventos"),t()(),n(12,"h1",13),o(13," Mis eventos "),t(),n(14,"p",14),o(15," Aqu\xED ver\xE1s los eventos en los que est\xE1s inscrito y el historial de periodos anteriores. "),t()(),n(16,"div",15)(17,"div",16)(18,"div",17),o(19,"Total de eventos"),t(),n(20,"div",18),o(21),t()(),n(22,"button",19),I("click",function(){return S(x),C(l.toggleHelp())}),c(23,"i",20),o(24," \xBFC\xF3mo registrarme en un evento? "),t()()(),p(25,R,18,0,"div",21),t(),p(26,te,2,2,"ng-container",22)(27,ne,6,0,"ng-template",null,0,v)(29,ie,10,1,"ng-template",null,1,v),t()()}if(e&2){let x=f(28);r(21),s(" ",l.totalEventos()," "),r(4),d("ngIf",l.showHelp()),r(),d("ngIf",!l.loading())("ngIfElse",x)}},dependencies:[N,T,F,A],encapsulation:2});var $=b;export{$ as MisVentListPage};
