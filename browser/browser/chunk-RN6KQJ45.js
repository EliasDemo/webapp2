import{a as te}from"./chunk-3UUQ5E6N.js";import{a as H}from"./chunk-OKPZKVFZ.js";import{A as ee,b as q,d as $,e as J,g as K,i as Q,j as W,r as X,s as Y,t as Z}from"./chunk-J2XPQYKK.js";import"./chunk-LWNR2F3M.js";import{j as R,k as B,q as z,u as O}from"./chunk-FE5WSVYG.js";import{$ as b,$a as e,Ka as U,Kb as G,Mb as A,Ob as y,Pa as v,T as L,Tb as N,Y as g,Z as u,_,_a as d,ab as i,bb as p,eb as V,fa as h,fb as I,gb as C,kb as f,mb as c,n as E,rb as S,ua as D,vb as a,wb as k,xb as F,ya as s,yb as j}from"./chunk-63T4HJ2B.js";import{a as P,b as M}from"./chunk-IMPBB4AK.js";function ne(o,n){if(o&1){let t=C();e(0,"div",52),_(),e(1,"svg",53),p(2,"path",54),i(),b(),e(3,"div",55)(4,"p",56),a(5,"Ocurri\xF3 un problema"),i(),e(6,"p",57),a(7),i()(),e(8,"button",58),f("click",function(){g(t);let l=c();return u(l.dismissError())}),_(),e(9,"svg",33),p(10,"path",59),i()()()}if(o&2){let t=c();s(7),k(t.errorMsg())}}function re(o,n){if(o&1){let t=C();e(0,"div",60),_(),e(1,"svg",53),p(2,"path",61),i(),b(),e(3,"div",55)(4,"p",56),a(5,"Listo"),i(),e(6,"p",57),a(7),i()(),e(8,"button",62),f("click",function(){g(t);let l=c();return u(l.dismissSuccess())}),_(),e(9,"svg",33),p(10,"path",59),i()()()}if(o&2){let t=c();s(7),k(t.successMsg())}}function ae(o,n){if(o&1&&p(0,"img",95),o&2){let t=c(2);d("src",t.avatarUrl(),D)}}function oe(o,n){if(o&1&&(e(0,"span"),a(1),i()),o&2){let t=c(2);s(),k(t.avatarInitials())}}function le(o,n){if(o&1&&(e(0,"span",37),a(1),i()),o&2){let t,r=c(2);s(),F(" ",(t=r.profileForm().profile_photo)==null?null:t.name," ")}}function se(o,n){if(o&1&&(e(0,"option",96),a(1),i()),o&2){let t=n.$implicit;d("ngValue",t.id),s(),j(" ",t.codigo_estudiante||"Sin c\xF3digo"," \xB7 ",t.estado," ")}}function de(o,n){o&1&&(V(0),_(),e(1,"svg",33),p(2,"path",61),i(),a(3," Guardar cambios "),I())}function me(o,n){o&1&&(e(0,"span",97),p(1,"span",98),a(2," Guardando... "),i())}function pe(o,n){if(o&1){let t=C();V(0),e(1,"div",63)(2,"div",64)(3,"div",65)(4,"div",66),v(5,ae,1,1,"img",67)(6,oe,2,1,"ng-template",null,4,y),i()(),e(8,"div")(9,"p",68),a(10,"Usuario"),i(),e(11,"p",69),a(12),i(),e(13,"p",70)(14,"span",71),a(15),i(),p(16,"span",72),e(17,"span",73),a(18),i()()()(),e(19,"div",74)(20,"form",75),f("ngSubmit",function(){g(t);let l=c();return u(l.onSubmitProfile())}),e(21,"div",76)(22,"div")(23,"label",39),a(24,"Nombres"),i(),e(25,"input",77),f("ngModelChange",function(l){g(t);let m=c();return u(m.onProfileFieldChange("first_name",l))}),i()(),e(26,"div")(27,"label",39),a(28,"Apellidos"),i(),e(29,"input",78),f("ngModelChange",function(l){g(t);let m=c();return u(m.onProfileFieldChange("last_name",l))}),i()()(),e(30,"div",76)(31,"div")(32,"label",39),a(33,"Correo personal"),i(),e(34,"input",79),f("ngModelChange",function(l){g(t);let m=c();return u(m.onProfileFieldChange("email",l))}),i()(),e(35,"div")(36,"label",39),a(37,"Celular"),i(),e(38,"input",80),f("ngModelChange",function(l){g(t);let m=c();return u(m.onProfileFieldChange("celular",l))}),i()()(),e(39,"div",76)(40,"div")(41,"label",39),a(42,"Religi\xF3n (opcional)"),i(),e(43,"input",81),f("ngModelChange",function(l){g(t);let m=c();return u(m.onProfileFieldChange("religion",l))}),i()(),e(44,"div")(45,"label",39),a(46,"Foto de perfil"),i(),e(47,"div",11)(48,"label",82),_(),e(49,"svg",83),p(50,"path",84),i(),b(),e(51,"span"),a(52,"Subir imagen"),i(),e(53,"input",85),f("change",function(l){g(t);let m=c();return u(m.onPhotoSelected(l))}),i()(),v(54,le,2,1,"span",86),i()()(),e(55,"div",87)(56,"div",46)(57,"p",88),a(58," Correo institucional y expediente "),i(),e(59,"span",37),a(60," Se actualiza solo el expediente seleccionado "),i()(),e(61,"div",76)(62,"div")(63,"label",39),a(64," Expediente "),i(),e(65,"select",89),f("ngModelChange",function(l){g(t);let m=c();return u(m.onExpedienteChange(l))}),e(66,"option",90),a(67,"Selecciona expediente"),i(),v(68,se,2,3,"option",91),i()(),e(69,"div")(70,"label",39),a(71," Correo institucional "),i(),e(72,"input",92),f("ngModelChange",function(l){g(t);let m=c();return u(m.onProfileFieldChange("correo_institucional",l))}),i()()()(),e(73,"div",93)(74,"button",94),v(75,de,4,0,"ng-container",28)(76,me,3,0,"ng-template",null,5,y),i()()()()(),I()}if(o&2){let t,r,l,m=S(7),w=S(77),x=c();s(5),d("ngIf",x.avatarUrl())("ngIfElse",m),s(7),j(" ",(t=x.profile())==null?null:t.first_name," ",(t=x.profile())==null?null:t.last_name," "),s(3),F("@",(r=x.profile())==null?null:r.username),s(3),k(((l=x.profile())==null?null:l.status)||"active"),s(7),d("ngModel",x.profileForm().first_name||""),s(4),d("ngModel",x.profileForm().last_name||""),s(5),d("ngModel",x.profileForm().email||""),s(4),d("ngModel",x.profileForm().celular||""),s(5),d("ngModel",x.profileForm().religion||""),s(11),d("ngIf",x.profileForm().profile_photo),s(11),d("ngModel",x.profileForm().expediente_id||""),s(3),d("ngForOf",x.expedientes())("ngForTrackBy",x.trackExpediente),s(4),d("ngModel",x.profileForm().correo_institucional||""),s(2),d("disabled",x.savingProfile()),s(),d("ngIf",!x.savingProfile())("ngIfElse",w)}}function ce(o,n){o&1&&(e(0,"div",99)(1,"div",65),p(2,"div",100),e(3,"div",101),_(),e(4,"svg",102),p(5,"path",14),i()()(),b(),e(6,"p",103),a(7,"Cargando perfil..."),i()())}function ge(o,n){o&1&&(V(0),_(),e(1,"svg",33),p(2,"path",61),i(),a(3," Actualizar contrase\xF1a "),I())}function ue(o,n){o&1&&(e(0,"span",97),p(1,"span",98),a(2," Guardando... "),i())}function fe(o,n){o&1&&(e(0,"span",117),a(1," Sesi\xF3n actual "),i())}function xe(o,n){o&1&&(e(0,"span",118),a(1," Otra sesi\xF3n "),i())}function _e(o,n){if(o&1){let t=C();e(0,"div",107)(1,"div",55)(2,"div",108),v(3,fe,2,0,"span",109)(4,xe,2,0,"ng-template",null,6,y),e(6,"span",110),a(7),i()(),e(8,"p",111),a(9),i(),e(10,"p",112),_(),e(11,"svg",113),p(12,"path",114),i(),a(13),G(14,"date"),i()(),b(),e(15,"button",115),f("click",function(){let l=g(t).$implicit,m=c(3);return u(m.onCloseSession(l))}),_(),e(16,"svg",116),p(17,"path",59),i(),a(18," Cerrar "),i()()}if(o&2){let t=n.$implicit,r=S(5);s(3),d("ngIf",t.is_current)("ngIfElse",r),s(4),F(" ",t.ip_address||"IP desconocida"," "),s(2),F(" ",t.user_agent||"Sin informaci\xF3n de dispositivo"," "),s(4),F(" \xDAltima actividad: ",A(14,5,t.last_activity,"short")," ")}}function he(o,n){if(o&1&&(e(0,"div",105),v(1,_e,19,8,"div",106),i()),o&2){let t=c(2);s(),d("ngForOf",t.sessions())("ngForTrackBy",t.trackSession)}}function ve(o,n){if(o&1&&(V(0),v(1,he,2,2,"div",104),I()),o&2){let t=c(),r=S(80);s(),d("ngIf",t.sessions().length)("ngIfElse",r)}}function be(o,n){o&1&&(e(0,"div",119)(1,"div",120),p(2,"span",121),a(3," Cargando sesiones... "),i()())}function we(o,n){o&1&&(e(0,"div",122),a(1," No hay sesiones activas registradas. "),i())}var T=class T{constructor(){this.perfilApi=L(te);this.loader=L(H);this.loadingProfile=h(!0);this.loadingSessions=h(!0);this.savingProfile=h(!1);this.changingPassword=h(!1);this.errorMsg=h(null);this.successMsg=h(null);this.profile=h(null);this.sessions=h([]);this.profileForm=h({first_name:"",last_name:"",email:"",celular:"",religion:"",expediente_id:void 0,correo_institucional:"",profile_photo:null});this.passwordForm=h({current_password:"",password:"",password_confirmation:""});this.photoPreview=h(null);this.expedientes=N(()=>this.profile()?.expedientesAcademicos??[]);this.avatarUrl=N(()=>this.photoPreview()||this.profile()?.profile_photo||null);this.avatarInitials=N(()=>{let n=this.profile();if(!n)return"?";let t=(n.first_name||"").trim(),r=(n.last_name||"").trim(),l=(t?t[0]:"")+(r?r[0]:"");return l?l.toUpperCase():(n.username||"?")[0]?.toUpperCase()||"?"});this.activeSessionsCount=N(()=>this.sessions().length);this.trackSession=(n,t)=>t.id;this.trackExpediente=(n,t)=>t.id}ngOnInit(){this.loadProfile(),this.loadSessions()}async loadProfile(){this.loadingProfile.set(!0),this.errorMsg.set(null);try{let n=await E(this.loader.track(this.perfilApi.getMe(),"Cargando perfil..."));this.onProfileLoaded(n)}catch(n){console.error(n),this.errorMsg.set("No se pudo cargar tu perfil.")}finally{this.loadingProfile.set(!1)}}async loadSessions(){this.loadingSessions.set(!0);try{let n=await E(this.perfilApi.getSessions());n.ok?this.sessions.set(n.sessions??[]):this.errorMsg.set("No se pudo cargar las sesiones.")}catch(n){console.error(n),this.errorMsg.set("No se pudo cargar las sesiones.")}finally{this.loadingSessions.set(!1)}}onProfileLoaded(n){if(!n.ok||!n.user){this.errorMsg.set("Error al cargar el perfil.");return}this.profile.set(n.user),this.patchProfileFormFromUser(n.user)}patchProfileFormFromUser(n){let r=(n.expedientesAcademicos??[])[0]??null;this.profileForm.set({first_name:n.first_name??"",last_name:n.last_name??"",email:n.email??"",celular:n.celular??"",religion:n.religion??"",expediente_id:r?.id,correo_institucional:r?.correo_institucional??"",profile_photo:null}),this.photoPreview.set(null)}onProfileFieldChange(n,t){this.profileForm.update(r=>M(P({},r),{[n]:t===""?null:t}))}onExpedienteChange(n){let t=n?Number(n):void 0,r=this.expedientes().find(l=>l.id===t);this.profileForm.update(l=>M(P({},l),{expediente_id:t,correo_institucional:r?.correo_institucional??""}))}onPhotoSelected(n){let r=n.target.files?.[0];if(!r){this.profileForm.update(l=>M(P({},l),{profile_photo:null})),this.photoPreview.set(null);return}this.profileForm.update(l=>M(P({},l),{profile_photo:r})),this.photoPreview.set(URL.createObjectURL(r))}async onSubmitProfile(){this.savingProfile.set(!0),this.errorMsg.set(null),this.successMsg.set(null);let n=this.profileForm();try{let t=await E(this.loader.track(this.perfilApi.updateMe(n),"Guardando cambios..."));if(t.ok===!1){this.errorMsg.set(t.message||"No se pudo actualizar el perfil.");return}t.user?this.onProfileLoaded(t):await this.loadProfile(),this.successMsg.set("Perfil actualizado correctamente.")}catch(t){console.error(t),this.errorMsg.set("Ocurri\xF3 un error al actualizar el perfil.")}finally{this.savingProfile.set(!1)}}onPasswordFieldChange(n,t){this.passwordForm.update(r=>M(P({},r),{[n]:t}))}async onSubmitPassword(){this.changingPassword.set(!0),this.errorMsg.set(null),this.successMsg.set(null);let n=this.passwordForm();try{let t=await E(this.loader.track(this.perfilApi.changePassword(n),"Actualizando contrase\xF1a..."));if(!t.ok){this.errorMsg.set(t.message||"No se pudo cambiar la contrase\xF1a.");return}this.successMsg.set("Contrase\xF1a actualizada correctamente."),this.passwordForm.set({current_password:"",password:"",password_confirmation:""})}catch(t){console.error(t),this.errorMsg.set("Ocurri\xF3 un error al cambiar la contrase\xF1a.")}finally{this.changingPassword.set(!1)}}async onCloseSession(n){if(n){this.errorMsg.set(null),this.successMsg.set(null);try{let t=await E(this.loader.track(this.perfilApi.closeSession(n.id),"Cerrando sesi\xF3n..."));if(!t.ok){this.errorMsg.set(t.message||"No se pudo cerrar la sesi\xF3n.");return}this.successMsg.set(n.is_current?"Esta sesi\xF3n se cerrar\xE1. Es posible que tengas que volver a iniciar sesi\xF3n.":"Sesi\xF3n cerrada correctamente."),await this.loadSessions()}catch(t){console.error(t),this.errorMsg.set("Ocurri\xF3 un error al cerrar la sesi\xF3n.")}}}dismissError(){this.errorMsg.set(null)}dismissSuccess(){this.successMsg.set(null)}};T.\u0275fac=function(t){return new(t||T)},T.\u0275cmp=U({type:T,selectors:[["app-perfil-page"]],decls:81,vars:13,consts:[["loadingPerfilTpl",""],["changingPassTpl",""],["loadingSessionsTpl",""],["emptySessionsTpl",""],["initialsTpl",""],["savingPerfilTpl",""],["otherSessionBadge",""],[1,"min-h-screen","bg-gradient-to-br","from-slate-50","to-emerald-50/30","py-8"],[1,"mx-auto","max-w-6xl","px-4"],[1,"mb-8","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-6"],[1,"space-y-3"],[1,"flex","items-center","gap-3"],[1,"p-2","bg-white/80","backdrop-blur-sm","rounded-xl","shadow-sm","border","border-white/60","shadow-emerald-100/50","transition-all","duration-300","hover:shadow-emerald-200/70","hover:scale-105"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-emerald-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.121 17.804A7 7 0 0112 15a7 7 0 016.879 2.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-3xl","sm:text-4xl","font-bold","bg-gradient-to-r","from-gray-900","to-emerald-700","bg-clip-text","text-transparent"],[1,"text-gray-600","text-sm","sm:text-base","font-medium","flex","items-center","gap-2","mt-1"],[1,"w-2","h-2","bg-gradient-to-r","from-emerald-500","to-teal-400","rounded-full","animate-pulse"],[1,"flex","items-center","gap-3","bg-white/80","border","border-white/60","rounded-xl","px-4","py-3","shadow-sm","backdrop-blur-sm"],[1,"p-2","rounded-lg","bg-emerald-50","text-emerald-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],[1,"text-xs","text-gray-500","uppercase","tracking-wide"],[1,"text-base","font-semibold","text-gray-800"],[1,"space-y-3","mb-6"],["class","flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-red-50 to-red-100/60 border border-red-200 text-red-800 backdrop-blur-sm",4,"ngIf"],["class","flex items-start gap-3 p-3 rounded-xl bg-gradient-to-r from-emerald-50 to-teal-100/60 border border-emerald-200 text-emerald-800 backdrop-blur-sm",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2"],[4,"ngIf","ngIfElse"],[1,"space-y-6"],[1,"bg-white/80","backdrop-blur-sm","rounded-2xl","border","border-white/60","shadow-sm","p-5","space-y-4"],[1,"flex","items-center","gap-3","mb-1"],[1,"p-2","rounded-lg","bg-slate-900","text-white"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 11c.943 0 1.714-.772 1.714-1.714V7.714A1.714 1.714 0 0012 6a1.714 1.714 0 00-1.714 1.714v1.572C10.286 10.228 11.057 11 12 11z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 11h12v8H6z"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"space-y-3",3,"ngSubmit"],[1,"block","text-xs","font-medium","text-gray-600","mb-1"],["type","password","name","current_password",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],["type","password","name","password",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],["type","password","name","password_confirmation",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],[1,"pt-2","flex","justify-end"],["type","submit",1,"inline-flex","items-center","gap-2","px-4","py-2.5","rounded-lg","bg-slate-900","text-white","text-xs","font-medium","shadow-sm","hover:shadow-md","disabled:opacity-60","disabled:cursor-not-allowed","transition-all",3,"disabled"],[1,"bg-white/80","backdrop-blur-sm","rounded-2xl","border","border-white/60","shadow-sm","p-5","space-y-3"],[1,"flex","items-center","justify-between"],[1,"p-2","rounded-lg","bg-emerald-50","text-emerald-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 17l4 4 4-4m-4-5v9M5 3h14a2 2 0 012 2v7a2 2 0 01-2 2h-5l-2 2-2-2H5a2 2 0 01-2-2V5a2 2 0 012-2z"],["type","button",1,"inline-flex","items-center","gap-1","px-2.5","py-1","rounded-lg","border","border-gray-200","bg-white","hover:bg-gray-50","text-xs","font-medium","text-gray-700","transition-all",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9"],[1,"flex","items-start","gap-3","p-3","rounded-xl","bg-gradient-to-r","from-red-50","to-red-100/60","border","border-red-200","text-red-800","backdrop-blur-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12A9 9 0 113 12a9 9 0 0118 0z"],[1,"flex-1"],[1,"font-medium","text-sm"],[1,"text-sm"],["type","button",1,"text-red-600","hover:text-red-800",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","items-start","gap-3","p-3","rounded-xl","bg-gradient-to-r","from-emerald-50","to-teal-100/60","border","border-emerald-200","text-emerald-800","backdrop-blur-sm"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["type","button",1,"text-emerald-700","hover:text-emerald-900",3,"click"],[1,"bg-white/80","backdrop-blur-sm","rounded-2xl","border","border-white/60","shadow-sm","p-6","space-y-6"],[1,"flex","items-center","gap-4"],[1,"relative"],[1,"w-16","h-16","rounded-full","bg-gradient-to-br","from-emerald-500","to-teal-500","flex","items-center","justify-center","text-white","text-xl","font-bold","shadow-md","overflow-hidden"],["alt","Foto de perfil","class","w-full h-full object-cover",3,"src",4,"ngIf","ngIfElse"],[1,"text-xs","uppercase","tracking-wide","text-gray-500","mb-1"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500","flex","items-center","gap-2"],[1,"font-mono","text-gray-700"],[1,"w-1","h-1","rounded-full","bg-gray-400"],[1,"capitalize"],[1,"border-t","border-gray-100","pt-4","grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4","md:col-span-2",3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","text","name","first_name",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],["type","text","name","last_name",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],["type","email","name","email",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],["type","text","name","celular",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],["type","text","name","religion",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],[1,"inline-flex","items-center","gap-2","px-3","py-2","rounded-lg","border","border-gray-300","bg-white","hover:bg-gray-50","text-xs","font-medium","cursor-pointer","transition-all"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4-4 4 4m4-10l-4 4-4-4"],["type","file","accept","image/*",1,"hidden",3,"change"],["class","text-xs text-gray-500",4,"ngIf"],[1,"mt-4","border-t","border-gray-100","pt-4","space-y-3"],[1,"text-sm","font-semibold","text-gray-800"],["name","expediente_id",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],["value",""],[3,"ngValue",4,"ngFor","ngForOf","ngForTrackBy"],["type","email","name","correo_institucional",1,"w-full","border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-emerald-500/40","focus:border-emerald-500","transition-all",3,"ngModelChange","ngModel"],[1,"pt-4","flex","justify-end"],["type","submit",1,"inline-flex","items-center","gap-2","px-5","py-2.5","rounded-lg","bg-gradient-to-r","from-emerald-600","to-teal-600","text-white","text-sm","font-medium","shadow-sm","hover:shadow-md","hover:from-emerald-700","hover:to-teal-700","disabled:opacity-60","disabled:cursor-not-allowed","transition-all",3,"disabled"],["alt","Foto de perfil",1,"w-full","h-full","object-cover",3,"src"],[3,"ngValue"],[1,"inline-flex","items-center","gap-2"],[1,"h-4","w-4","border-2","border-white","border-t-transparent","rounded-full","animate-spin"],[1,"bg-white/80","backdrop-blur-sm","rounded-2xl","border","border-white/60","shadow-sm","p-10","flex","flex-col","items-center","justify-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-emerald-600"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-emerald-600"],[1,"mt-4","text-gray-600","text-sm","font-medium"],["class","space-y-2 max-h-72 overflow-y-auto pr-1",4,"ngIf","ngIfElse"],[1,"space-y-2","max-h-72","overflow-y-auto","pr-1"],["class","flex items-start justify-between gap-3 p-3 rounded-xl border border-gray-100 bg-white/70 hover:bg-white transition-all",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-start","justify-between","gap-3","p-3","rounded-xl","border","border-gray-100","bg-white/70","hover:bg-white","transition-all"],[1,"flex","items-center","gap-2","mb-1"],["class","text-xs px-2 py-0.5 rounded-full border border-emerald-100 text-emerald-700 bg-emerald-50 font-medium",4,"ngIf","ngIfElse"],[1,"text-xs","text-gray-500","font-mono"],[1,"text-xs","text-gray-600","line-clamp-2"],[1,"text-[11px]","text-gray-400","mt-1","flex","items-center","gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["type","button",1,"inline-flex","items-center","justify-center","px-2.5","py-1.5","rounded-lg","border","border-red-200","bg-red-50","text-xs","font-medium","text-red-700","hover:bg-red-100","hover:border-red-300","transition-all",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5","mr-1"],[1,"text-xs","px-2","py-0.5","rounded-full","border","border-emerald-100","text-emerald-700","bg-emerald-50","font-medium"],[1,"text-xs","px-2","py-0.5","rounded-full","border","border-gray-200","text-gray-600","bg-gray-50"],[1,"flex","items-center","justify-center","py-6"],[1,"flex","items-center","gap-3","text-xs","text-gray-600"],[1,"h-4","w-4","border-2","border-emerald-500","border-t-transparent","rounded-full","animate-spin"],[1,"text-center","py-6","text-xs","text-gray-500"]],template:function(t,r){if(t&1){let l=C();e(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12),_(),e(6,"svg",13),p(7,"path",14),i()(),b(),e(8,"div")(9,"h1",15),a(10," Mi perfil "),i(),e(11,"p",16),p(12,"span",17),a(13," Gestiona tus datos personales, contrase\xF1a y sesiones activas "),i()()()(),e(14,"div",18)(15,"div",19),_(),e(16,"svg",20),p(17,"path",14),i()(),b(),e(18,"div")(19,"p",21),a(20,"Sesiones activas"),i(),e(21,"p",22),a(22),i()()()(),e(23,"div",23),v(24,ne,11,1,"div",24)(25,re,11,1,"div",25),i(),e(26,"div",26)(27,"div",27),v(28,pe,78,19,"ng-container",28)(29,ce,8,0,"ng-template",null,0,y),i(),e(31,"div",29)(32,"div",30)(33,"div",31)(34,"div",32),_(),e(35,"svg",33),p(36,"path",34)(37,"path",35),i()(),b(),e(38,"div")(39,"p",36),a(40,"Cambiar contrase\xF1a"),i(),e(41,"p",37),a(42," Requiere tu contrase\xF1a actual por seguridad "),i()()(),e(43,"form",38),f("ngSubmit",function(){return g(l),u(r.onSubmitPassword())}),e(44,"div")(45,"label",39),a(46,"Contrase\xF1a actual"),i(),e(47,"input",40),f("ngModelChange",function(w){return g(l),u(r.onPasswordFieldChange("current_password",w))}),i()(),e(48,"div")(49,"label",39),a(50,"Nueva contrase\xF1a"),i(),e(51,"input",41),f("ngModelChange",function(w){return g(l),u(r.onPasswordFieldChange("password",w))}),i()(),e(52,"div")(53,"label",39),a(54,"Confirmar nueva contrase\xF1a"),i(),e(55,"input",42),f("ngModelChange",function(w){return g(l),u(r.onPasswordFieldChange("password_confirmation",w))}),i()(),e(56,"div",43)(57,"button",44),v(58,ge,4,0,"ng-container",28)(59,ue,3,0,"ng-template",null,1,y),i()()()(),e(61,"div",45)(62,"div",46)(63,"div",11)(64,"div",47),_(),e(65,"svg",33),p(66,"path",48),i()(),b(),e(67,"div")(68,"p",36),a(69,"Sesiones activas"),i(),e(70,"p",37),a(71," Cierra sesiones en otros dispositivos si lo necesitas "),i()()(),e(72,"button",49),f("click",function(){return g(l),u(r.loadSessions())}),_(),e(73,"svg",50),p(74,"path",51),i(),a(75," Actualizar "),i()(),v(76,ve,2,2,"ng-container",28)(77,be,4,0,"ng-template",null,2,y)(79,we,2,0,"ng-template",null,3,y),i()()()()()}if(t&2){let l=S(30),m=S(60),w=S(78);s(22),k(r.activeSessionsCount()),s(2),d("ngIf",r.errorMsg()),s(),d("ngIf",r.successMsg()),s(3),d("ngIf",!r.loadingProfile())("ngIfElse",l),s(19),d("ngModel",r.passwordForm().current_password),s(4),d("ngModel",r.passwordForm().password),s(4),d("ngModel",r.passwordForm().password_confirmation),s(2),d("disabled",r.changingPassword()),s(),d("ngIf",!r.changingPassword())("ngIfElse",m),s(18),d("ngIf",!r.loadingSessions())("ngIfElse",w)}},dependencies:[O,R,B,ee,W,Y,Z,q,X,$,J,Q,K,z],encapsulation:2});var ie=T;export{ie as PerfilPage};
